## Construct Kinetic Hamiltonian (lattice version)  
**Prompt:**    
You will be instructed to describe the kinetic term of Hamiltonian in CuO$_2$ in the real space in the second-quantized form.   
The degrees of freedom of the system are: spin index (spin up and spin down), orbital index ($d$ orbital in Cu atom, $p_x$ orbital in O atom, and $p_y$ orbital in O atom)     
The kinetic term is a tight-binding model composed of the following hopping process: 
1. $c_{d,s}^\dagger(R_i)$ and $c_{p_x,s}^\dagger(R_i+\hat{x}/2)$ with the hopping amplitude $-t_pd$.  
2. $c_{d,s}^\dagger(R_i)$ and $c_{p_x,s}^\dagger(R_i-\hat{x}/2)$ with the hopping amplitude $-t_pd$.  
3. $c_{d,s}^\dagger(R_i)$ and $c_{p_y,s}^\dagger(R_i+\hat{y}/2)$ with the hopping amplitude $-t_pd$.  
4. $c_{d,s}^\dagger(R_i)$ and $c_{p_y,s}^\dagger(R_i-\hat{y}/2)$ with the hopping amplitude $-t_pd$.  
5. $c_{p_x,s}^\dagger(R_i+\hat{x}/2)$ and $c_{p_y,s}^\dagger(R_i+\hat{y}/2)$ with the hopping amplitude $-t_pp$.  
6. $c_{p_x,s}^\dagger(R_i+\hat{x}/2)$ and $c_{p_y,s}^\dagger(R_i-\hat{y}/2)$ with the hopping amplitude $-t_pp$.  
7. $c_{p_x,s}^\dagger(R_i-\hat{x}/2)$ and $c_{p_y,s}^\dagger(R_i+\hat{y}/2)$ with the hopping amplitude $-t_pp$.  
8. $c_{p_x,s}^\dagger(R_i-\hat{x}/2)$ and $c_{p_y,s}^\dagger(R_i-\hat{y}/2)$ with the hopping amplitude $-t_pp$.
You should ensure the hermiticity of the Hamiltonian.
The summation should be taken over all spin index (spin up and spin down), orbital index ($d$ orbital in Cu atom, $p_x$ orbital in O atom, and $p_y$ orbital in O atom) and all real space positions.  
Return the Kinetic Hamiltonian $H_0$.

Use the following conventions for the symbols:  
$s$ : spin index  
$\uparrow$ : spin up  
$\downarrow$ : spin down 
$\alpha$ : orbital index
$d$: $d$ orbital in Cu atom
$p_x$: $p_x$ orbital in O atom
$p_y$: $p_y$ orbital in O atom
$c_{\alpha,s}^\dagger(R_i)$ : annihilation operator for a particle with orbital $\alpha$ and spin $s$ at site $i$ 
$R_i$ : real space position of site $i$  
$\hat{x}$: unit vector along $x$ direction
$\hat{y}$: unit vector along $y$ direction
$t_{pd}$: hopping amplitude between $p_x$ and $d$ orbital, or $p_y$ and $d$ orbital
$t_{pp}$: hopping amplitude between $p_x$ and $p_y$ orbital

**Completion:**    
The kinetic term of the Hamiltonian in the second-quantized form can be written as:

$H_0 = -t_{pd} \sum_{R_i, s} [c_{d,s}^\dagger(R_i) c_{p_x,s}(R_i+\hat{x}/2) + c_{d,s}^\dagger(R_i) c_{p_x,s}(R_i-\hat{x}/2) + c_{d,s}^\dagger(R_i) c_{p_y,s}(R_i+\hat{y}/2) + c_{d,s}^\dagger(R_i) c_{p_y,s}(R_i-\hat{y}/2) + h.c.]$

$-t_{pp} \sum_{R_i, s} [c_{p_x,s}^\dagger(R_i+\hat{x}/2) c_{p_y,s}(R_i+\hat{y}/2) + c_{p_x,s}^\dagger(R_i+\hat{x}/2) c_{p_y,s}(R_i-\hat{y}/2) + c_{p_x,s}^\dagger(R_i-\hat{x}/2) c_{p_y,s}(R_i+\hat{y}/2) + c_{p_x,s}^\dagger(R_i-\hat{x}/2) c_{p_y,s}(R_i-\hat{y}/2) + h.c.]$

where $h.c.$ denotes the Hermitian conjugate of the preceding terms, ensuring the hermiticity of the Hamiltonian. The summation is taken over all real space positions $R_i$ and spin indices $s$.

## Construct interaction Hamiltonian (real space, lattice version)  
**Prompt:**    
You will be instructed to construct the interaction part of the Hamiltonian, $\hat{H}^{int}$ in the real space in the second-quantized form.   
The interacting Hamiltonian has the same degrees of freedom as the kinetic Hamiltonian $H_0$.  
The interaction is a density-density interaction composed of the following process:
1. onsite interaction between $n_{d,\uparrow}(R_i)$ and $n_{d,\downarrow}(R_i)$ with interaction strength $U_d$
2. onsite interaction between $n_{p_x,\uparrow}(R_i+\hat{x}/2)$ and $n_{p_x,\downarrow}(R_i+\hat{x}/2)$ with interaction strength $U_p/2$
3. onsite interaction between $n_{p_y,\uparrow}(R_i+\hat{y}/2)$ and $n_{p_y,\downarrow}(R_i+\hat{y}/2)$ with interaction strength $U_p/2$
4. Nearest neighbor interaction between $n_{d,s}(R_i)$ and $n_{p_x,s^{\prime}}(R_i+\hat{x}/2)$ with interaction strength $V_{pd}$
5. Nearest neighbor interaction between $n_{d,s}(R_i)$ and $n_{p_x,s^{\prime}}(R_i-\hat{x}/2)$ with interaction strength $V_{pd}$
6. Nearest neighbor interaction between $n_{d,s}(R_i)$ and $n_{p_y,s^{\prime}}(R_i+\hat{y}/2)$ with interaction strength $V_{pd}$
7. Nearest neighbor interaction between $n_{d,s}(R_i)$ and $n_{p_y,s^{\prime}}(R_i-\hat{y}/2)$ with interaction strength $V_{pd}$
8. Nearest neighbor interaction between $n_{p_x,s}(R_i+\hat{x}/2)$ and $n_{p_y,s^{\prime}}(R_i+\hat{y}/2)$ with interaction strength $V_{pp}$
9. Nearest neighbor interaction between $n_{p_x,s}(R_i+\hat{x}/2)$ and $n_{p_y,s^{\prime}}(R_i-\hat{y}/2)$ with interaction strength $V_{pp}$
10. Nearest neighbor interaction between $n_{p_x,s}(R_i-\hat{x}/2)$ and $n_{p_y,s^{\prime}}(R_i+\hat{y}/2)$ with interaction strength $V_{pp}$
11. Nearest neighbor interaction between $n_{p_x,s}(R_i-\hat{x}/2)$ and $n_{p_y,s^{\prime}}(R_i-\hat{y}/2)$ with interaction strength $V_{pp}$  
where density operator $n_{\alpha,s}(R_i) = c_{\alpha,s}^\dagger(R_i) c_{\alpha,s}(R_i)$. 
The summation should be taken over all spin index (spin up and spin down), orbital index ($d$ orbital in Cu atom, $p_x$ orbital in O atom, and $p_y$ orbital in O atom) and all real space positions.  
Return the interaction term $\hat{H}^{int}$ in terms of $n_{\alpha,s}(R_i)$.

Use the following conventions for the symbols (You should also remember the conventions in my previous prompts if there are no conflicts. If you have conflicts in the conventions, you should stop and let me know): 
$s^{\prime}$: spin index  
$n_{\alpha,s}(R_i)$: density of particle with orbital $\alpha$ and spin $s$ at site $R_i$  
$U_d$: onsite interaction strength of $d$ orbital  
$U_p$: onsite interaction strength of $p_x$ orbital or $p_y$ orbital  
$V_{pd}$: Nearest neighbor interaction strength between $p_x$ orbital and $d$ orbital or between $p_y$ orbital and $d$ orbital  
$V_{pp}$: Nearest neighbor interaction strength between $p_x$ orbital and $p_y$ orbital

**Completion:**    
The interaction part of the Hamiltonian, $\hat{H}^{int}$, in the real space in the second-quantized form can be written as:

$\hat{H}^{int} = \sum_{R_i} \left[ U_d n_{d,\uparrow}(R_i) n_{d,\downarrow}(R_i) + \frac{U_p}{2} n_{p_x,\uparrow}(R_i+\hat{x}/2) n_{p_x,\downarrow}(R_i+\hat{x}/2) + \frac{U_p}{2} n_{p_y,\uparrow}(R_i+\hat{y}/2) n_{p_y,\downarrow}(R_i+\hat{y}/2) \right]$

$+ \sum_{R_i,s,s^{\prime}} \left[ V_{pd} n_{d,s}(R_i) \left( n_{p_x,s^{\prime}}(R_i+\hat{x}/2) + n_{p_x,s^{\prime}}(R_i-\hat{x}/2) + n_{p_y,s^{\prime}}(R_i+\hat{y}/2) + n_{p_y,s^{\prime}}(R_i-\hat{y}/2) \right) \right]$

$+ \sum_{R_i,s,s^{\prime}} \left[ V_{pp} \left( n_{p_x,s}(R_i+\hat{x}/2) \left( n_{p_y,s^{\prime}}(R_i+\hat{y}/2) + n_{p_y,s^{\prime}}(R_i-\hat{y}/2) \right) + n_{p_x,s}(R_i-\hat{x}/2) \left( n_{p_y,s^{\prime}}(R_i+\hat{y}/2) + n_{p_y,s^{\prime}}(R_i-\hat{y}/2) \right) \right) \right]$

where the summation is taken over all real space positions $R_i$ and spin indices $s$ and $s^{\prime}$. The density operator $n_{\alpha,s}(R_i) = c_{\alpha,s}^\dagger(R_i) c_{\alpha,s}(R_i)$ is used.

## Convert noninteracting Hamiltonian in real space to momentum space (lattice version)  
**Prompt:**    
You will be instructed to convert the noninteracting Hamiltonian $H_0$ in the second quantized form from the basis in real space to the basis in momentum space. 
To do that, you should apply the Fourier transformation to $c_{\alpha,s}^\dagger(R_i)$ in the real space to the $c_{\alpha,s}^\dagger(k)$ in the momentum space, which is defined as $c_{\alpha,s}^\dagger(k)= \frac{1}{\sqrt{N}} \sum_i c_{\alpha,s}^\dagger(R_i) e^{i k \cdot R_i}$, where $i$ is integrated over all sites in the entire real space. You should follow the EXAMPLE below to apply the Fourier transformation. Note that $t_{pp}$ and $t_{pd}$ have no position dependence now.
You should recall that $H_0 = -t_{pd}\sum_{R_i, s} ( c_{d,s}^\dagger(R_i) c_{p_x,s}(R_i+\hat{x}/2) + c_{p_x,s}^\dagger(R_i+\hat{x}/2) c_{d,s}(R_i) + c_{d,s}^\dagger(R_i) c_{p_x,s}(R_i-\hat{x}/2) + c_{p_x,s}^\dagger(R_i-\hat{x}/2) c_{d,s}(R_i)+ c_{d,s}^\dagger(R_i) c_{p_y,s}(R_i+\hat{y}/2) + c_{p_y,s}^\dagger(R_i+\hat{y}/2) c_{d,s}(R_i)+ c_{d,s}^\dagger(R_i) c_{p_y,s}(R_i-\hat{y}/2) + c_{p_y,s}^\dagger(R_i-\hat{y}/2) c_{d,s}(R_i) )-t_{pp}\sum_{R_i, s} ( c_{p_x,s}^\dagger(R_i+\hat{x}/2) c_{p_y,s}(R_i+\hat{y}/2) + c_{p_y,s}^\dagger(R_i+\hat{y}/2) c_{p_x,s}(R_i+\hat{x}/2) + c_{p_x,s}^\dagger(R_i+\hat{x}/2) c_{p_y,s}(R_i-\hat{y}/2) + c_{p_y,s}^\dagger(R_i-\hat{y}/2) c_{p_x,s}(R_i+\hat{x}/2) + c_{p_x,s}^\dagger(R_i-\hat{x}/2) c_{p_y,s}(R_i+\hat{y}/2) + c_{p_y,s}^\dagger(R_i+\hat{y}/2) c_{p_x,s}(R_i-\hat{x}/2) + c_{p_x,s}^\dagger(R_i-\hat{x}/2) c_{p_y,s}(R_i-\hat{y}/2) + c_{p_y,s}^\dagger(R_i-\hat{y}/2) c_{p_x,s}(R_i-\hat{x}/2) )$
Express the total noninteracting Hamiltonian $H_0$ in terms of $c_{\alpha,s}^\dagger(k)$. Simplify any summation index if possible.

Use the following conventions for the symbols (You should also obey the conventions in all my previous prompts if you encounter undefined symbols. If you find it is never defined or has conflicts in the conventions, you should stop and let me know):
$c_{\alpha,s}(k)$ : electron annihilation operator at momentum $k$, spin $s$ and orbital $\alpha$
$c_{\alpha,s}^\dagger(k)$ : electron creation operator at momentum $k$, spin $s$ and orbital $\alpha$
$N$ : number of the unit cells in the real space  

===
EXAMPLE:  
Write a Kinetic Hamiltonian $\hat{H}$ in the second quantized form in the real space, $\hat{H}=\sum_{i,j} t(R_i-R_j) c^\dagger(R_i) c(R_j)$, where $i,j$ are summed over the entire real space.  
Define the Fourier transformation $c^\dagger(k)=\frac{1}{\sqrt{N}} \sum_{i}c^\dagger(R_i) e^{i k \cdot R_i}$, where $i$ is integrated over the entire real space containing $N$ unit cells, $N$ is the number of unit cells.  
This leads to the inverse Fourier transformation $c^\dagger(R_i) = \frac{1}{\sqrt{N}} \sum_k c^\dagger(k) e^{-i k \cdot R_i}$, where $k$ is first Brillouin zone.  
Thus, substitute $c^\dagger(R_i)$ and $c(R_j)$ into $\hat{H}$, we get  
$$\hat{H} = \sum_{i,j} t(R_i-R_j) \frac{1}{\sqrt{N}} \sum_{k_1} c^\dagger(k_1) e^{-i k_1 \cdot R_i} \frac{1}{\sqrt{N}} \sum_{k_2} c(k_2) e^{i k_2 \cdot R_j} =\frac{1}{N} \sum_{i,j}\sum_{k_1,k_2} c^\dagger(k_1)  c(k_2)  e^{-i k_1\cdot R_i} e^{i k_2 \cdot R_j} t(R_i-R_j) $$
Now make a replacement by defining $n= R_i-R_j$  
The Hamiltonian become  
$$\hat{H}=\frac{1}{N} \sum_{i,n} \sum_{k_1,k_2} c^\dagger(k_1)  c(k_2) t(n) e^{-i (k_1-k_2)\cdot R_i} e^{-i k_2 \cdot n}$$
Because $\frac{1}{N}\sum_{i} e^{-i (k_1-k_2)\cdot R_i} = \delta(k_1,k_2)$, where $\delta(k_1,k_2)$ is the Kronecker delta function.  
therefore   
$$\hat{H}=\sum_{k_1,k_2} \sum_{n} t(n) e^{-i k_2 \cdot n} c^\dagger(k_1)  c(k_2) \delta(k_1,k_2)$$
Using the property of Kronecker delta function and sum over $k_2$, we obtain  
$$\hat{H}=\sum_{k_1} \sum_{n} t(n) e^{-i k_1 \cdot n} c^\dagger(k_1)  c(k_1) $$
For simplicity, we replace $k_1$ with $k$, we obtain  
$$\hat{H}=\sum_{k} \sum_{n} t(n) e^{-i k \cdot n} c^\dagger(k)  c(k)$$
If we define energy dispersion $E(k)=\sum_{n} t(n) e^{-i k \cdot n}$, where $n$ is the summation of all hopping pairs, the Hamiltonian in the momentum space is 
$$\hat{H}=\sum_{k} E(k) c^\dagger(k)  c(k)$$

**Completion:**    
To convert the noninteracting Hamiltonian $H_0$ from the basis in real space to the basis in momentum space, we apply the Fourier transformation to the creation and annihilation operators in the real space. 

First, we define the Fourier transformation for the creation and annihilation operators as follows:

$c_{\alpha,s}^\dagger(k)= \frac{1}{\sqrt{N}} \sum_i c_{\alpha,s}^\dagger(R_i) e^{i k \cdot R_i}$

$c_{\alpha,s}(k)= \frac{1}{\sqrt{N}} \sum_i c_{\alpha,s}(R_i) e^{-i k \cdot R_i}$

where $i$ is integrated over all sites in the entire real space. 

Then, we substitute these expressions into the Hamiltonian $H_0$. 

After the substitution, we get:

$H_0 = -t_{pd}\sum_{k, s} ( c_{d,s}^\dagger(k) c_{p_x,s}(k) + c_{p_x,s}^\dagger(k) c_{d,s}(k) + c_{d,s}^\dagger(k) c_{p_x,s}(k) + c_{p_x,s}^\dagger(k) c_{d,s}(k)+ c_{d,s}^\dagger(k) c_{p_y,s}(k) + c_{p_y,s}^\dagger(k) c_{d,s}(k)+ c_{d,s}^\dagger(k) c_{p_y,s}(k) + c_{p_y,s}^\dagger(k) c_{d,s}(k) )-t_{pp}\sum_{k, s} ( c_{p_x,s}^\dagger(k) c_{p_y,s}(k) + c_{p_y,s}^\dagger(k) c_{p_x,s}(k) + c_{p_x,s}^\dagger(k) c_{p_y,s}(k) + c_{p_y,s}^\dagger(k) c_{p_x,s}(k) + c_{p_x,s}^\dagger(k) c_{p_y,s}(k) + c_{p_y,s}^\dagger(k) c_{p_x,s}(k) + c_{p_x,s}^\dagger(k) c_{p_y,s}(k) + c_{p_y,s}^\dagger(k) c_{p_x,s}(k) )$

Next, we simplify the summation index. Since the summation over $k$ is over the first Brillouin zone, we can replace the double summation over $k$ with a single summation. 

Finally, we obtain the noninteracting Hamiltonian $H_0$ in the momentum space:

$H_0 = -t_{pd}\sum_{k, s} ( c_{d,s}^\dagger(k) c_{p_x,s}(k) + c_{p_x,s}^\dagger(k) c_{d,s}(k) + c_{d,s}^\dagger(k) c_{p_x,s}(k) + c_{p_x,s}^\dagger(k) c_{d,s}(k)+ c_{d,s}^\dagger(k) c_{p_y,s}(k) + c_{p_y,s}^\dagger(k) c_{d,s}(k)+ c_{d,s}^\dagger(k) c_{p_y,s}(k) + c_{p_y,s}^\dagger(k) c_{d,s}(k) )-t_{pp}\sum_{k, s} ( c_{p_x,s}^\dagger(k) c_{p_y,s}(k) + c_{p_y,s}^\dagger(k) c_{p_x,s}(k) + c_{p_x,s}^\dagger(k) c_{p_y,s}(k) + c_{p_y,s}^\dagger(k) c_{p_x,s}(k) + c_{p_x,s}^\dagger(k) c_{p_y,s}(k) + c_{p_y,s}^\dagger(k) c_{p_x,s}(k) + c_{p_x,s}^\dagger(k) c_{p_y,s}(k) + c_{p_y,s}^\dagger(k) c_{p_x,s}(k) )$

## Mathematical simplify: inner product expansion  
**Prompt:**    
You will be instructed to simplify $H_0$ by using $k\cdot \hat{x}=k_x$ and $k\cdot \hat{y}=k_y$ only.  
You should recall that $H_0 = -t_{pd} \sum_{k,s}  (e^{i k \cdot \hat{x}/2} c_{d,s}^\dagger(k) c_{p_x,s}(k) + e^{-i k \cdot \hat{x}/2} c_{p_x,s}^\dagger(k) c_{d,s}(k)+ e^{-i k \cdot \hat{x}/2} c_{d,s}^\dagger(k) c_{p_x,s}(k) + e^{i k \cdot \hat{x}/2} c_{p_x,s}^\dagger(k) c_{d,s}(k) + e^{i k \cdot \hat{y}/2} c_{d,s}^\dagger(k) c_{p_y,s}(k) + e^{-i k \cdot \hat{y}/2} c_{p_y,s}^\dagger(k) c_{d,s}(k)+ e^{-i k \cdot \hat{y}/2} c_{d,s}^\dagger(k) c_{p_y,s}(k) + e^{i k \cdot \hat{y}/2} c_{p_y,s}^\dagger(k) c_{d,s}(k)) - t_{pp} \sum_{k,s}  (e^{i k \cdot (\hat{x}+\hat{y})/2} c_{p_x,s}^\dagger(k) c_{p_y,s}(k) + e^{-i k \cdot (\hat{x}+\hat{y})/2} c_{p_y,s}^\dagger(k) c_{p_x,s}(k) + e^{i k \cdot (\hat{x}-\hat{y})/2} c_{p_x,s}^\dagger(k) c_{p_y,s}(k) + e^{-i k \cdot (\hat{x}-\hat{y})/2} c_{p_y,s}^\dagger(k) c_{p_x,s}(k)+ e^{i k \cdot (-\hat{x}+\hat{y})/2} c_{p_x,s}^\dagger(k) c_{p_y,s}(k) + e^{-i k \cdot (-\hat{x}+\hat{y})/2} c_{p_y,s}^\dagger(k) c_{p_x,s}(k)+ e^{i k \cdot (-\hat{x}-\hat{y})/2} c_{p_x,s}^\dagger(k) c_{p_y,s}(k) + e^{-i k \cdot (-\hat{x}-\hat{y})/2} c_{p_y,s}^\dagger(k) c_{p_x,s}(k))$.  
Return the simplified $H_0$.

**Completion:**    
By substituting $k\cdot \hat{x}=k_x$ and $k\cdot \hat{y}=k_y$ into the given $H_0$, we obtain:

$H_0 = -t_{pd} \sum_{k,s}  (e^{i k_x/2} c_{d,s}^\dagger(k) c_{p_x,s}(k) + e^{-i k_x/2} c_{p_x,s}^\dagger(k) c_{d,s}(k)+ e^{-i k_x/2} c_{d,s}^\dagger(k) c_{p_x,s}(k) + e^{i k_x/2} c_{p_x,s}^\dagger(k) c_{d,s}(k) + e^{i k_y/2} c_{d,s}^\dagger(k) c_{p_y,s}(k) + e^{-i k_y/2} c_{p_y,s}^\dagger(k) c_{d,s}(k)+ e^{-i k_y/2} c_{d,s}^\dagger(k) c_{p_y,s}(k) + e^{i k_y/2} c_{p_y,s}^\dagger(k) c_{d,s}(k)) - t_{pp} \sum_{k,s}  (e^{i (k_x+k_y)/2} c_{p_x,s}^\dagger(k) c_{p_y,s}(k) + e^{-i (k_x+k_y)/2} c_{p_y,s}^\dagger(k) c_{p_x,s}(k) + e^{i (k_x-k_y)/2} c_{p_x,s}^\dagger(k) c_{p_y,s}(k) + e^{-i (k_x-k_y)/2} c_{p_y,s}^\dagger(k) c_{p_x,s}(k)+ e^{i (-k_x+k_y)/2} c_{p_x,s}^\dagger(k) c_{p_y,s}(k) + e^{-i (-k_x+k_y)/2} c_{p_y,s}^\dagger(k) c_{p_x,s}(k)+ e^{i (-k_x-k_y)/2} c_{p_x,s}^\dagger(k) c_{p_y,s}(k) + e^{-i (-k_x-k_y)/2} c_{p_y,s}^\dagger(k) c_{p_x,s}(k))$.

## Mathematical simplify: Euler's formula  
**Prompt:**    
You will be instructed to simplify $H_0$ by converting the exponential to the trigonometrical functions using Euler's formula only. You should also apply basic trigonometrical function simplification afterwards if possible. 
You should recall that $H_0 = -t_{pd} \sum_{k,s}  (e^{i k_x/2} c_{d,s}^\dagger(k) c_{p_x,s}(k) + e^{-i k_x/2} c_{p_x,s}^\dagger(k) c_{d,s}(k)+ e^{-i k_x/2} c_{d,s}^\dagger(k) c_{p_x,s}(k) + e^{i k_x/2} c_{p_x,s}^\dagger(k) c_{d,s}(k) + e^{i k_y/2} c_{d,s}^\dagger(k) c_{p_y,s}(k) + e^{-i k_y/2} c_{p_y,s}^\dagger(k) c_{d,s}(k)+ e^{-i k_y/2} c_{d,s}^\dagger(k) c_{p_y,s}(k) + e^{i k_y/2} c_{p_y,s}^\dagger(k) c_{d,s}(k))- t_{pp} \sum_{k,s}  (e^{i (k_x+k_y)/2} c_{p_x,s}^\dagger(k) c_{p_y,s}(k) + e^{-i (k_x+k_y)/2} c_{p_y,s}^\dagger(k) c_{p_x,s}(k) + e^{i (k_x-k_y)/2} c_{p_x,s}^\dagger(k) c_{p_y,s}(k) + e^{-i (k_x-k_y)/2} c_{p_y,s}^\dagger(k) c_{p_x,s}(k)+ e^{i (-k_x+k_y)/2} c_{p_x,s}^\dagger(k) c_{p_y,s}(k) + e^{-i (-k_x+k_y)/2} c_{p_y,s}^\dagger(k) c_{p_x,s}(k)+ e^{i (-k_x-k_y)/2} c_{p_x,s}^\dagger(k) c_{p_y,s}(k) + e^{-i (-k_x-k_y)/2} c_{p_y,s}^\dagger(k) c_{p_x,s}(k))$.  
Return the simplified $H_0$.

**Completion:**    
Using Euler's formula, $e^{ix} = \cos(x) + i\sin(x)$ and $e^{-ix} = \cos(x) - i\sin(x)$, we can rewrite the Hamiltonian $H_0$ as follows:

$H_0 = -t_{pd} \sum_{k,s}  ((\cos(k_x/2) + i\sin(k_x/2)) c_{d,s}^\dagger(k) c_{p_x,s}(k) + (\cos(k_x/2) - i\sin(k_x/2)) c_{p_x,s}^\dagger(k) c_{d,s}(k)+ (\cos(k_x/2) - i\sin(k_x/2)) c_{d,s}^\dagger(k) c_{p_x,s}(k) + (\cos(k_x/2) + i\sin(k_x/2)) c_{p_x,s}^\dagger(k) c_{d,s}(k) + (\cos(k_y/2) + i\sin(k_y/2)) c_{d,s}^\dagger(k) c_{p_y,s}(k) + (\cos(k_y/2) - i\sin(k_y/2)) c_{p_y,s}^\dagger(k) c_{d,s}(k)+ (\cos(k_y/2) - i\sin(k_y/2)) c_{d,s}^\dagger(k) c_{p_y,s}(k) + (\cos(k_y/2) + i\sin(k_y/2)) c_{p_y,s}^\dagger(k) c_{d,s}(k)) - t_{pp} \sum_{k,s}  ((\cos((k_x+k_y)/2) + i\sin((k_x+k_y)/2)) c_{p_x,s}^\dagger(k) c_{p_y,s}(k) + (\cos((k_x+k_y)/2) - i\sin((k_x+k_y)/2)) c_{p_y,s}^\dagger(k) c_{p_x,s}(k) + (\cos((k_x-k_y)/2) + i\sin((k_x-k_y)/2)) c_{p_x,s}^\dagger(k) c_{p_y,s}(k) + (\cos((k_x-k_y)/2) - i\sin((k_x-k_y)/2)) c_{p_y,s}^\dagger(k) c_{p_x,s}(k)+ (\cos((-k_x+k_y)/2) + i\sin((-k_x+k_y)/2)) c_{p_x,s}^\dagger(k) c_{p_y,s}(k) + (\cos((-k_x+k_y)/2) - i\sin((-k_x+k_y)/2)) c_{p_y,s}^\dagger(k) c_{p_x,s}(k)+ (\cos((-k_x-k_y)/2) + i\sin((-k_x-k_y)/2)) c_{p_x,s}^\dagger(k) c_{p_y,s}(k) + (\cos((-k_x-k_y)/2) - i\sin((-k_x-k_y)/2)) c_{p_y,s}^\dagger(k) c_{p_x,s}(k))$.

Now, we can simplify the Hamiltonian by combining terms with the same operators. The final simplified form of $H_0$ is:

$H_0 = -2t_{pd} \sum_{k,s}  (\cos(k_x/2) (c_{d,s}^\dagger(k) c_{p_x,s}(k) + c_{p_x,s}^\dagger(k) c_{d,s}(k)) + \cos(k_y/2) (c_{d,s}^\dagger(k) c_{p_y,s}(k) + c_{p_y,s}^\dagger(k) c_{d,s}(k))) - 2t_{pp} \sum_{k,s}  (\cos((k_x+k_y)/2) (c_{p_x,s}^\dagger(k) c_{p_y,s}(k) + c_{p_y,s}^\dagger(k) c_{p_x,s}(k)) + \cos((k_x-k_y)/2) (c_{p_x,s}^\dagger(k) c_{p_y,s}(k) + c_{p_y,s}^\dagger(k) c_{p_x,s}(k)))$.

Note that the imaginary parts cancel out due to the Hermitian nature of the Hamiltonian.

## Mathematical simplify: prosthaphaeresis  
**Prompt:**    
You will be instructed to simplify $H_0$ by reducing trigonometrical functions using prosthaphaeresis.  
You should recall that $H_0 = -2 t_{pd}\sum_{k, s} ( c_{d,s}^\dagger(k) c_{p_x,s}(k) \cos(k_x /2) + c_{p_x,s}^\dagger(k) c_{d,s}(k) \cos(k_x /2) + c_{d,s}^\dagger(k) c_{p_y,s}(k) \cos(k_y /2) + c_{p_y,s}^\dagger(k) c_{d,s}(k) \cos(k_y /2) )-2 t_{pp}\sum_{k, s} ( c_{p_x,s}^\dagger(k) c_{p_y,s}(k) \cos((k_x+k_y) /2) + c_{p_y,s}^\dagger(k) c_{p_x,s}(k) \cos((k_x+k_y) /2)+ c_{p_x,s}^\dagger(k) c_{p_y,s}(k) \cos((k_x-k_y) /2) + c_{p_y,s}^\dagger(k) c_{p_x,s}(k) \cos((k_x-k_y) /2) )$.  
Return the simplified $H_0$.

**Completion:**    
The Hamiltonian $H_0$ can be simplified using Euler's formula, which states that $\cos(\theta) = \frac{1}{2}(e^{i\theta} + e^{-i\theta})$. Applying this to $H_0$, we get:

$H_0 = -t_{pd}\sum_{k, s} ( c_{d,s}^\dagger(k) c_{p_x,s}(k) (e^{ik_x} + e^{-ik_x}) + c_{p_x,s}^\dagger(k) c_{d,s}(k) (e^{ik_x} + e^{-ik_x}) + c_{d,s}^\dagger(k) c_{p_y,s}(k) (e^{ik_y} + e^{-ik_y}) + c_{p_y,s}^\dagger(k) c_{d,s}(k) (e^{ik_y} + e^{-ik_y}) )-t_{pp}\sum_{k, s} ( c_{p_x,s}^\dagger(k) c_{p_y,s}(k) (e^{i(k_x+k_y)} + e^{-i(k_x+k_y)}) + c_{p_y,s}^\dagger(k) c_{p_x,s}(k) (e^{i(k_x+k_y)} + e^{-i(k_x+k_y)})+ c_{p_x,s}^\dagger(k) c_{p_y,s}(k) (e^{i(k_x-k_y)} + e^{-i(k_x-k_y)}) + c_{p_y,s}^\dagger(k) c_{p_x,s}(k) (e^{i(k_x-k_y)} + e^{-i(k_x-k_y)}) )$.

The terms with the same operators can be combined, and the imaginary parts cancel out due to the Hermitian nature of the Hamiltonian, resulting in:

$H_0 = -2t_{pd}\sum_{k, s} ( c_{d,s}^\dagger(k) c_{p_x,s}(k) \cos(k_x) + c_{p_x,s}^\dagger(k) c_{d,s}(k) \cos(k_x) + c_{d,s}^\dagger(k) c_{p_y,s}(k) \cos(k_y) + c_{p_y,s}^\dagger(k) c_{d,s}(k) \cos(k_y) )-2t_{pp}\sum_{k, s} ( c_{p_x,s}^\dagger(k) c_{p_y,s}(k) \cos(k_x+k_y) + c_{p_y,s}^\dagger(k) c_{p_x,s}(k) \cos(k_x+k_y)+ c_{p_x,s}^\dagger(k) c_{p_y,s}(k) \cos(k_x-k_y) + c_{p_y,s}^\dagger(k) c_{p_x,s}(k) \cos(k_x-k_y) )$.

This is the simplified form of $H_0$.

## Convert interacting Hamiltonian in real space to momentum space (lattice version)  
**Prompt:**    
You will be instructed to convert the interacting Hamiltonian, the first term in $\hat{H}^{int}$, in the second-quantized form the basis in real space to the basis in momentum space.
To do that, you should apply the Fourier transformation to $c_{\alpha,s}^\dagger(R_i)$ in the real space to the $c_{\alpha,s}^\dagger(k)$ in the momentum space, which is defined as $c_{\alpha,s}^\dagger(k)= \frac{1}{\sqrt{N}} \sum_i c_{\alpha,s}^\dagger(R_i) e^{i k \cdot R_i}$, where $i$ is integrated over all sites in the entire real space, and $k$ is defined within the first Brillouin zone. You should follow the EXAMPLE below to apply the Fourier transformation. Note that interaction have no position dependence
You should recall that the first term in $\hat{H}^{int}$ is $U_d \sum_{R_i} n_{d,\uparrow}(R_i) n_{d,\downarrow}(R_i)$.
Express the first term in $\hat{H}^{int}$ in terms of $c_{\alpha,s}^\dagger(k)$. Simplify any summation index if possible.  

===  
EXAMPLE:  
Write an interacting Hamiltonian $\hat{H}^{int}$ in the second quantized form in the real space, $\hat{H}^{int}=\sum_{s,s'}\sum_{i,j} U(R_i-R_j) c_s^\dagger(R_i) c_{s'}^\dagger(R_j) c_{s'}(R_j) c_s(R_i)$, where $i,j$ are summed over the entire real space.  
Define the Fourier transformation $c_s^\dagger(k)=\frac{1}{\sqrt{N}} \sum_{i}c_s^\dagger(R_i) e^{i k \cdot R_i}$, where $i$ is integrated over the entire real space containing $N$ unit cells, $N$ is the number of unit cells.  
This leads to the inverse Fourier transformation $c_s^\dagger(R_i) = \frac{1}{\sqrt{N}} \sum_k c_s^\dagger(k) e^{-i k \cdot R_i}$, where $k$ is summed over the first Brillouin zone.  
Thus, substitute $c^\dagger(R_i)$ and $c(R_j)$ into $\hat{H}^{int}$, we get  
$$\hat{H}^{int} = \sum_{s,s'}\sum_{i,j} U(R_i-R_j) \frac{1}{\sqrt{N}} \sum_{k_1} c_s^\dagger(k_1) e^{-i k_1 \cdot R_i} \frac{1}{\sqrt{N}} \sum_{k_2} c_{s'}^\dagger(k_2) e^{-i k_2 \cdot R_j} \frac{1}{\sqrt{N}} \sum_{k_3} c_{s'}(k_3) e^{i k_3 \cdot R_j} \frac{1}{\sqrt{N}} \sum_{k_4} c_s(k_4) e^{i k_4 \cdot R_i}=\sum_{s,s'}\sum_{i,j}\frac{1}{N^2}\sum_{k_1,k_2,k_3,k_4}U(R_i-R_j)c_s^\dagger(k_1)c_{s'}^\dagger(k_2)c_{s'}(k_3)c_s(k_4)e^{-i(k_1-k_4)\cdot R_i} e^{-i(k_2-k_3)\cdot R_j}$$
Now make a replacement by defining $n= R_i-R_j$  
The Hamiltonian become  
$$\hat{H}^{int}=\frac{1}{N^2} \sum_{j,n} \sum_{s,s'} \sum_{k_1,k_2,k_3,k_4} U(n) c_s^\dagger(k_1)c_{s'}^\dagger(k_2)c_{s'}(k_3)c_s(k_4)e^{-i(k_1-k_4)\cdot n} e^{-i(k_1-k_4+k_2-k_3)\cdot r_j }$$
Because $\frac{1}{N}\sum_{i} e^{-i (k_1-k_4+k_2-k_3)\cdot R_i} = \sum\delta(k_1-k_4+k_2-k_3,G)$, where $\delta(..,..)$ is the Kronecker delta function, and $G$ is the all reciprocal lattices in the momentum space.  
Therefore,  
$$\hat{H}^{int}=\frac{1}{N}\sum_{s,s'}\sum_{k_1,k_2,k_3,k_4} \sum_{n} U(n) e^{-i (k_1-k_4) \cdot n} c_s^\dagger(k_1)c_{s'}^\dagger(k_2)c_{s'}(k_3)c_s(k_4) \sum_{G} \delta(k_1-k_4+k_2-k_3,G)$$
If we define interaction in the momentum space $U(k)=\sum_{n} U(n) e^{-i k \cdot n}$, where $n$ is the summation of all hopping pairs, the interacting Hamiltonian in the momentum space is  
$$\hat{H}^{int}=\frac{1}{N}\sum_{s,s'}\sum_{k_1,k_2,k_3,k_4}  U(k_1-k_4) c_s^\dagger(k_1)c_{s'}^\dagger(k_2)c_{s'}(k_3)c_s(k_4) \sum_{G} \delta(k_1-k_4+k_2-k_3,G)$$

**Completion:**    
Following the example, we first express the density operators $n_{d,\uparrow}(R_i)$ and $n_{d,\downarrow}(R_i)$ in terms of creation and annihilation operators in real space as $n_{d,\uparrow}(R_i) = c_{d,\uparrow}^\dagger(R_i) c_{d,\uparrow}(R_i)$ and $n_{d,\downarrow}(R_i) = c_{d,\downarrow}^\dagger(R_i) c_{d,\downarrow}(R_i)$.

Then, we apply the Fourier transformation to the creation and annihilation operators. The inverse Fourier transformation is given by $c_{\alpha,s}^\dagger(R_i) = \frac{1}{\sqrt{N}} \sum_k c_{\alpha,s}^\dagger(k) e^{-i k \cdot R_i}$ and $c_{\alpha,s}(R_i) = \frac{1}{\sqrt{N}} \sum_k c_{\alpha,s}(k) e^{i k \cdot R_i}$.

Substituting these into the first term in $\hat{H}^{int}$, we get:

$$U_d \sum_{R_i} n_{d,\uparrow}(R_i) n_{d,\downarrow}(R_i) = U_d \sum_{R_i} \frac{1}{N} \sum_{k_1,k_2} c_{d,\uparrow}^\dagger(k_1) e^{-i k_1 \cdot R_i} c_{d,\uparrow}(k_1) e^{i k_1 \cdot R_i} \frac{1}{N} \sum_{k_3,k_4} c_{d,\downarrow}^\dagger(k_3) e^{-i k_3 \cdot R_i} c_{d,\downarrow}(k_4) e^{i k_4 \cdot R_i}$$

Simplifying, we get:

$$U_d \sum_{R_i} \frac{1}{N^2} \sum_{k_1,k_2,k_3,k_4} c_{d,\uparrow}^\dagger(k_1) c_{d,\uparrow}(k_2) c_{d,\downarrow}^\dagger(k_3) c_{d,\downarrow}(k_4) e^{-i (k_1-k_2+k_3-k_4) \cdot R_i}$$

Using the property $\frac{1}{N}\sum_{i} e^{-i (k_1-k_2+k_3-k_4)\cdot R_i} = \sum\delta(k_1-k_2+k_3-k_4,G)$, where $\delta(..,..)$ is the Kronecker delta function, and $G$ is the all reciprocal lattices in the momentum space, we get:

$$U_d \sum_{k_1,k_2,k_3,k_4} c_{d,\uparrow}^\dagger(k_1) c_{d,\uparrow}(k_2) c_{d,\downarrow}^\dagger(k_3) c_{d,\downarrow}(k_4) \sum_{G} \delta(k_1-k_2+k_3-k_4,G)$$

This is the first term in $\hat{H}^{int}$ expressed in terms of $c_{\alpha,s}^\dagger(k)$ in the momentum space.

## Convert interacting Hamiltonian in real space to momentum space (lattice version)  
**Prompt:**    
You will be instructed to convert the interacting Hamiltonian, the second term in $\hat{H}^{int}$, in the second-quantized form the basis in real space to the basis in momentum space.
To do that, you should apply the Fourier transformation to $c_{\alpha,s}^\dagger(R_i)$ in the real space to the $c_{\alpha,s}^\dagger(k)$ in the momentum space, which is defined as $c_{\alpha,s}^\dagger(k)= \frac{1}{\sqrt{N}} \sum_i c_{\alpha,s}^\dagger(R_i) e^{i k \cdot R_i}$, where $i$ is integrated over all sites in the entire real space, and $k$ is defined within the first Brillouin zone. You should follow the EXAMPLE below to apply the Fourier transformation. Note that interaction have no position dependence
You should recall that the second term in $\hat{H}^{int}$ is $\frac{U_p}{2} \sum_{R_i} [n_{p_x,\uparrow}(R_i+\hat{x}/2) n_{p_x,\downarrow}(R_i+\hat{x}/2) + n_{p_y,\uparrow}(R_i+\hat{y}/2) n_{p_y,\downarrow}(R_i+\hat{y}/2)]$.
Express the second term in $\hat{H}^{int}$ in terms of $c_{\alpha,s}^\dagger(k)$. Simplify any summation index if possible.  

===  
EXAMPLE:  
Write an interacting Hamiltonian $\hat{H}^{int}$ in the second quantized form in the real space, $\hat{H}^{int}=\sum_{s,s'}\sum_{i,j} U(R_i-R_j) c_s^\dagger(R_i) c_{s'}^\dagger(R_j) c_{s'}(R_j) c_s(R_i)$, where $i,j$ are summed over the entire real space.  
Define the Fourier transformation $c_s^\dagger(k)=\frac{1}{\sqrt{N}} \sum_{i}c_s^\dagger(R_i) e^{i k \cdot R_i}$, where $i$ is integrated over the entire real space containing $N$ unit cells, $N$ is the number of unit cells.  
This leads to the inverse Fourier transformation $c_s^\dagger(R_i) = \frac{1}{\sqrt{N}} \sum_k c_s^\dagger(k) e^{-i k \cdot R_i}$, where $k$ is summed over the first Brillouin zone.  
Thus, substitute $c^\dagger(R_i)$ and $c(R_j)$ into $\hat{H}^{int}$, we get  
$$\hat{H}^{int} = \sum_{s,s'}\sum_{i,j} U(R_i-R_j) \frac{1}{\sqrt{N}} \sum_{k_1} c_s^\dagger(k_1) e^{-i k_1 \cdot R_i} \frac{1}{\sqrt{N}} \sum_{k_2} c_{s'}^\dagger(k_2) e^{-i k_2 \cdot R_j} \frac{1}{\sqrt{N}} \sum_{k_3} c_{s'}(k_3) e^{i k_3 \cdot R_j} \frac{1}{\sqrt{N}} \sum_{k_4} c_s(k_4) e^{i k_4 \cdot R_i}=\sum_{s,s'}\sum_{i,j}\frac{1}{N^2}\sum_{k_1,k_2,k_3,k_4}U(R_i-R_j)c_s^\dagger(k_1)c_{s'}^\dagger(k_2)c_{s'}(k_3)c_s(k_4)e^{-i(k_1-k_4)\cdot R_i} e^{-i(k_2-k_3)\cdot R_j}$$
Now make a replacement by defining $n= R_i-R_j$  
The Hamiltonian become  
$$\hat{H}^{int}=\frac{1}{N^2} \sum_{j,n} \sum_{s,s'} \sum_{k_1,k_2,k_3,k_4} U(n) c_s^\dagger(k_1)c_{s'}^\dagger(k_2)c_{s'}(k_3)c_s(k_4)e^{-i(k_1-k_4)\cdot n} e^{-i(k_1-k_4+k_2-k_3)\cdot r_j }$$
Because $\frac{1}{N}\sum_{i} e^{-i (k_1-k_4+k_2-k_3)\cdot R_i} = \sum\delta(k_1-k_4+k_2-k_3,G)$, where $\delta(..,..)$ is the Kronecker delta function, and $G$ is the all reciprocal lattices in the momentum space.  
Therefore,  
$$\hat{H}^{int}=\frac{1}{N}\sum_{s,s'}\sum_{k_1,k_2,k_3,k_4} \sum_{n} U(n) e^{-i (k_1-k_4) \cdot n} c_s^\dagger(k_1)c_{s'}^\dagger(k_2)c_{s'}(k_3)c_s(k_4) \sum_{G} \delta(k_1-k_4+k_2-k_3,G)$$
If we define interaction in the momentum space $U(k)=\sum_{n} U(n) e^{-i k \cdot n}$, where $n$ is the summation of all hopping pairs, the interacting Hamiltonian in the momentum space is  
$$\hat{H}^{int}=\frac{1}{N}\sum_{s,s'}\sum_{k_1,k_2,k_3,k_4}  U(k_1-k_4) c_s^\dagger(k_1)c_{s'}^\dagger(k_2)c_{s'}(k_3)c_s(k_4) \sum_{G} \delta(k_1-k_4+k_2-k_3,G)$$

**Completion:**    
The second term in $\hat{H}^{int}$ is given by $\frac{U_p}{2} \sum_{R_i} [n_{p_x,\uparrow}(R_i+\hat{x}/2) n_{p_x,\downarrow}(R_i+\hat{x}/2) + n_{p_y,\uparrow}(R_i+\hat{y}/2) n_{p_y,\downarrow}(R_i+\hat{y}/2)]$. 

We can express the density operators in terms of creation and annihilation operators in real space as $n_{\alpha,s}(R_i) = c_{\alpha,s}^\dagger(R_i) c_{\alpha,s}(R_i)$. 

Applying the Fourier transformation to the creation and annihilation operators, we get $c_{\alpha,s}^\dagger(k) = \frac{1}{\sqrt{N}} \sum_i c_{\alpha,s}^\dagger(R_i) e^{i k \cdot R_i}$ and $c_{\alpha,s}(k) = \frac{1}{\sqrt{N}} \sum_i c_{\alpha,s}(R_i) e^{-i k \cdot R_i}$.

Substituting these into the second term in $\hat{H}^{int}$, we get:

$\frac{U_p}{2N^2} \sum_{k_1,k_2,k_3,k_4} \sum_{R_i} [c_{p_x,\uparrow}^\dagger(k_1) c_{p_x,\uparrow}(k_2) e^{i (k_1-k_2) \cdot (R_i+\hat{x}/2)} c_{p_x,\downarrow}^\dagger(k_3) c_{p_x,\downarrow}(k_4) e^{i (k_3-k_4) \cdot (R_i+\hat{x}/2)} + c_{p_y,\uparrow}^\dagger(k_1) c_{p_y,\uparrow}(k_2) e^{i (k_1-k_2) \cdot (R_i+\hat{y}/2)} c_{p_y,\downarrow}^\dagger(k_3) c_{p_y,\downarrow}(k_4) e^{i (k_3-k_4) \cdot (R_i+\hat{y}/2)}]$.

We can simplify the summation over $R_i$ using the property $\frac{1}{N}\sum_{i} e^{i (k_1-k_2+k_3-k_4)\cdot R_i} = \sum\delta(k_1-k_2+k_3-k_4,G)$, where $\delta(..,..)$ is the Kronecker delta function, and $G$ is the all reciprocal lattices in the momentum space. 

Therefore, the second term in $\hat{H}^{int}$ in momentum space is:

$\frac{U_p}{2N} \sum_{k_1,k_2,k_3,k_4} [c_{p_x,\uparrow}^\dagger(k_1) c_{p_x,\uparrow}(k_2) c_{p_x,\downarrow}^\dagger(k_3) c_{p_x,\downarrow}(k_4) \sum_{G} \delta(k_1-k_2+k_3-k_4,G) + c_{p_y,\uparrow}^\dagger(k_1) c_{p_y,\uparrow}(k_2) c_{p_y,\downarrow}^\dagger(k_3) c_{p_y,\downarrow}(k_4) \sum_{G} \delta(k_1-k_2+k_3-k_4,G)]$.

## Mathematical simplify: Expand the product using Associative property  
**Prompt:**    
You will be instructed to expand the product in the third term with $V_{pd}$ in $\hat{H}^{int}$.  
You should recall that the third term in $\hat{H}^{int}$ is $V_{pd} \sum_{R_i, s, s^{\prime}} [n_{d,s}(R_i) (n_{p_x,s^{\prime}}(R_i+\hat{x}/2) + n_{p_x,s^{\prime}}(R_i-\hat{x}/2) + n_{p_y,s^{\prime}}(R_i+\hat{y}/2) + n_{p_y,s^{\prime}}(R_i-\hat{y}/2))]$.   
Express the third term with $V_{pd}$ in $\hat{H}^{int}$ in the expanded form.

**Completion:**    
The third term in $\hat{H}^{int}$ can be expanded as follows:

$$ V_{pd} \sum_{R_i, s, s^{\prime}} [n_{d,s}(R_i) n_{p_x,s^{\prime}}(R_i+\hat{x}/2) + n_{d,s}(R_i) n_{p_x,s^{\prime}}(R_i-\hat{x}/2) + n_{d,s}(R_i) n_{p_y,s^{\prime}}(R_i+\hat{y}/2) + n_{d,s}(R_i) n_{p_y,s^{\prime}}(R_i-\hat{y}/2)] $$

This can be further simplified by expressing the density operators in terms of creation and annihilation operators in real space, applying the Fourier transformation to the creation and annihilation operators, substituting these into the third term in $\hat{H}^{int}$, and simplifying. The final simplified form of the third term in $\hat{H}^{int}$ will be expressed in terms of $c_{\alpha,s}^\dagger(k)$ and $c_{\alpha,s}(k)$ in the momentum space.

## Convert interacting Hamiltonian in real space to momentum space (lattice version)  
**Prompt:**    
You will be instructed to convert the interacting Hamiltonian, the third term in $\hat{H}^{int}$, in the second-quantized form the basis in real space to the basis in momentum space.
To do that, you should apply the Fourier transformation to $c_{\alpha,s}^\dagger(R_i)$ in the real space to the $c_{\alpha,s}^\dagger(k)$ in the momentum space, which is defined as $c_{\alpha,s}^\dagger(k)= \frac{1}{\sqrt{N}} \sum_i c_{\alpha,s}^\dagger(R_i) e^{i k \cdot R_i}$, where $i$ is integrated over all sites in the entire real space, and $k$ is defined within the first Brillouin zone. You should follow the EXAMPLE below to apply the Fourier transformation. Note that interaction have no position dependence
You should recall that the third term in $\hat{H}^{int}$ is $$ V_{pd} \sum_{R_i, s, s^{\prime}} [n_{d,s}(R_i)n_{p_x,s^{\prime}}(R_i+\hat{x}/2) + n_{d,s}(R_i)n_{p_x,s^{\prime}}(R_i-\hat{x}/2) + n_{d,s}(R_i)n_{p_y,s^{\prime}}(R_i+\hat{y}/2) + n_{d,s}(R_i)n_{p_y,s^{\prime}}(R_i-\hat{y}/2)] $$.
Express the third term in $\hat{H}^{int}$ in terms of $c_{\alpha,s}^\dagger(k)$. Simplify any summation index if possible.  

===  
EXAMPLE:  
Write an interacting Hamiltonian $\hat{H}^{int}$ in the second quantized form in the real space, $\hat{H}^{int}=\sum_{s,s'}\sum_{i,j} U(R_i-R_j) c_s^\dagger(R_i) c_{s'}^\dagger(R_j) c_{s'}(R_j) c_s(R_i)$, where $i,j$ are summed over the entire real space.  
Define the Fourier transformation $c_s^\dagger(k)=\frac{1}{\sqrt{N}} \sum_{i}c_s^\dagger(R_i) e^{i k \cdot R_i}$, where $i$ is integrated over the entire real space containing $N$ unit cells, $N$ is the number of unit cells.  
This leads to the inverse Fourier transformation $c_s^\dagger(R_i) = \frac{1}{\sqrt{N}} \sum_k c_s^\dagger(k) e^{-i k \cdot R_i}$, where $k$ is summed over the first Brillouin zone.  
Thus, substitute $c^\dagger(R_i)$ and $c(R_j)$ into $\hat{H}^{int}$, we get  
$$\hat{H}^{int} = \sum_{s,s'}\sum_{i,j} U(R_i-R_j) \frac{1}{\sqrt{N}} \sum_{k_1} c_s^\dagger(k_1) e^{-i k_1 \cdot R_i} \frac{1}{\sqrt{N}} \sum_{k_2} c_{s'}^\dagger(k_2) e^{-i k_2 \cdot R_j} \frac{1}{\sqrt{N}} \sum_{k_3} c_{s'}(k_3) e^{i k_3 \cdot R_j} \frac{1}{\sqrt{N}} \sum_{k_4} c_s(k_4) e^{i k_4 \cdot R_i}=\sum_{s,s'}\sum_{i,j}\frac{1}{N^2}\sum_{k_1,k_2,k_3,k_4}U(R_i-R_j)c_s^\dagger(k_1)c_{s'}^\dagger(k_2)c_{s'}(k_3)c_s(k_4)e^{-i(k_1-k_4)\cdot R_i} e^{-i(k_2-k_3)\cdot R_j}$$
Now make a replacement by defining $n= R_i-R_j$  
The Hamiltonian become  
$$\hat{H}^{int}=\frac{1}{N^2} \sum_{j,n} \sum_{s,s'} \sum_{k_1,k_2,k_3,k_4} U(n) c_s^\dagger(k_1)c_{s'}^\dagger(k_2)c_{s'}(k_3)c_s(k_4)e^{-i(k_1-k_4)\cdot n} e^{-i(k_1-k_4+k_2-k_3)\cdot r_j }$$
Because $\frac{1}{N}\sum_{i} e^{-i (k_1-k_4+k_2-k_3)\cdot R_i} = \sum\delta(k_1-k_4+k_2-k_3,G)$, where $\delta(..,..)$ is the Kronecker delta function, and $G$ is the all reciprocal lattices in the momentum space.  
Therefore,  
$$\hat{H}^{int}=\frac{1}{N}\sum_{s,s'}\sum_{k_1,k_2,k_3,k_4} \sum_{n} U(n) e^{-i (k_1-k_4) \cdot n} c_s^\dagger(k_1)c_{s'}^\dagger(k_2)c_{s'}(k_3)c_s(k_4) \sum_{G} \delta(k_1-k_4+k_2-k_3,G)$$
If we define interaction in the momentum space $U(k)=\sum_{n} U(n) e^{-i k \cdot n}$, where $n$ is the summation of all hopping pairs, the interacting Hamiltonian in the momentum space is  
$$\hat{H}^{int}=\frac{1}{N}\sum_{s,s'}\sum_{k_1,k_2,k_3,k_4}  U(k_1-k_4) c_s^\dagger(k_1)c_{s'}^\dagger(k_2)c_{s'}(k_3)c_s(k_4) \sum_{G} \delta(k_1-k_4+k_2-k_3,G)$$

**Completion:**    
First, we express the density operators in terms of creation and annihilation operators in real space. The density operator $n_{\alpha,s}(R_i)$ can be written as $c_{\alpha,s}^\dagger(R_i)c_{\alpha,s}(R_i)$. 

Substituting this into the third term in $\hat{H}^{int}$, we get:

$V_{pd} \sum_{R_i, s, s^{\prime}} [c_{d,s}^\dagger(R_i)c_{d,s}(R_i)c_{p_x,s^{\prime}}^\dagger(R_i+\hat{x}/2)c_{p_x,s^{\prime}}(R_i+\hat{x}/2) + c_{d,s}^\dagger(R_i)c_{d,s}(R_i)c_{p_x,s^{\prime}}^\dagger(R_i-\hat{x}/2)c_{p_x,s^{\prime}}(R_i-\hat{x}/2) + c_{d,s}^\dagger(R_i)c_{d,s}(R_i)c_{p_y,s^{\prime}}^\dagger(R_i+\hat{y}/2)c_{p_y,s^{\prime}}(R_i+\hat{y}/2) + c_{d,s}^\dagger(R_i)c_{d,s}(R_i)c_{p_y,s^{\prime}}^\dagger(R_i-\hat{y}/2)c_{p_y,s^{\prime}}(R_i-\hat{y}/2)]$.

Next, we apply the Fourier transformation to the creation and annihilation operators. The Fourier transformation of $c_{\alpha,s}^\dagger(R_i)$ and $c_{\alpha,s}(R_i)$ are $c_{\alpha,s}^\dagger(k)$ and $c_{\alpha,s}(k)$, respectively. 

Substituting these into the third term in $\hat{H}^{int}$, we get:

$V_{pd} \sum_{k, k^{\prime}, s, s^{\prime}} [c_{d,s}^\dagger(k)c_{d,s}(k)c_{p_x,s^{\prime}}^\dagger(k^{\prime})c_{p_x,s^{\prime}}(k^{\prime}) e^{i(k-k^{\prime})\cdot \hat{x}/2} + c_{d,s}^\dagger(k)c_{d,s}(k)c_{p_x,s^{\prime}}^\dagger(k^{\prime})c_{p_x,s^{\prime}}(k^{\prime}) e^{-i(k-k^{\prime})\cdot \hat{x}/2} + c_{d,s}^\dagger(k)c_{d,s}(k)c_{p_y,s^{\prime}}^\dagger(k^{\prime})c_{p_y,s^{\prime}}(k^{\prime}) e^{i(k-k^{\prime})\cdot \hat{y}/2} + c_{d,s}^\dagger(k)c_{d,s}(k)c_{p_y,s^{\prime}}^\dagger(k^{\prime})c_{p_y,s^{\prime}}(k^{\prime}) e^{-i(k-k^{\prime})\cdot \hat{y}/2}]$.

Finally, we simplify the summation index. The sum over $k$ and $k^{\prime}$ can be simplified by using the Kronecker delta function $\delta(k-k^{\prime},G)$, where $G$ is the reciprocal lattice vector. 

The final simplified form of the third term in $\hat{H}^{int}$ is:

$V_{pd} \sum_{k, s, s^{\prime}} [c_{d,s}^\dagger(k)c_{d,s}(k)c_{p_x,s^{\prime}}^\dagger(k)c_{p_x,s^{\prime}}(k) (e^{iG\cdot \hat{x}/2} + e^{-iG\cdot \hat{x}/2}) + c_{d,s}^\dagger(k)c_{d,s}(k)c_{p_y,s^{\prime}}^\dagger(k)c_{p_y,s^{\prime}}(k) (e^{iG\cdot \hat{y}/2} + e^{-iG\cdot \hat{y}/2})]$.

This is the third term in $\hat{H}^{int}$ expressed in terms of $c_{\alpha,s}^\dagger(k)$ in the momentum space.

## Mathematical simplify: Combine using Associative property  
**Prompt:**    
You will be instructed to expand the product in the fourth term with $V_{pp}$ in $\hat{H}^{int}$.  
After expansion, you can introduce a sign variable $\sigma_x$ before $\hat{x}/2$ and $\sigma_y$ before $\hat{y}/2$, which take values of $\pm 1$ to combine the four term in to one term.
You should recall that the fourth term in $\hat{H}^{int}$ is $V_{pp} \sum_{R_i, s, s^{\prime}} [(n_{p_x,s}(R_i+\hat{x}/2) + n_{p_x,s}(R_i-\hat{x}/2)) (n_{p_y,s^{\prime}}(R_i+\hat{y}/2) + n_{p_y,s^{\prime}}(R_i-\hat{y}/2))]$.
Express the the fourth term with $V_{pp}$ in $\hat{H}^{int}$ in the expanded form.

**Completion:**    
The fourth term in $\hat{H}^{int}$ can be expanded as follows:

$V_{pp} \sum_{R_i, s, s^{\prime}} [n_{p_x,s}(R_i+\hat{x}/2)n_{p_y,s^{\prime}}(R_i+\hat{y}/2) + n_{p_x,s}(R_i+\hat{x}/2)n_{p_y,s^{\prime}}(R_i-\hat{y}/2) + n_{p_x,s}(R_i-\hat{x}/2)n_{p_y,s^{\prime}}(R_i+\hat{y}/2) + n_{p_x,s}(R_i-\hat{x}/2)n_{p_y,s^{\prime}}(R_i-\hat{y}/2)]$.

Now, we can introduce the sign variables $\sigma_x$ and $\sigma_y$ before $\hat{x}/2$ and $\hat{y}/2$ respectively, which take values of $\pm 1$. This allows us to combine the four terms into one term:

$V_{pp} \sum_{R_i, s, s^{\prime}, \sigma_x, \sigma_y} n_{p_x,s}(R_i+\sigma_x\hat{x}/2)n_{p_y,s^{\prime}}(R_i+\sigma_y\hat{y}/2)$.

Here, $\sigma_x$ and $\sigma_y$ are summed over $\pm 1$.

## Convert interacting Hamiltonian in real space to momentum space (lattice version)  
**Prompt:**    
You will be instructed to convert the interacting Hamiltonian, the fourth term in $\hat{H}^{int}$, in the second-quantized form the basis in real space to the basis in momentum space.
To do that, you should apply the Fourier transformation to $c_{\alpha,s}^\dagger(R_i)$ in the real space to the $c_{\alpha,s}^\dagger(k)$ in the momentum space, which is defined as $c_{\alpha,s}^\dagger(k)= \frac{1}{\sqrt{N}} \sum_i c_{\alpha,s}^\dagger(R_i) e^{i k \cdot R_i}$, where $i$ is integrated over all sites in the entire real space, and $k$ is defined within the first Brillouin zone. You should follow the EXAMPLE below to apply the Fourier transformation. Note that interaction have no position dependence
You should recall that the fourth term in $\hat{H}^{int}$ is $V_{pp} \sum_{R_i, s, s^{\prime}} \sum_{\sigma_x, \sigma_y} n_{p_x,s}(R_i+\sigma_x\hat{x}/2) n_{p_y,s^{\prime}}(R_i+\sigma_y\hat{y}/2)$, where $\sigma_x$ and $\sigma_y$ both take value of $\pm 1$.
Express the fourth term in $\hat{H}^{int}$ in terms of $c_{\alpha,s}^\dagger(k)$. Simplify any summation index if possible.  

===  
EXAMPLE:  
Write an interacting Hamiltonian $\hat{H}^{int}$ in the second quantized form in the real space, $\hat{H}^{int}=\sum_{s,s'}\sum_{i,j} U(R_i-R_j) c_s^\dagger(R_i) c_{s'}^\dagger(R_j) c_{s'}(R_j) c_s(R_i)$, where $i,j$ are summed over the entire real space.  
Define the Fourier transformation $c_s^\dagger(k)=\frac{1}{\sqrt{N}} \sum_{i}c_s^\dagger(R_i) e^{i k \cdot R_i}$, where $i$ is integrated over the entire real space containing $N$ unit cells, $N$ is the number of unit cells.  
This leads to the inverse Fourier transformation $c_s^\dagger(R_i) = \frac{1}{\sqrt{N}} \sum_k c_s^\dagger(k) e^{-i k \cdot R_i}$, where $k$ is summed over the first Brillouin zone.  
Thus, substitute $c^\dagger(R_i)$ and $c(R_j)$ into $\hat{H}^{int}$, we get  
$$\hat{H}^{int} = \sum_{s,s'}\sum_{i,j} U(R_i-R_j) \frac{1}{\sqrt{N}} \sum_{k_1} c_s^\dagger(k_1) e^{-i k_1 \cdot R_i} \frac{1}{\sqrt{N}} \sum_{k_2} c_{s'}^\dagger(k_2) e^{-i k_2 \cdot R_j} \frac{1}{\sqrt{N}} \sum_{k_3} c_{s'}(k_3) e^{i k_3 \cdot R_j} \frac{1}{\sqrt{N}} \sum_{k_4} c_s(k_4) e^{i k_4 \cdot R_i}=\sum_{s,s'}\sum_{i,j}\frac{1}{N^2}\sum_{k_1,k_2,k_3,k_4}U(R_i-R_j)c_s^\dagger(k_1)c_{s'}^\dagger(k_2)c_{s'}(k_3)c_s(k_4)e^{-i(k_1-k_4)\cdot R_i} e^{-i(k_2-k_3)\cdot R_j}$$
Now make a replacement by defining $n= R_i-R_j$  
The Hamiltonian become  
$$\hat{H}^{int}=\frac{1}{N^2} \sum_{j,n} \sum_{s,s'} \sum_{k_1,k_2,k_3,k_4} U(n) c_s^\dagger(k_1)c_{s'}^\dagger(k_2)c_{s'}(k_3)c_s(k_4)e^{-i(k_1-k_4)\cdot n} e^{-i(k_1-k_4+k_2-k_3)\cdot r_j }$$
Because $\frac{1}{N}\sum_{i} e^{-i (k_1-k_4+k_2-k_3)\cdot R_i} = \sum\delta(k_1-k_4+k_2-k_3,G)$, where $\delta(..,..)$ is the Kronecker delta function, and $G$ is the all reciprocal lattices in the momentum space.  
Therefore,  
$$\hat{H}^{int}=\frac{1}{N}\sum_{s,s'}\sum_{k_1,k_2,k_3,k_4} \sum_{n} U(n) e^{-i (k_1-k_4) \cdot n} c_s^\dagger(k_1)c_{s'}^\dagger(k_2)c_{s'}(k_3)c_s(k_4) \sum_{G} \delta(k_1-k_4+k_2-k_3,G)$$
If we define interaction in the momentum space $U(k)=\sum_{n} U(n) e^{-i k \cdot n}$, where $n$ is the summation of all hopping pairs, the interacting Hamiltonian in the momentum space is  
$$\hat{H}^{int}=\frac{1}{N}\sum_{s,s'}\sum_{k_1,k_2,k_3,k_4}  U(k_1-k_4) c_s^\dagger(k_1)c_{s'}^\dagger(k_2)c_{s'}(k_3)c_s(k_4) \sum_{G} \delta(k_1-k_4+k_2-k_3,G)$$

**Completion:**    
First, we express the density operators in terms of creation and annihilation operators in real space: $n_{p_x,s}(R_i+\sigma_x\hat{x}/2) = c_{p_x,s}^\dagger(R_i+\sigma_x\hat{x}/2) c_{p_x,s}(R_i+\sigma_x\hat{x}/2)$ and $n_{p_y,s^{\prime}}(R_i+\sigma_y\hat{y}/2) = c_{p_y,s^{\prime}}^\dagger(R_i+\sigma_y\hat{y}/2) c_{p_y,s^{\prime}}(R_i+\sigma_y\hat{y}/2)$.

Substitute these into the fourth term in $\hat{H}^{int}$, we get
$$V_{pp} \sum_{R_i, s, s^{\prime}} \sum_{\sigma_x, \sigma_y} c_{p_x,s}^\dagger(R_i+\sigma_x\hat{x}/2) c_{p_x,s}(R_i+\sigma_x\hat{x}/2) c_{p_y,s^{\prime}}^\dagger(R_i+\sigma_y\hat{y}/2) c_{p_y,s^{\prime}}(R_i+\sigma_y\hat{y}/2)$$

Next, we apply the Fourier transformation to the creation and annihilation operators. Using the inverse Fourier transformation, we get
$$c_{p_x,s}^\dagger(R_i+\sigma_x\hat{x}/2) = \frac{1}{\sqrt{N}} \sum_{k_x} c_{p_x,s}^\dagger(k_x) e^{-i k_x \cdot (R_i+\sigma_x\hat{x}/2)}$$
$$c_{p_x,s}(R_i+\sigma_x\hat{x}/2) = \frac{1}{\sqrt{N}} \sum_{k_x'} c_{p_x,s}(k_x') e^{i k_x' \cdot (R_i+\sigma_x\hat{x}/2)}$$
$$c_{p_y,s^{\prime}}^\dagger(R_i+\sigma_y\hat{y}/2) = \frac{1}{\sqrt{N}} \sum_{k_y} c_{p_y,s^{\prime}}^\dagger(k_y) e^{-i k_y \cdot (R_i+\sigma_y\hat{y}/2)}$$
$$c_{p_y,s^{\prime}}(R_i+\sigma_y\hat{y}/2) = \frac{1}{\sqrt{N}} \sum_{k_y'} c_{p_y,s^{\prime}}(k_y') e^{i k_y' \cdot (R_i+\sigma_y\hat{y}/2)}$$

Substitute these into the fourth term in $\hat{H}^{int}$, we get
$$V_{pp} \sum_{R_i, s, s^{\prime}} \sum_{\sigma_x, \sigma_y} \frac{1}{N^2} \sum_{k_x,k_x',k_y,k_y'} c_{p_x,s}^\dagger(k_x) c_{p_x,s}(k_x') c_{p_y,s^{\prime}}^\dagger(k_y) c_{p_y,s^{\prime}}(k_y') e^{-i k_x \cdot \sigma_x\hat{x}/2} e^{i k_x' \cdot \sigma_x\hat{x}/2} e^{-i k_y \cdot \sigma_y\hat{y}/2} e^{i k_y' \cdot \sigma_y\hat{y}/2}$$

Finally, we simplify the summation index using the Kronecker delta function, $\delta(k_x-k_x'+k_y-k_y',G)$, where $G$ is the all reciprocal lattices in the momentum space. The final simplified form of the fourth term in $\hat{H}^{int}$ is
$$\frac{V_{pp}}{N} \sum_{s, s^{\prime}} \sum_{k_x,k_x',k_y,k_y'} \sum_{G} \delta(k_x-k_x'+k_y-k_y',G) c_{p_x,s}^\dagger(k_x) c_{p_x,s}(k_x') c_{p_y,s^{\prime}}^\dagger(k_y) c_{p_y,s^{\prime}}(k_y') e^{-i (k_x-k_x') \cdot \sigma_x\hat{x}/2} e^{-i (k_y-k_y') \cdot \sigma_y\hat{y}/2}$$

## Wick's theorem  
**Prompt:**    
You will be instructed to perform a Hartree-Fock approximation to expand the interaction term, the first term in $\hat{H}^{int}$.  
You should use Wick's theorem to expand the four-fermion term in the first term in $\hat{H}^{int}$ into quadratic terms. You should strictly follow the EXAMPLE below to expand using Wick's theorem, select the correct EXAMPLE by noticing the order of four term product with and without ${}^\dagger$, and be extremely cautious about the order of the index and sign before each term.  
You should only preserve the normal terms. Here, the normal terms mean the product of a creation operator and an annihilation operator.  
You should recall that the first term is $\frac{U_d}{N}\sum_{k_1,k_2,k_3,k_4} c_{d,\uparrow}^\dagger(k_1)c_{d,\uparrow}(k_2)c_{d,\downarrow}^\dagger(k_3)c_{d,\downarrow}(k_4) \sum_{G} \delta(k_1-k_2+k_3-k_4,G)$.
Return the expanded interaction term after Hartree-Fock approximation as the first term in $\hat{H}^{int,HF}$.

Use the following conventions for the symbols (You should also obey the conventions in all my previous prompts if you encounter undefined symbols. If you find it is never defined or has conflicts in the conventions, you should stop and let me know):  
$\langle c_{\alpha,s}^\dagger(k_1) c_{\alpha^{\prime},s^{\prime}}(k_2) \rangle$ : expectation of $c_{\alpha,s}^\dagger(k_1) c_{\alpha^{\prime},s^{\prime}}(k_2)$ over the many-body ground states   
$\hat{H}^{int,HF}$ : Interaction term after Hartree-Fock approximation  

===  
EXAMPLE 1:  
For a four-fermion term $a_1^\dagger a_2^\dagger a_3 a_4$, using Wick's theorem and preserving only the normal terms. this is expanded as $a_1^\dagger a_2^\dagger a_3 a_4 = \langle a_1^\dagger a_4 \rangle a_2^\dagger a_3 + \langle a_2^\dagger a_3 \rangle a_1^\dagger a_4 - \langle a_1^\dagger a_4 \rangle \langle a_2^\dagger a_3\rangle - \langle a_1^\dagger a_3 \rangle a_2^\dagger a_4 - \langle a_2^\dagger a_4 \rangle a_1^\dagger a_3 + \langle a_1^\dagger a_3\rangle \langle a_2^\dagger a_4 \rangle$  
Be cautious about the order of the index and sign before each term here.

EXAMPLE 2:  
For a four-fermion term $a_1^\dagger a_2 a_3^\dagger a_4$, using Wick's theorem and preserving only the normal terms. this is expanded as $a_1^\dagger a_2 a_3^\dagger a_4 = \langle a_1^\dagger a_2 \rangle a_3^\dagger a_4 + \langle a_3^\dagger a_4 \rangle a_1^\dagger a_2 - \langle a_1^\dagger a_2 \rangle \langle a_3^\dagger a_4\rangle - \langle a_1^\dagger a_4 \rangle a_3^\dagger a_2 - \langle a_3^\dagger a_2 \rangle a_1^\dagger a_4 + \langle a_1^\dagger a_4\rangle \langle a_3^\dagger a_2 \rangle$  
Be cautious about the order of the index and sign before each term here.

**Completion:**    
The first term in $\hat{H}^{int}$ is $\frac{U_d}{N}\sum_{k_1,k_2,k_3,k_4} c_{d,\uparrow}^\dagger(k_1)c_{d,\uparrow}(k_2)c_{d,\downarrow}^\dagger(k_3)c_{d,\downarrow}(k_4) \sum_{G} \delta(k_1-k_2+k_3-k_4,G)$. 

This term is similar to the four-fermion term in EXAMPLE 2, where the order of the operators is creation-annihilation-creation-annihilation. Therefore, we can use the expansion in EXAMPLE 2 to perform the Hartree-Fock approximation.

Applying Wick's theorem and preserving only the normal terms, we get:

$\frac{U_d}{N}\sum_{k_1,k_2,k_3,k_4} c_{d,\uparrow}^\dagger(k_1)c_{d,\uparrow}(k_2)c_{d,\downarrow}^\dagger(k_3)c_{d,\downarrow}(k_4) \sum_{G} \delta(k_1-k_2+k_3-k_4,G)= \frac{U_d}{N}\sum_{k_1,k_2,k_3,k_4} \left[ \langle c_{d,\uparrow}^\dagger(k_1) c_{d,\uparrow}(k_2) \rangle c_{d,\downarrow}^\dagger(k_3)c_{d,\downarrow}(k_4) + \langle c_{d,\downarrow}^\dagger(k_3) c_{d,\downarrow}(k_4) \rangle c_{d,\uparrow}^\dagger(k_1)c_{d,\uparrow}(k_2) - \langle c_{d,\uparrow}^\dagger(k_1) c_{d,\uparrow}(k_2) \rangle \langle c_{d,\downarrow}^\dagger(k_3) c_{d,\downarrow}(k_4) \rangle - \langle c_{d,\uparrow}^\dagger(k_1) c_{d,\downarrow}(k_4) \rangle c_{d,\downarrow}^\dagger(k_3)c_{d,\uparrow}(k_2) - \langle c_{d,\downarrow}^\dagger(k_3) c_{d,\uparrow}(k_2) \rangle c_{d,\uparrow}^\dagger(k_1)c_{d,\downarrow}(k_4) + \langle c_{d,\uparrow}^\dagger(k_1) c_{d,\downarrow}(k_4) \rangle \langle c_{d,\downarrow}^\dagger(k_3) c_{d,\uparrow}(k_2) \rangle \right] \sum_{G} \delta(k_1-k_2+k_3-k_4,G)$

This is the expanded interaction term after Hartree-Fock approximation, which is the first term in $\hat{H}^{int,HF}$.

## Wick's theorem  
**Prompt:**    
You will be instructed to perform a Hartree-Fock approximation to expand the interaction term, the second term in $\hat{H}^{int}$.  
You should use Wick's theorem to expand the four-fermion term in the second term in $\hat{H}^{int}$ into quadratic terms. You should strictly follow the EXAMPLE below to expand using Wick's theorem, select the correct EXAMPLE by noticing the order of four term product with and without ${}^\dagger$, and be extremely cautious about the order of the index and sign before each term.  
You should only preserve the normal terms. Here, the normal terms mean the product of a creation operator and an annihilation operator.  
You should recall that the second term is $\frac{U_p}{2N} \sum_{k_1,k_2,k_3,k_4} \{c_{p_x,\uparrow}^\dagger(k_1) c_{p_x,\uparrow}(k_2) c_{p_x,\downarrow}^\dagger(k_3) c_{p_x,\downarrow}(k_4) \sum_{G} \delta(k_1-k_2+k_3-k_4,G) + c_{p_y,\uparrow}^\dagger(k_1) c_{p_y,\uparrow}(k_2) c_{p_y,\downarrow}^\dagger(k_3) c_{p_y,\downarrow}(k_4) \sum_{G} \delta(k_1-k_2+k_3-k_4,G) \}$.
Return the expanded interaction term after Hartree-Fock approximation as the second term in $\hat{H}^{int,HF}$.

Use the following conventions for the symbols (You should also obey the conventions in all my previous prompts if you encounter undefined symbols. If you find it is never defined or has conflicts in the conventions, you should stop and let me know):  
$\langle c_{\alpha,s}^\dagger(k_1) c_{\alpha^{\prime},s^{\prime}}(k_2) \rangle$ : expectation of $c_{\alpha,s}^\dagger(k_1) c_{\alpha^{\prime},s^{\prime}}(k_2)$ over the many-body ground states   
$\hat{H}^{int,HF}$ : Interaction term after Hartree-Fock approximation  

===  
EXAMPLE 1:  
For a four-fermion term $a_1^\dagger a_2^\dagger a_3 a_4$, using Wick's theorem and preserving only the normal terms. this is expanded as $a_1^\dagger a_2^\dagger a_3 a_4 = \langle a_1^\dagger a_4 \rangle a_2^\dagger a_3 + \langle a_2^\dagger a_3 \rangle a_1^\dagger a_4 - \langle a_1^\dagger a_4 \rangle \langle a_2^\dagger a_3\rangle - \langle a_1^\dagger a_3 \rangle a_2^\dagger a_4 - \langle a_2^\dagger a_4 \rangle a_1^\dagger a_3 + \langle a_1^\dagger a_3\rangle \langle a_2^\dagger a_4 \rangle$  
Be cautious about the order of the index and sign before each term here.

EXAMPLE 2:  
For a four-fermion term $a_1^\dagger a_2 a_3^\dagger a_4$, using Wick's theorem and preserving only the normal terms. this is expanded as $a_1^\dagger a_2 a_3^\dagger a_4 = \langle a_1^\dagger a_2 \rangle a_3^\dagger a_4 + \langle a_3^\dagger a_4 \rangle a_1^\dagger a_2 - \langle a_1^\dagger a_2 \rangle \langle a_3^\dagger a_4\rangle - \langle a_1^\dagger a_4 \rangle a_3^\dagger a_2 - \langle a_3^\dagger a_2 \rangle a_1^\dagger a_4 + \langle a_1^\dagger a_4\rangle \langle a_3^\dagger a_2 \rangle$  
Be cautious about the order of the index and sign before each term here.

**Completion:**    
The second term in $\hat{H}^{int}$ can be expanded using Wick's theorem, following the pattern in EXAMPLE 1, as it has the same order of operators with and without ${}^\dagger$. 

The expansion of the $p_x$ part is:

$c_{p_x,\uparrow}^\dagger(k_1) c_{p_x,\uparrow}(k_2) c_{p_x,\downarrow}^\dagger(k_3) c_{p_x,\downarrow}(k_4) = \langle c_{p_x,\uparrow}^\dagger(k_1) c_{p_x,\downarrow}(k_4) \rangle c_{p_x,\uparrow}(k_2) c_{p_x,\downarrow}^\dagger(k_3) + \langle c_{p_x,\uparrow}^\dagger(k_2) c_{p_x,\downarrow}(k_3) \rangle c_{p_x,\uparrow}^\dagger(k_1) c_{p_x,\downarrow}(k_4) - \langle c_{p_x,\uparrow}^\dagger(k_1) c_{p_x,\downarrow}(k_4) \rangle \langle c_{p_x,\uparrow}^\dagger(k_2) c_{p_x,\downarrow}(k_3)\rangle - \langle c_{p_x,\uparrow}^\dagger(k_1) c_{p_x,\downarrow}(k_3) \rangle c_{p_x,\uparrow}^\dagger(k_2) c_{p_x,\downarrow}(k_4) - \langle c_{p_x,\uparrow}^\dagger(k_2) c_{p_x,\downarrow}(k_4) \rangle c_{p_x,\uparrow}^\dagger(k_1) c_{p_x,\downarrow}(k_3) + \langle c_{p_x,\uparrow}^\dagger(k_1) c_{p_x,\downarrow}(k_3)\rangle \langle c_{p_x,\uparrow}^\dagger(k_2) c_{p_x,\downarrow}(k_4) \rangle$

The expansion of the $p_y$ part is similar:

$c_{p_y,\uparrow}^\dagger(k_1) c_{p_y,\uparrow}(k_2) c_{p_y,\downarrow}^\dagger(k_3) c_{p_y,\downarrow}(k_4) = \langle c_{p_y,\uparrow}^\dagger(k_1) c_{p_y,\downarrow}(k_4) \rangle c_{p_y,\uparrow}(k_2) c_{p_y,\downarrow}^\dagger(k_3) + \langle c_{p_y,\uparrow}^\dagger(k_2) c_{p_y,\downarrow}(k_3) \rangle c_{p_y,\uparrow}^\dagger(k_1) c_{p_y,\downarrow}(k_4) - \langle c_{p_y,\uparrow}^\dagger(k_1) c_{p_y,\downarrow}(k_4) \rangle \langle c_{p_y,\uparrow}^\dagger(k_2) c_{p_y,\downarrow}(k_3)\rangle - \langle c_{p_y,\uparrow}^\dagger(k_1) c_{p_y,\downarrow}(k_3) \rangle c_{p_y,\uparrow}^\dagger(k_2) c_{p_y,\downarrow}(k_4) - \langle c_{p_y,\uparrow}^\dagger(k_2) c_{p_y,\downarrow}(k_4) \rangle c_{p_y,\uparrow}^\dagger(k_1) c_{p_y,\downarrow}(k_3) + \langle c_{p_y,\uparrow}^\dagger(k_1) c_{p_y,\downarrow}(k_3)\rangle \langle c_{p_y,\uparrow}^\dagger(k_2) c_{p_y,\downarrow}(k_4) \rangle$

The second term in $\hat{H}^{int,HF}$ is then:

$\frac{U_p}{2N} \sum_{k_1,k_2,k_3,k_4} \sum_{G} \delta(k_1-k_2+k_3-k_4,G) \{ \text{[expanded $p_x$ part]} + \text{[expanded $p_y$ part]} \}$

where [expanded $p_x$ part] and [expanded $p_y$ part] are the expanded expressions above.

## Wick's theorem  
**Prompt:**    
You will be instructed to perform a Hartree-Fock approximation to expand the interaction term, the third term in $\hat{H}^{int}$.  
You should use Wick's theorem to expand the four-fermion term in the third term in $\hat{H}^{int}$ into quadratic terms. You should strictly follow the EXAMPLE below to expand using Wick's theorem, select the correct EXAMPLE by noticing the order of four term product with and without ${}^\dagger$, and be extremely cautious about the order of the index and sign before each term.  
You should only preserve the normal terms. Here, the normal terms mean the product of a creation operator and an annihilation operator.  
You should recall that the third term is $2V_{pd} \sum_{s, s^{\prime}} \frac{1}{N} \sum_{k_1,k_2,k_3,k_4} \Big[ c_{d,s}^\dagger(k_1)c_{d,s}(k_2)c_{p_x,s^{\prime}}^\dagger(k_3)c_{p_x,s^{\prime}}(k_4)\cos\left(\frac{k_3-k_4}{2}\cdot \hat{x}\right)+ c_{d,s}^\dagger(k_1)c_{d,s}(k_2)c_{p_y,s^{\prime}}^\dagger(k_3)c_{p_y,s^{\prime}}(k_4)\cos\left(\frac{k_3-k_4}{2}\cdot \hat{y}\right) \Big] \sum_{G} \delta(k_1-k_2+k_3-k_4,G)$.
Return the expanded interaction term after Hartree-Fock approximation as the third term in $\hat{H}^{int,HF}$.

Use the following conventions for the symbols (You should also obey the conventions in all my previous prompts if you encounter undefined symbols. If you find it is never defined or has conflicts in the conventions, you should stop and let me know):  
$\langle c_{\alpha,s}^\dagger(k_1) c_{\alpha^{\prime},s^{\prime}}(k_2) \rangle$ : expectation of $c_{\alpha,s}^\dagger(k_1) c_{\alpha^{\prime},s^{\prime}}(k_2)$ over the many-body ground states   
$\hat{H}^{int,HF}$ : Interaction term after Hartree-Fock approximation  

===  
EXAMPLE 1:  
For a four-fermion term $a_1^\dagger a_2^\dagger a_3 a_4$, using Wick's theorem and preserving only the normal terms. this is expanded as $a_1^\dagger a_2^\dagger a_3 a_4 = \langle a_1^\dagger a_4 \rangle a_2^\dagger a_3 + \langle a_2^\dagger a_3 \rangle a_1^\dagger a_4 - \langle a_1^\dagger a_4 \rangle \langle a_2^\dagger a_3\rangle - \langle a_1^\dagger a_3 \rangle a_2^\dagger a_4 - \langle a_2^\dagger a_4 \rangle a_1^\dagger a_3 + \langle a_1^\dagger a_3\rangle \langle a_2^\dagger a_4 \rangle$  
Be cautious about the order of the index and sign before each term here.

EXAMPLE 2:  
For a four-fermion term $a_1^\dagger a_2 a_3^\dagger a_4$, using Wick's theorem and preserving only the normal terms. this is expanded as $a_1^\dagger a_2 a_3^\dagger a_4 = \langle a_1^\dagger a_2 \rangle a_3^\dagger a_4 + \langle a_3^\dagger a_4 \rangle a_1^\dagger a_2 - \langle a_1^\dagger a_2 \rangle \langle a_3^\dagger a_4\rangle - \langle a_1^\dagger a_4 \rangle a_3^\dagger a_2 - \langle a_3^\dagger a_2 \rangle a_1^\dagger a_4 + \langle a_1^\dagger a_4\rangle \langle a_3^\dagger a_2 \rangle$  
Be cautious about the order of the index and sign before each term here.

**Completion:**    
The third term in $\hat{H}^{int}$ can be expanded using Wick's theorem, preserving only the normal terms. The four-fermion term in the third term in $\hat{H}^{int}$ is of the form $c_{d,s}^\dagger(k_1)c_{d,s}(k_2)c_{p_x,s^{\prime}}^\dagger(k_3)c_{p_x,s^{\prime}}(k_4)$ and $c_{d,s}^\dagger(k_1)c_{d,s}(k_2)c_{p_y,s^{\prime}}^\dagger(k_3)c_{p_y,s^{\prime}}(k_4)$, which is similar to the form in EXAMPLE 2. 

Following EXAMPLE 2, the expanded terms for $p_x$ and $p_y$ parts are:

Expanded $p_x$ part:
$2V_{pd} \sum_{s, s^{\prime}} \frac{1}{N} \sum_{k_1,k_2,k_3,k_4} \Big[ \langle c_{d,s}^\dagger(k_1) c_{d,s}(k_2) \rangle c_{p_x,s^{\prime}}^\dagger(k_3)c_{p_x,s^{\prime}}(k_4) + \langle c_{p_x,s^{\prime}}^\dagger(k_3) c_{p_x,s^{\prime}}(k_4) \rangle c_{d,s}^\dagger(k_1)c_{d,s}(k_2) - \langle c_{d,s}^\dagger(k_1) c_{d,s}(k_2) \rangle \langle c_{p_x,s^{\prime}}^\dagger(k_3) c_{p_x,s^{\prime}}(k_4) \rangle - \langle c_{d,s}^\dagger(k_1) c_{p_x,s^{\prime}}(k_4) \rangle c_{p_x,s^{\prime}}^\dagger(k_3)c_{d,s}(k_2) - \langle c_{p_x,s^{\prime}}^\dagger(k_3) c_{d,s}(k_2) \rangle c_{d,s}^\dagger(k_1)c_{p_x,s^{\prime}}(k_4) + \langle c_{d,s}^\dagger(k_1) c_{p_x,s^{\prime}}(k_4) \rangle \langle c_{p_x,s^{\prime}}^\dagger(k_3) c_{d,s}(k_2) \rangle \Big] \cos\left(\frac{k_3-k_4}{2}\cdot \hat{x}\right) \sum_{G} \delta(k_1-k_2+k_3-k_4,G)$

Expanded $p_y$ part:
$2V_{pd} \sum_{s, s^{\prime}} \frac{1}{N} \sum_{k_1,k_2,k_3,k_4} \Big[ \langle c_{d,s}^\dagger(k_1) c_{d,s}(k_2) \rangle c_{p_y,s^{\prime}}^\dagger(k_3)c_{p_y,s^{\prime}}(k_4) + \langle c_{p_y,s^{\prime}}^\dagger(k_3) c_{p_y,s^{\prime}}(k_4) \rangle c_{d,s}^\dagger(k_1)c_{d,s}(k_2) - \langle c_{d,s}^\dagger(k_1) c_{d,s}(k_2) \rangle \langle c_{p_y,s^{\prime}}^\dagger(k_3) c_{p_y,s^{\prime}}(k_4) \rangle - \langle c_{d,s}^\dagger(k_1) c_{p_y,s^{\prime}}(k_4) \rangle c_{p_y,s^{\prime}}^\dagger(k_3)c_{d,s}(k_2) - \langle c_{p_y,s^{\prime}}^\dagger(k_3) c_{d,s}(k_2) \rangle c_{d,s}^\dagger(k_1)c_{p_y,s^{\prime}}(k_4) + \langle c_{d,s}^\dagger(k_1) c_{p_y,s^{\prime}}(k_4) \rangle \langle c_{p_y,s^{\prime}}^\dagger(k_3) c_{d,s}(k_2) \rangle \Big] \cos\left(\frac{k_3-k_4}{2}\cdot \hat{y}\right) \sum_{G} \delta(k_1-k_2+k_3-k_4,G)$

Therefore, the third term in $\hat{H}^{int,HF}$ is given by the sum of the expanded $p_x$ part and the expanded $p_y$ part.

## Wick's theorem  
**Prompt:**    
You will be instructed to perform a Hartree-Fock approximation to expand the interaction term, the fourth term in $\hat{H}^{int}$.  
You should use Wick's theorem to expand the four-fermion term in the fourth term in $\hat{H}^{int}$ into quadratic terms. You should strictly follow the EXAMPLE below to expand using Wick's theorem, select the correct EXAMPLE by noticing the order of four term product with and without ${}^\dagger$, and be extremely cautious about the order of the index and sign before each term.  
You should only preserve the normal terms. Here, the normal terms mean the product of a creation operator and an annihilation operator.  
You should recall that the fourth term is $\frac{V_{pp}}{N} \sum_{s, s^{\prime}} \sum_{\sigma_x, \sigma_y} \sum_{k_1, k_2, k_3, k_4} \sum_{G} \delta(k_2 - k_1 + k_4 - k_3, G) e^{-i (k_1 - k_2) \cdot \sigma_x\hat{x}/2 - i (k_3 - k_4) \cdot \sigma_y\hat{y}/2} c_{p_x,s}^\dagger(k_1) c_{p_x,s}(k_2) c_{p_y,s^{\prime}}^\dagger(k_3) c_{p_y,s^{\prime}}(k_4)$.
Return the expanded interaction term after Hartree-Fock approximation as the fourth term in $\hat{H}^{int,HF}$.

Use the following conventions for the symbols (You should also obey the conventions in all my previous prompts if you encounter undefined symbols. If you find it is never defined or has conflicts in the conventions, you should stop and let me know):  
$\langle c_{\alpha,s}^\dagger(k_1) c_{\alpha^{\prime},s^{\prime}}(k_2) \rangle$ : expectation of $c_{\alpha,s}^\dagger(k_1) c_{\alpha^{\prime},s^{\prime}}(k_2)$ over the many-body ground states   
$\hat{H}^{int,HF}$ : Interaction term after Hartree-Fock approximation  

===  
EXAMPLE 1:  
For a four-fermion term $a_1^\dagger a_2^\dagger a_3 a_4$, using Wick's theorem and preserving only the normal terms. this is expanded as $a_1^\dagger a_2^\dagger a_3 a_4 = \langle a_1^\dagger a_4 \rangle a_2^\dagger a_3 + \langle a_2^\dagger a_3 \rangle a_1^\dagger a_4 - \langle a_1^\dagger a_4 \rangle \langle a_2^\dagger a_3\rangle - \langle a_1^\dagger a_3 \rangle a_2^\dagger a_4 - \langle a_2^\dagger a_4 \rangle a_1^\dagger a_3 + \langle a_1^\dagger a_3\rangle \langle a_2^\dagger a_4 \rangle$  
Be cautious about the order of the index and sign before each term here.

EXAMPLE 2:  
For a four-fermion term $a_1^\dagger a_2 a_3^\dagger a_4$, using Wick's theorem and preserving only the normal terms. this is expanded as $a_1^\dagger a_2 a_3^\dagger a_4 = \langle a_1^\dagger a_2 \rangle a_3^\dagger a_4 + \langle a_3^\dagger a_4 \rangle a_1^\dagger a_2 - \langle a_1^\dagger a_2 \rangle \langle a_3^\dagger a_4\rangle - \langle a_1^\dagger a_4 \rangle a_3^\dagger a_2 - \langle a_3^\dagger a_2 \rangle a_1^\dagger a_4 + \langle a_1^\dagger a_4\rangle \langle a_3^\dagger a_2 \rangle$  
Be cautious about the order of the index and sign before each term here.

**Completion:**    
The fourth term in $\hat{H}^{int}$ is of the form $c_{p_x,s}^\dagger(k_1) c_{p_x,s}(k_2) c_{p_y,s^{\prime}}^\dagger(k_3) c_{p_y,s^{\prime}}(k_4)$, which is similar to the form in EXAMPLE 2. 

Following EXAMPLE 2, we can expand the fourth term in $\hat{H}^{int}$ using Wick's theorem and preserving only the normal terms. The expanded term is:

$\frac{V_{pp}}{N} \sum_{s, s^{\prime}} \sum_{\sigma_x, \sigma_y} \sum_{k_1, k_2, k_3, k_4} \sum_{G} \delta(k_2 - k_1 + k_4 - k_3, G) e^{-i (k_1 - k_2) \cdot \sigma_x\hat{x}/2 - i (k_3 - k_4) \cdot \sigma_y\hat{y}/2} \Big[ \langle c_{p_x,s}^\dagger(k_1) c_{p_x,s}(k_2) \rangle c_{p_y,s^{\prime}}^\dagger(k_3) c_{p_y,s^{\prime}}(k_4) + \langle c_{p_y,s^{\prime}}^\dagger(k_3) c_{p_y,s^{\prime}}(k_4) \rangle c_{p_x,s}^\dagger(k_1) c_{p_x,s}(k_2) - \langle c_{p_x,s}^\dagger(k_1) c_{p_x,s}(k_2) \rangle \langle c_{p_y,s^{\prime}}^\dagger(k_3) c_{p_y,s^{\prime}}(k_4) \rangle - \langle c_{p_x,s}^\dagger(k_1) c_{p_y,s^{\prime}}(k_4) \rangle c_{p_y,s^{\prime}}^\dagger(k_3) c_{p_x,s}(k_2) - \langle c_{p_y,s^{\prime}}^\dagger(k_3) c_{p_x,s}(k_2) \rangle c_{p_x,s}^\dagger(k_1) c_{p_y,s^{\prime}}(k_4) + \langle c_{p_x,s}^\dagger(k_1) c_{p_y,s^{\prime}}(k_4) \rangle \langle c_{p_y,s^{\prime}}^\dagger(k_3) c_{p_x,s}(k_2) \rangle \Big]$

This is the expanded interaction term after Hartree-Fock approximation, which is the fourth term in $\hat{H}^{int,HF}$.

## Extract quadratic term  
**Prompt:**    
You will be instructed to extract the quadratic terms in the the first term in $\hat{H}^{int,HF}$.  
The quadratic terms mean terms that are proportional to $c^\dagger c$, which excludes terms that are solely expectations or products of expectations.  
You should only preserve the quadratic terms in the first term in $\hat{H}^{int,HF}$, denoted as the first term in $\hat{H}^{int,HF,2}$.  
You should recall that the first term in $\hat{H}^{int,HF}$ is $\frac{U_d}{N}\sum_{k_1,k_2,k_3,k_4} \sum_{G} \delta(k_1-k_2+k_3-k_4,G) \big[ \langle c_{d,\uparrow}^\dagger(k_1) c_{d,\uparrow}(k_2) \rangle c_{d,\downarrow}^\dagger(k_3) c_{d,\downarrow}(k_4)+ \langle c_{d,\downarrow}^\dagger(k_3) c_{d,\downarrow}(k_4) \rangle c_{d,\uparrow}^\dagger(k_1) c_{d,\uparrow}(k_2)- \langle c_{d,\uparrow}^\dagger(k_1) c_{d,\uparrow}(k_2) \rangle \langle c_{d,\downarrow}^\dagger(k_3) c_{d,\downarrow}(k_4) \rangle- \langle c_{d,\uparrow}^\dagger(k_1) c_{d,\downarrow}(k_4) \rangle c_{d,\downarrow}^\dagger(k_3) c_{d,\uparrow}(k_2)- \langle c_{d,\downarrow}^\dagger(k_3) c_{d,\uparrow}(k_2) \rangle c_{d,\uparrow}^\dagger(k_1) c_{d,\downarrow}(k_4)+ \langle c_{d,\uparrow}^\dagger(k_1) c_{d,\downarrow}(k_4) \rangle \langle c_{d,\downarrow}^\dagger(k_3) c_{d,\uparrow}(k_2) \rangle \big]$.  
Return the first term in $\hat{H}^{int,HF,2}$.  

Use the following conventions for the symbols (You should also obey the conventions in all my previous prompts if you encounter undefined symbols. If you find it is never defined or has conflicts in the conventions, you should stop and let me know):  
$\hat{H}^{int,HF,2}$ : the quadratic terms in $\hat{H}^{int,HF}$

**Completion:**    
The quadratic terms in the first term of $\hat{H}^{int,HF}$ are those that are proportional to $c^\dagger c$. These terms are:

1. $\langle c_{d,\uparrow}^\dagger(k_1) c_{d,\uparrow}(k_2) \rangle c_{d,\downarrow}^\dagger(k_3) c_{d,\downarrow}(k_4)$
2. $\langle c_{d,\downarrow}^\dagger(k_3) c_{d,\downarrow}(k_4) \rangle c_{d,\uparrow}^\dagger(k_1) c_{d,\uparrow}(k_2)$
3. $-\langle c_{d,\uparrow}^\dagger(k_1) c_{d,\downarrow}(k_4) \rangle c_{d,\downarrow}^\dagger(k_3) c_{d,\uparrow}(k_2)$
4. $-\langle c_{d,\downarrow}^\dagger(k_3) c_{d,\uparrow}(k_2) \rangle c_{d,\uparrow}^\dagger(k_1) c_{d,\downarrow}(k_4)$

Therefore, the first term in $\hat{H}^{int,HF,2}$ is:

$\frac{U_d}{N}\sum_{k_1,k_2,k_3,k_4} \sum_{G} \delta(k_1-k_2+k_3-k_4,G) \big[ \langle c_{d,\uparrow}^\dagger(k_1) c_{d,\uparrow}(k_2) \rangle c_{d,\downarrow}^\dagger(k_3) c_{d,\downarrow}(k_4)+ \langle c_{d,\downarrow}^\dagger(k_3) c_{d,\downarrow}(k_4) \rangle c_{d,\uparrow}^\dagger(k_1) c_{d,\uparrow}(k_2)- \langle c_{d,\uparrow}^\dagger(k_1) c_{d,\downarrow}(k_4) \rangle c_{d,\downarrow}^\dagger(k_3) c_{d,\uparrow}(k_2)- \langle c_{d,\downarrow}^\dagger(k_3) c_{d,\uparrow}(k_2) \rangle c_{d,\uparrow}^\dagger(k_1) c_{d,\downarrow}(k_4) \big]$.

## Extract quadratic term  
**Prompt:**    
You will be instructed to extract the quadratic terms in the the second term in $\hat{H}^{int,HF}$.  
The quadratic terms mean terms that are proportional to $c^\dagger c$, which excludes terms that are solely expectations or products of expectations.  
You should only preserve the quadratic terms in the second term in $\hat{H}^{int,HF}$, denoted as the second term in $\hat{H}^{int,HF,2}$.  
You should recall that the second term in $\hat{H}^{int,HF}$ is $\frac{U_p}{2N} \sum_{k_1,k_2,k_3,k_4} \sum_{G} \delta(k_1-k_2+k_3-k_4,G) \Big\{ \langle c_{p_x,\uparrow}^\dagger(k_1) c_{p_x,\uparrow}(k_2) \rangle c_{p_x,\downarrow}^\dagger(k_3) c_{p_x,\downarrow}(k_4)+ \langle c_{p_x,\downarrow}^\dagger(k_3) c_{p_x,\downarrow}(k_4) \rangle c_{p_x,\uparrow}^\dagger(k_1) c_{p_x,\uparrow}(k_2)- \langle c_{p_x,\uparrow}^\dagger(k_1) c_{p_x,\uparrow}(k_2) \rangle \langle c_{p_x,\downarrow}^\dagger(k_3) c_{p_x,\downarrow}(k_4) \rangle- \langle c_{p_x,\uparrow}^\dagger(k_1) c_{p_x,\downarrow}(k_4) \rangle c_{p_x,\downarrow}^\dagger(k_3) c_{p_x,\uparrow}(k_2)- \langle c_{p_x,\downarrow}^\dagger(k_3) c_{p_x,\uparrow}(k_2) \rangle c_{p_x,\uparrow}^\dagger(k_1) c_{p_x,\downarrow}(k_4)+ \langle c_{p_x,\uparrow}^\dagger(k_1) c_{p_x,\downarrow}(k_4) \rangle \langle c_{p_x,\downarrow}^\dagger(k_3) c_{p_x,\uparrow}(k_2) \rangle + \langle c_{p_y,\uparrow}^\dagger(k_1) c_{p_y,\uparrow}(k_2) \rangle c_{p_y,\downarrow}^\dagger(k_3) c_{p_y,\downarrow}(k_4)+ \langle c_{p_y,\downarrow}^\dagger(k_3) c_{p_y,\downarrow}(k_4) \rangle c_{p_y,\uparrow}^\dagger(k_1) c_{p_y,\uparrow}(k_2)- \langle c_{p_y,\uparrow}^\dagger(k_1) c_{p_y,\uparrow}(k_2) \rangle \langle c_{p_y,\downarrow}^\dagger(k_3) c_{p_y,\downarrow}(k_4) \rangle- \langle c_{p_y,\uparrow}^\dagger(k_1) c_{p_y,\downarrow}(k_4) \rangle c_{p_y,\downarrow}^\dagger(k_3) c_{p_y,\uparrow}(k_2)- \langle c_{p_y,\downarrow}^\dagger(k_3) c_{p_y,\uparrow}(k_2) \rangle c_{p_y,\uparrow}^\dagger(k_1) c_{p_y,\downarrow}(k_4)+ \langle c_{p_y,\uparrow}^\dagger(k_1) c_{p_y,\downarrow}(k_4) \rangle \langle c_{p_y,\downarrow}^\dagger(k_3) c_{p_y,\uparrow}(k_2) \rangle \Big\}$.  
Return the second term in $\hat{H}^{int,HF,2}$.  

Use the following conventions for the symbols (You should also obey the conventions in all my previous prompts if you encounter undefined symbols. If you find it is never defined or has conflicts in the conventions, you should stop and let me know):  
$\hat{H}^{int,HF,2}$ : the quadratic terms in $\hat{H}^{int,HF}$

**Completion:**    
The quadratic terms in the second term of $\hat{H}^{int,HF}$ are those that are proportional to $c^\dagger c$. These terms are:

1. $\langle c_{p_x,\uparrow}^\dagger(k_1) c_{p_x,\uparrow}(k_2) \rangle c_{p_x,\downarrow}^\dagger(k_3) c_{p_x,\downarrow}(k_4)$
2. $\langle c_{p_x,\downarrow}^\dagger(k_3) c_{p_x,\downarrow}(k_4) \rangle c_{p_x,\uparrow}^\dagger(k_1) c_{p_x,\uparrow}(k_2)$
3. $-\langle c_{p_x,\uparrow}^\dagger(k_1) c_{p_x,\downarrow}(k_4) \rangle c_{p_x,\downarrow}^\dagger(k_3) c_{p_x,\uparrow}(k_2)$
4. $-\langle c_{p_x,\downarrow}^\dagger(k_3) c_{p_x,\uparrow}(k_2) \rangle c_{p_x,\uparrow}^\dagger(k_1) c_{p_x,\downarrow}(k_4)$
5. $\langle c_{p_y,\uparrow}^\dagger(k_1) c_{p_y,\uparrow}(k_2) \rangle c_{p_y,\downarrow}^\dagger(k_3) c_{p_y,\downarrow}(k_4)$
6. $\langle c_{p_y,\downarrow}^\dagger(k_3) c_{p_y,\downarrow}(k_4) \rangle c_{p_y,\uparrow}^\dagger(k_1) c_{p_y,\uparrow}(k_2)$
7. $-\langle c_{p_y,\uparrow}^\dagger(k_1) c_{p_y,\downarrow}(k_4) \rangle c_{p_y,\downarrow}^\dagger(k_3) c_{p_y,\uparrow}(k_2)$
8. $-\langle c_{p_y,\downarrow}^\dagger(k_3) c_{p_y,\uparrow}(k_2) \rangle c_{p_y,\uparrow}^\dagger(k_1) c_{p_y,\downarrow}(k_4)$

Therefore, the second term in $\hat{H}^{int,HF,2}$ is:

$\frac{U_p}{2N} \sum_{k_1,k_2,k_3,k_4} \sum_{G} \delta(k_1-k_2+k_3-k_4,G) \Big\{ \langle c_{p_x,\uparrow}^\dagger(k_1) c_{p_x,\uparrow}(k_2) \rangle c_{p_x,\downarrow}^\dagger(k_3) c_{p_x,\downarrow}(k_4)+ \langle c_{p_x,\downarrow}^\dagger(k_3) c_{p_x,\downarrow}(k_4) \rangle c_{p_x,\uparrow}^\dagger(k_1) c_{p_x,\uparrow}(k_2)- \langle c_{p_x,\uparrow}^\dagger(k_1) c_{p_x,\downarrow}(k_4) \rangle c_{p_x,\downarrow}^\dagger(k_3) c_{p_x,\uparrow}(k_2)- \langle c_{p_x,\downarrow}^\dagger(k_3) c_{p_x,\uparrow}(k_2) \rangle c_{p_x,\uparrow}^\dagger(k_1) c_{p_x,\downarrow}(k_4)+ \langle c_{p_y,\uparrow}^\dagger(k_1) c_{p_y,\uparrow}(k_2) \rangle c_{p_y,\downarrow}^\dagger(k_3) c_{p_y,\downarrow}(k_4)+ \langle c_{p_y,\downarrow}^\dagger(k_3) c_{p_y,\downarrow}(k_4) \rangle c_{p_y,\uparrow}^\dagger(k_1) c_{p_y,\uparrow}(k_2)- \langle c_{p_y,\uparrow}^\dagger(k_1) c_{p_y,\downarrow}(k_4) \rangle c_{p_y,\downarrow}^\dagger(k_3) c_{p_y,\uparrow}(k_2)- \langle c_{p_y,\downarrow}^\dagger(k_3) c_{p_y,\uparrow}(k_2) \rangle c_{p_y,\uparrow}^\dagger(k_1) c_{p_y,\downarrow}(k_4) \Big\}$.

## Extract quadratic term  
**Prompt:**    
You will be instructed to extract the quadratic terms in the the third term in $\hat{H}^{int,HF}$.  
The quadratic terms mean terms that are proportional to $c^\dagger c$, which excludes terms that are solely expectations or products of expectations.  
You should only preserve the quadratic terms in the third term in $\hat{H}^{int,HF}$, denoted as the third term in $\hat{H}^{int,HF,2}$.  
You should recall that the third term in $\hat{H}^{int,HF}$ is $2V_{pd} \sum_{s, s^{\prime}} \frac{1}{N} \sum_{k_1,k_2,k_3,k_4} \sum_{G} \delta(k_1-k_2+k_3-k_4,G) \Big[\langle c_{d,s}^\dagger(k_1) c_{d,s}(k_2) \rangle c_{p_x,s^{\prime}}^\dagger(k_3) c_{p_x,s^{\prime}}(k_4)\cos\left(\frac{k_3-k_4}{2}\cdot \hat{x}\right) + \langle c_{p_x,s^{\prime}}^\dagger(k_3) c_{p_x,s^{\prime}}(k_4) \rangle c_{d,s}^\dagger(k_1) c_{d,s}(k_2)\cos\left(\frac{k_3-k_4}{2}\cdot \hat{x}\right)- \langle c_{d,s}^\dagger(k_1) c_{d,s}(k_2) \rangle \langle c_{p_x,s^{\prime}}^\dagger(k_3) c_{p_x,s^{\prime}}(k_4) \rangle \cos\left(\frac{k_3-k_4}{2}\cdot \hat{x}\right)- \langle c_{d,s}^\dagger(k_1) c_{p_x,s^{\prime}}(k_4) \rangle c_{p_x,s^{\prime}}^\dagger(k_3) c_{d,s}(k_2)\cos\left(\frac{k_3-k_4}{2}\cdot \hat{x}\right)- \langle c_{p_x,s^{\prime}}^\dagger(k_3) c_{d,s}(k_2) \rangle c_{d,s}^\dagger(k_1) c_{p_x,s^{\prime}}(k_4)\cos\left(\frac{k_3-k_4}{2}\cdot \hat{x}\right)+ \langle c_{d,s}^\dagger(k_1) c_{p_x,s^{\prime}}(k_4) \rangle \langle c_{p_x,s^{\prime}}^\dagger(k_3) c_{d,s}(k_2) \rangle \cos\left(\frac{k_3-k_4}{2}\cdot \hat{x}\right)+ \langle c_{d,s}^\dagger(k_1) c_{d,s}(k_2) \rangle c_{p_y,s^{\prime}}^\dagger(k_3) c_{p_y,s^{\prime}}(k_4)\cos\left(\frac{k_3-k_4}{2}\cdot \hat{y}\right)+ \langle c_{p_y,s^{\prime}}^\dagger(k_3) c_{p_y,s^{\prime}}(k_4) \rangle c_{d,s}^\dagger(k_1) c_{d,s}(k_2)\cos\left(\frac{k_3-k_4}{2}\cdot \hat{y}\right)- \langle c_{d,s}^\dagger(k_1) c_{d,s}(k_2) \rangle \langle c_{p_y,s^{\prime}}^\dagger(k_3) c_{p_y,s^{\prime}}(k_4) \rangle \cos\left(\frac{k_3-k_4}{2}\cdot \hat{y}\right)- \langle c_{d,s}^\dagger(k_1) c_{p_y,s^{\prime}}(k_4) \rangle c_{p_y,s^{\prime}}^\dagger(k_3) c_{d,s}(k_2)\cos\left(\frac{k_3-k_4}{2}\cdot \hat{y}\right)- \langle c_{p_y,s^{\prime}}^\dagger(k_3) c_{d,s}(k_2) \rangle c_{d,s}^\dagger(k_1) c_{p_y,s^{\prime}}(k_4)\cos\left(\frac{k_3-k_4}{2}\cdot \hat{y}\right)+ \langle c_{d,s}^\dagger(k_1) c_{p_y,s^{\prime}}(k_4) \rangle \langle c_{p_y,s^{\prime}}^\dagger(k_3) c_{d,s}(k_2) \rangle \cos\left(\frac{k_3-k_4}{2}\cdot \hat{y}\right)\Big]$.  
Return the third term in $\hat{H}^{int,HF,2}$.  

Use the following conventions for the symbols (You should also obey the conventions in all my previous prompts if you encounter undefined symbols. If you find it is never defined or has conflicts in the conventions, you should stop and let me know):  
$\hat{H}^{int,HF,2}$ : the quadratic terms in $\hat{H}^{int,HF}$

**Completion:**    
The quadratic terms in the third term of $\hat{H}^{int,HF}$ are those that are proportional to $c^\dagger c$. These terms are:

1. $\langle c_{d,s}^\dagger(k_1) c_{d,s}(k_2) \rangle c_{p_x,s^{\prime}}^\dagger(k_3) c_{p_x,s^{\prime}}(k_4)\cos\left(\frac{k_3-k_4}{2}\cdot \hat{x}\right)$
2. $\langle c_{p_x,s^{\prime}}^\dagger(k_3) c_{p_x,s^{\prime}}(k_4) \rangle c_{d,s}^\dagger(k_1) c_{d,s}(k_2)\cos\left(\frac{k_3-k_4}{2}\cdot \hat{x}\right)$
3. $-\langle c_{d,s}^\dagger(k_1) c_{p_x,s^{\prime}}(k_4) \rangle c_{p_x,s^{\prime}}^\dagger(k_3) c_{d,s}(k_2)\cos\left(\frac{k_3-k_4}{2}\cdot \hat{x}\right)$
4. $-\langle c_{p_x,s^{\prime}}^\dagger(k_3) c_{d,s}(k_2) \rangle c_{d,s}^\dagger(k_1) c_{p_x,s^{\prime}}(k_4)\cos\left(\frac{k_3-k_4}{2}\cdot \hat{x}\right)$
5. $\langle c_{d,s}^\dagger(k_1) c_{d,s}(k_2) \rangle c_{p_y,s^{\prime}}^\dagger(k_3) c_{p_y,s^{\prime}}(k_4)\cos\left(\frac{k_3-k_4}{2}\cdot \hat{y}\right)$
6. $\langle c_{p_y,s^{\prime}}^\dagger(k_3) c_{p_y,s^{\prime}}(k_4) \rangle c_{d,s}^\dagger(k_1) c_{d,s}(k_2)\cos\left(\frac{k_3-k_4}{2}\cdot \hat{y}\right)$
7. $-\langle c_{d,s}^\dagger(k_1) c_{p_y,s^{\prime}}(k_4) \rangle c_{p_y,s^{\prime}}^\dagger(k_3) c_{d,s}(k_2)\cos\left(\frac{k_3-k_4}{2}\cdot \hat{y}\right)$
8. $-\langle c_{p_y,s^{\prime}}^\dagger(k_3) c_{d,s}(k_2) \rangle c_{d,s}^\dagger(k_1) c_{p_y,s^{\prime}}(k_4)\cos\left(\frac{k_3-k_4}{2}\cdot \hat{y}\right)$

Therefore, the third term in $\hat{H}^{int,HF,2}$ is:

$2V_{pd} \sum_{s, s^{\prime}} \frac{1}{N} \sum_{k_1,k_2,k_3,k_4} \sum_{G} \delta(k_1-k_2+k_3-k_4,G) \Big[\langle c_{d,s}^\dagger(k_1) c_{d,s}(k_2) \rangle c_{p_x,s^{\prime}}^\dagger(k_3) c_{p_x,s^{\prime}}(k_4)\cos\left(\frac{k_3-k_4}{2}\cdot \hat{x}\right) + \langle c_{p_x,s^{\prime}}^\dagger(k_3) c_{p_x,s^{\prime}}(k_4) \rangle c_{d,s}^\dagger(k_1) c_{d,s}(k_2)\cos\left(\frac{k_3-k_4}{2}\cdot \hat{x}\right)- \langle c_{d,s}^\dagger(k_1) c_{p_x,s^{\prime}}(k_4) \rangle c_{p_x,s^{\prime}}^\dagger(k_3) c_{d,s}(k_2)\cos\left(\frac{k_3-k_4}{2}\cdot \hat{x}\right)- \langle c_{p_x,s^{\prime}}^\dagger(k_3) c_{d,s}(k_2) \rangle c_{d,s}^\dagger(k_1) c_{p_x,s^{\prime}}(k_4)\cos\left(\frac{k_3-k_4}{2}\cdot \hat{x}\right)+ \langle c_{d,s}^\dagger(k_1) c_{d,s}(k_2) \rangle c_{p_y,s^{\prime}}^\dagger(k_3) c_{p_y,s^{\prime}}(k_4)\cos\left(\frac{k_3-k_4}{2}\cdot \hat{y}\right)+ \langle c_{p_y,s^{\prime}}^\dagger(k_3) c_{p_y,s^{\prime}}(k_4) \rangle c_{d,s}^\dagger(k_1) c_{d,s}(k_2)\cos\left(\frac{k_3-k_4}{2}\cdot \hat{y}\right)- \langle c_{d,s}^\dagger(k_1) c_{p_y,s^{\prime}}(k_4) \rangle c_{p_y,s^{\prime}}^\dagger(k_3) c_{d,s}(k_2)\cos\left(\frac{k_3-k_4}{2}\cdot \hat{y}\right)- \langle c_{p_y,s^{\prime}}^\dagger(k_3) c_{d,s}(k_2) \rangle c_{d,s}^\dagger(k_1) c_{p_y,s^{\prime}}(k_4)\cos\left(\frac{k_3-k_4}{2}\cdot \hat{y}\right)\Big]$.

## Extract quadratic term  
**Prompt:**    
You will be instructed to extract the quadratic terms in the the fourth term in $\hat{H}^{int,HF}$.  
The quadratic terms mean terms that are proportional to $c^\dagger c$, which excludes terms that are solely expectations or products of expectations.  
You should only preserve the quadratic terms in the fourth term in $\hat{H}^{int,HF}$, denoted as the fourth term in $\hat{H}^{int,HF,2}$.  
You should recall that the fourth term in $\hat{H}^{int,HF}$ is $\frac{V_{pp}}{N} \sum_{s, s^{\prime}} \sum_{\sigma_x, \sigma_y} \sum_{k_1, k_2, k_3, k_4} \sum_{G} \delta(k_2 - k_1 + k_4 - k_3, G) e^{-i (k_1 - k_2) \cdot \sigma_x\hat{x}/2 - i (k_3 - k_4) \cdot \sigma_y\hat{y}/2} \times \Big[\langle c_{p_x,s}^\dagger(k_1) c_{p_x,s}(k_2) \rangle c_{p_y,s^{\prime}}^\dagger(k_3) c_{p_y,s^{\prime}}(k_4) + \langle c_{p_y,s^{\prime}}^\dagger(k_3) c_{p_y,s^{\prime}}(k_4) \rangle c_{p_x,s}^\dagger(k_1) c_{p_x,s}(k_2) - \langle c_{p_x,s}^\dagger(k_1) c_{p_x,s}(k_2) \rangle \langle c_{p_y,s^{\prime}}^\dagger(k_3) c_{p_y,s^{\prime}}(k_4) \rangle - \langle c_{p_x,s}^\dagger(k_1) c_{p_y,s^{\prime}}(k_4) \rangle c_{p_y,s^{\prime}}^\dagger(k_3) c_{p_x,s}(k_2) - \langle c_{p_y,s^{\prime}}^\dagger(k_3) c_{p_x,s}(k_2) \rangle c_{p_x,s}^\dagger(k_1) c_{p_y,s^{\prime}}(k_4) + \langle c_{p_x,s}^\dagger(k_1) c_{p_y,s^{\prime}}(k_4) \rangle \langle c_{p_y,s^{\prime}}^\dagger(k_3) c_{p_x,s}(k_2) \rangle \Big]$.  
Return the fourth term in $\hat{H}^{int,HF,2}$.  

Use the following conventions for the symbols (You should also obey the conventions in all my previous prompts if you encounter undefined symbols. If you find it is never defined or has conflicts in the conventions, you should stop and let me know):  
$\hat{H}^{int,HF,2}$ : the quadratic terms in $\hat{H}^{int,HF}$

**Completion:**    
The fourth term in $\hat{H}^{int,HF,2}$, which contains only the quadratic terms from the fourth term in $\hat{H}^{int,HF}$, is given by:

$\frac{V_{pp}}{N} \sum_{s, s^{\prime}} \sum_{\sigma_x, \sigma_y} \sum_{k_1, k_2, k_3, k_4} \sum_{G} \delta(k_2 - k_1 + k_4 - k_3, G) e^{-i (k_1 - k_2) \cdot \sigma_x\hat{x}/2 - i (k_3 - k_4) \cdot \sigma_y\hat{y}/2} \times \Big[\langle c_{p_x,s}^\dagger(k_1) c_{p_x,s}(k_2) \rangle c_{p_y,s^{\prime}}^\dagger(k_3) c_{p_y,s^{\prime}}(k_4) + \langle c_{p_y,s^{\prime}}^\dagger(k_3) c_{p_y,s^{\prime}}(k_4) \rangle c_{p_x,s}^\dagger(k_1) c_{p_x,s}(k_2) - \langle c_{p_x,s}^\dagger(k_1) c_{p_y,s^{\prime}}(k_4) \rangle c_{p_y,s^{\prime}}^\dagger(k_3) c_{p_x,s}(k_2) - \langle c_{p_y,s^{\prime}}^\dagger(k_3) c_{p_x,s}(k_2) \rangle c_{p_x,s}^\dagger(k_1) c_{p_y,s^{\prime}}(k_4) \Big]$

This expression excludes terms that are solely expectations or products of expectations, and only includes terms that are proportional to $c^\dagger c$.

## Hartree term only  
**Prompt:**    
You will be instructed to keep only the Hartree term in the first term in $\hat{H}^{int,HF,2}$.  
Here, Hartree term only means that only the expected value in the form $\langle c_{\alpha_1,s_1}^\dagger(k_1) c_{\alpha_1,s_1}(k_2) \rangle$ (Note that the two indices are the same) should be the preserved. All other expected value terms should be dropped.
You should recall that the first term in $\hat{H}^{int,HF,2}$ is $\frac{U_d}{N}\sum_{k_1,k_2,k_3,k_4} \sum_{G} \delta(k_1-k_2+k_3-k_4,G) \big[ \langle c_{d,\uparrow}^\dagger(k_1) c_{d,\uparrow}(k_2) \rangle c_{d,\downarrow}^\dagger(k_3) c_{d,\downarrow}(k_4)+ \langle c_{d,\downarrow}^\dagger(k_3) c_{d,\downarrow}(k_4) \rangle c_{d,\uparrow}^\dagger(k_1) c_{d,\uparrow}(k_2)- \langle c_{d,\uparrow}^\dagger(k_1) c_{d,\downarrow}(k_4) \rangle c_{d,\downarrow}^\dagger(k_3) c_{d,\uparrow}(k_2)- \langle c_{d,\downarrow}^\dagger(k_3) c_{d,\uparrow}(k_2) \rangle c_{d,\uparrow}^\dagger(k_1) c_{d,\downarrow}(k_4) \big]$  
Return the simplified Hamiltonian with the first term in $\hat{H}^{int,Hartree}$.

**Completion:**    
The Hartree term in the first term of $\hat{H}^{int,HF,2}$ only preserves the expected value in the form $\langle c_{\alpha_1,s_1}^\dagger(k_1) c_{\alpha_1,s_1}(k_2) \rangle$. Therefore, we drop the last two terms in the expression for the first term in $\hat{H}^{int,HF,2}$, as they do not match this form. The simplified Hamiltonian with the first term in $\hat{H}^{int,Hartree}$ is then:

$\hat{H}^{int,Hartree} = \frac{U_d}{N}\sum_{k_1,k_2,k_3,k_4} \sum_{G} \delta(k_1-k_2+k_3-k_4,G) \big[ \langle c_{d,\uparrow}^\dagger(k_1) c_{d,\uparrow}(k_2) \rangle c_{d,\downarrow}^\dagger(k_3) c_{d,\downarrow}(k_4)+ \langle c_{d,\downarrow}^\dagger(k_3) c_{d,\downarrow}(k_4) \rangle c_{d,\uparrow}^\dagger(k_1) c_{d,\uparrow}(k_2) \big]$

## Hartree term only  
**Prompt:**    
You will be instructed to keep only the Hartree term in the second term in $\hat{H}^{int,HF,2}$.  
Here, Hartree term only means that only the expected value in the form $\langle c_{\alpha_1,s_1}^\dagger(k_1) c_{\alpha_1,s_1}(k_2) \rangle$ (Note that the two indices are the same) should be the preserved. All other expected value terms should be dropped.
You should recall that the second term in $\hat{H}^{int,HF,2}$ is $\frac{U_p}{2N} \sum_{k_1,k_2,k_3,k_4} \sum_{G} \delta(k_1-k_2+k_3-k_4,G) \Big\{ \langle c_{p_x,\uparrow}^\dagger(k_1) c_{p_x,\uparrow}(k_2) \rangle c_{p_x,\downarrow}^\dagger(k_3) c_{p_x,\downarrow}(k_4)+ \langle c_{p_x,\downarrow}^\dagger(k_3) c_{p_x,\downarrow}(k_4) \rangle c_{p_x,\uparrow}^\dagger(k_1) c_{p_x,\uparrow}(k_2)- \langle c_{p_x,\uparrow}^\dagger(k_1) c_{p_x,\uparrow}(k_2) \rangle \langle c_{p_x,\downarrow}^\dagger(k_3) c_{p_x,\downarrow}(k_4) \rangle- \langle c_{p_x,\uparrow}^\dagger(k_1) c_{p_x,\downarrow}(k_4) \rangle c_{p_x,\downarrow}^\dagger(k_3) c_{p_x,\uparrow}(k_2)- \langle c_{p_x,\downarrow}^\dagger(k_3) c_{p_x,\uparrow}(k_2) \rangle c_{p_x,\uparrow}^\dagger(k_1) c_{p_x,\downarrow}(k_4)+ \langle c_{p_x,\uparrow}^\dagger(k_1) c_{p_x,\downarrow}(k_4) \rangle \langle c_{p_x,\downarrow}^\dagger(k_3) c_{p_x,\uparrow}(k_2) \rangle + \langle c_{p_y,\uparrow}^\dagger(k_1) c_{p_y,\uparrow}(k_2) \rangle c_{p_y,\downarrow}^\dagger(k_3) c_{p_y,\downarrow}(k_4)+ \langle c_{p_y,\downarrow}^\dagger(k_3) c_{p_y,\downarrow}(k_4) \rangle c_{p_y,\uparrow}^\dagger(k_1) c_{p_y,\uparrow}(k_2)- \langle c_{p_y,\uparrow}^\dagger(k_1) c_{p_y,\uparrow}(k_2) \rangle \langle c_{p_y,\downarrow}^\dagger(k_3) c_{p_y,\downarrow}(k_4) \rangle- \langle c_{p_y,\uparrow}^\dagger(k_1) c_{p_y,\downarrow}(k_4) \rangle c_{p_y,\downarrow}^\dagger(k_3) c_{p_y,\uparrow}(k_2)- \langle c_{p_y,\downarrow}^\dagger(k_3) c_{p_y,\uparrow}(k_2) \rangle c_{p_y,\uparrow}^\dagger(k_1) c_{p_y,\downarrow}(k_4)+ \langle c_{p_y,\uparrow}^\dagger(k_1) c_{p_y,\downarrow}(k_4) \rangle \langle c_{p_y,\downarrow}^\dagger(k_3) c_{p_y,\uparrow}(k_2) \rangle \Big\}.$  
Return the simplified Hamiltonian with the second term in $\hat{H}^{int,Hartree}$.

**Completion:**    
To keep only the Hartree terms in the second term in $\hat{H}^{int,HF,2}$, we need to preserve only the terms that have the expected value in the form $\langle c_{\alpha_1,s_1}^\dagger(k_1) c_{\alpha_1,s_1}(k_2) \rangle$. Therefore, we drop all the terms that do not match this form. The simplified Hamiltonian with the second term in $\hat{H}^{int,Hartree}$ is then:

$\hat{H}^{int,Hartree,2} = \frac{U_p}{2N} \sum_{k_1,k_2,k_3,k_4} \sum_{G} \delta(k_1-k_2+k_3-k_4,G) \Big\{ \langle c_{p_x,\uparrow}^\dagger(k_1) c_{p_x,\uparrow}(k_2) \rangle c_{p_x,\downarrow}^\dagger(k_3) c_{p_x,\downarrow}(k_4)+ \langle c_{p_x,\downarrow}^\dagger(k_3) c_{p_x,\downarrow}(k_4) \rangle c_{p_x,\uparrow}^\dagger(k_1) c_{p_x,\uparrow}(k_2)+ \langle c_{p_y,\uparrow}^\dagger(k_1) c_{p_y,\uparrow}(k_2) \rangle c_{p_y,\downarrow}^\dagger(k_3) c_{p_y,\downarrow}(k_4)+ \langle c_{p_y,\downarrow}^\dagger(k_3) c_{p_y,\downarrow}(k_4) \rangle c_{p_y,\uparrow}^\dagger(k_1) c_{p_y,\uparrow}(k_2) \Big\}.$

## Hartree term only  
**Prompt:**    
You will be instructed to keep only the Hartree term in the third term in $\hat{H}^{int,HF,2}$.  
Here, Hartree term only means that only the expected value in the form $\langle c_{\alpha_1,s_1}^\dagger(k_1) c_{\alpha_1,s_1}(k_2) \rangle$ (Note that the two indices are the same) should be the preserved. All other expected value terms should be dropped.
You should recall that the third term in $\hat{H}^{int,HF,2}$ is $2V_{pd} \sum_{s, s^{\prime}} \frac{1}{N} \sum_{k_1,k_2,k_3,k_4} \sum_{G} \delta(k_1-k_2+k_3-k_4,G) \Big[\langle c_{d,s}^\dagger(k_1) c_{d,s}(k_2) \rangle c_{p_x,s^{\prime}}^\dagger(k_3) c_{p_x,s^{\prime}}(k_4)\cos\left(\frac{k_3-k_4}{2}\cdot \hat{x}\right) + \langle c_{p_x,s^{\prime}}^\dagger(k_3) c_{p_x,s^{\prime}}(k_4) \rangle c_{d,s}^\dagger(k_1) c_{d,s}(k_2)\cos\left(\frac{k_3-k_4}{2}\cdot \hat{x}\right)- \langle c_{d,s}^\dagger(k_1) c_{d,s}(k_2) \rangle \langle c_{p_x,s^{\prime}}^\dagger(k_3) c_{p_x,s^{\prime}}(k_4) \rangle \cos\left(\frac{k_3-k_4}{2}\cdot \hat{x}\right)- \langle c_{d,s}^\dagger(k_1) c_{p_x,s^{\prime}}(k_4) \rangle c_{p_x,s^{\prime}}^\dagger(k_3) c_{d,s}(k_2)\cos\left(\frac{k_3-k_4}{2}\cdot \hat{x}\right)- \langle c_{p_x,s^{\prime}}^\dagger(k_3) c_{d,s}(k_2) \rangle c_{d,s}^\dagger(k_1) c_{p_x,s^{\prime}}(k_4)\cos\left(\frac{k_3-k_4}{2}\cdot \hat{x}\right)+ \langle c_{d,s}^\dagger(k_1) c_{p_x,s^{\prime}}(k_4) \rangle \langle c_{p_x,s^{\prime}}^\dagger(k_3) c_{d,s}(k_2) \rangle \cos\left(\frac{k_3-k_4}{2}\cdot \hat{x}\right)+ \langle c_{d,s}^\dagger(k_1) c_{d,s}(k_2) \rangle c_{p_y,s^{\prime}}^\dagger(k_3) c_{p_y,s^{\prime}}(k_4)\cos\left(\frac{k_3-k_4}{2}\cdot \hat{y}\right)+ \langle c_{p_y,s^{\prime}}^\dagger(k_3) c_{p_y,s^{\prime}}(k_4) \rangle c_{d,s}^\dagger(k_1) c_{d,s}(k_2)\cos\left(\frac{k_3-k_4}{2}\cdot \hat{y}\right)- \langle c_{d,s}^\dagger(k_1) c_{d,s}(k_2) \rangle \langle c_{p_y,s^{\prime}}^\dagger(k_3) c_{p_y,s^{\prime}}(k_4) \rangle \cos\left(\frac{k_3-k_4}{2}\cdot \hat{y}\right)- \langle c_{d,s}^\dagger(k_1) c_{p_y,s^{\prime}}(k_4) \rangle c_{p_y,s^{\prime}}^\dagger(k_3) c_{d,s}(k_2)\cos\left(\frac{k_3-k_4}{2}\cdot \hat{y}\right)- \langle c_{p_y,s^{\prime}}^\dagger(k_3) c_{d,s}(k_2) \rangle c_{d,s}^\dagger(k_1) c_{p_y,s^{\prime}}(k_4)\cos\left(\frac{k_3-k_4}{2}\cdot \hat{y}\right)+ \langle c_{d,s}^\dagger(k_1) c_{p_y,s^{\prime}}(k_4) \rangle \langle c_{p_y,s^{\prime}}^\dagger(k_3) c_{d,s}(k_2) \rangle \cos\left(\frac{k_3-k_4}{2}\cdot \hat{y}\right)\Big].$  
Return the simplified Hamiltonian with the third term in $\hat{H}^{int,Hartree}$.

**Completion:**    
The third term in $\hat{H}^{int,HF,2}$ contains several expectation value terms. According to the instructions, we should only keep the Hartree terms, which are in the form $\langle c_{\alpha_1,s_1}^\dagger(k_1) c_{\alpha_1,s_1}(k_2) \rangle$. Therefore, we drop all the terms that do not match this form. The simplified Hamiltonian with the third term in $\hat{H}^{int,Hartree}$ is then:

$\hat{H}^{int,Hartree,3} = 2V_{pd} \sum_{s, s^{\prime}} \frac{1}{N} \sum_{k_1,k_2,k_3,k_4} \sum_{G} \delta(k_1-k_2+k_3-k_4,G) \Big[\langle c_{d,s}^\dagger(k_1) c_{d,s}(k_2) \rangle c_{p_x,s^{\prime}}^\dagger(k_3) c_{p_x,s^{\prime}}(k_4)\cos\left(\frac{k_3-k_4}{2}\cdot \hat{x}\right) + \langle c_{p_x,s^{\prime}}^\dagger(k_3) c_{p_x,s^{\prime}}(k_4) \rangle c_{d,s}^\dagger(k_1) c_{d,s}(k_2)\cos\left(\frac{k_3-k_4}{2}\cdot \hat{x}\right) + \langle c_{d,s}^\dagger(k_1) c_{d,s}(k_2) \rangle c_{p_y,s^{\prime}}^\dagger(k_3) c_{p_y,s^{\prime}}(k_4)\cos\left(\frac{k_3-k_4}{2}\cdot \hat{y}\right) + \langle c_{p_y,s^{\prime}}^\dagger(k_3) c_{p_y,s^{\prime}}(k_4) \rangle c_{d,s}^\dagger(k_1) c_{d,s}(k_2)\cos\left(\frac{k_3-k_4}{2}\cdot \hat{y}\right)\Big].$

## Hartree term only  
**Prompt:**    
You will be instructed to keep only the Hartree term in the fourth term in $\hat{H}^{int,HF,2}$.  
Here, Hartree term only means that only the expected value in the form $\langle c_{\alpha_1,s_1}^\dagger(k_1) c_{\alpha_1,s_1}(k_2) \rangle$ (Note that the two indices are the same) should be the preserved. All other expected value terms should be dropped.
You should recall that the fourth term in $\hat{H}^{int,HF,2}$ is $\frac{V_{pp}}{N} \sum_{s, s^{\prime}} \sum_{\sigma_x, \sigma_y} \sum_{k_1, k_2, k_3, k_4} \sum_{G} \delta(k_2 - k_1 + k_4 - k_3, G) e^{-i (k_1 - k_2) \cdot \sigma_x\hat{x}/2 - i (k_3 - k_4) \cdot \sigma_y\hat{y}/2} \times \Big[\langle c_{p_x,s}^\dagger(k_1) c_{p_x,s}(k_2) \rangle c_{p_y,s^{\prime}}^\dagger(k_3) c_{p_y,s^{\prime}}(k_4) + \langle c_{p_y,s^{\prime}}^\dagger(k_3) c_{p_y,s^{\prime}}(k_4) \rangle c_{p_x,s}^\dagger(k_1) c_{p_x,s}(k_2) - \langle c_{p_x,s}^\dagger(k_1) c_{p_x,s}(k_2) \rangle \langle c_{p_y,s^{\prime}}^\dagger(k_3) c_{p_y,s^{\prime}}(k_4) \rangle - \langle c_{p_x,s}^\dagger(k_1) c_{p_y,s^{\prime}}(k_4) \rangle c_{p_y,s^{\prime}}^\dagger(k_3) c_{p_x,s}(k_2) - \langle c_{p_y,s^{\prime}}^\dagger(k_3) c_{p_x,s}(k_2) \rangle c_{p_x,s}^\dagger(k_1) c_{p_y,s^{\prime}}(k_4) + \langle c_{p_x,s}^\dagger(k_1) c_{p_y,s^{\prime}}(k_4) \rangle \langle c_{p_y,s^{\prime}}^\dagger(k_3) c_{p_x,s}(k_2) \rangle \Big]$  
Return the simplified Hamiltonian with the fourth term in $\hat{H}^{int,Hartree}$.

**Completion:**    
The fourth term in $\hat{H}^{int,HF,2}$, after keeping only the Hartree terms, simplifies to:

$\hat{H}^{int,Hartree} = \frac{V_{pp}}{N} \sum_{s, s^{\prime}} \sum_{\sigma_x, \sigma_y} \sum_{k_1, k_2, k_3, k_4} \sum_{G} \delta(k_2 - k_1 + k_4 - k_3, G) e^{-i (k_1 - k_2) \cdot \sigma_x\hat{x}/2 - i (k_3 - k_4) \cdot \sigma_y\hat{y}/2} \times \Big[\langle c_{p_x,s}^\dagger(k_1) c_{p_x,s}(k_2) \rangle c_{p_y,s^{\prime}}^\dagger(k_3) c_{p_y,s^{\prime}}(k_4) + \langle c_{p_y,s^{\prime}}^\dagger(k_3) c_{p_y,s^{\prime}}(k_4) \rangle c_{p_x,s}^\dagger(k_1) c_{p_x,s}(k_2) \Big]$

Here, we have dropped all the terms that do not match the form $\langle c_{\alpha_1,s_1}^\dagger(k_1) c_{\alpha_1,s_1}(k_2) \rangle$.

## Swap the index only  
**Prompt:**    
You will be instructed to simplify the quadratic term the first term in $\hat{H}^{int,HF,2}$ through relabeling the index.  
The logic is that the expected value ($\langle c_{\alpha_1,s_1}^\dagger(k_1) c_{\alpha_1,s_1}(k_2) \rangle$) in the first Hartree term ($\langle c_{\alpha_1,s_1}^\dagger(k_1) c_{\alpha_1,s_1}(k_2) \rangle c_{\alpha_2,s_2}^\dagger(k_3) c_{\alpha_2,s_2}(k_4)$) has the same form as the quadratic operators in the second Hartree term ($\langle c_{\alpha_2,s_2}^\dagger(k_3) c_{\alpha_2,s_2}(k_4)\rangle c_{\alpha_1,s_1}^\dagger(k_1) c_{\alpha_1,s_1}(k_2)$), and vice versa. The same applies to the Fock term.  
Namely, a replacement of $k_1 \leftrightarrow k_3$ and $k_2 \leftrightarrow k_4$ is applied to ONLY the second Hartree or Fock term. You should not swap any index that is not in the summation, which includes $\uparrow$ and $\downarrow$.  
This means, if you relabel the index by swapping the index in the "expected value" and "quadratic operators" in the second Hartree or Fock term, you can make the second Hartree or Fock term look identical to the first Hartree or Fock term, as long as $V(q)=V(-q)$, which is naturally satisfied in Coulomb interaction. You should follow the EXAMPLE below to simplify it through relabeling the index.  
You should recall that the first term in $\hat{H}^{int,HF,2}$ in $\frac{U_d}{N} \sum_{k_1, k_2, k_3, k_4} \sum_{G} \delta(k_1-k_2+k_3-k_4,G) \Big[ \langle c_{d,\uparrow}^\dagger(k_1) c_{d,\uparrow}(k_2) \rangle c_{d,\downarrow}^\dagger(k_3) c_{d,\downarrow}(k_4) + \langle c_{d,\downarrow}^\dagger(k_3) c_{d,\downarrow}(k_4) \rangle c_{d,\uparrow}^\dagger(k_1) c_{d,\uparrow}(k_2) \Big]$
Return the simplied the first term in $\hat{H}^{int,HF,2}$.

===  
EXAMPLE:  
Given a Hamiltonian $\hat{H}=\sum_{k_1,k_2, k_3, k_4,\sigma_1,\sigma_2,\sigma_3,\sigma_4} V(k_1-k_4) (\langle c_{d,\sigma_1}^\dagger(k_1) c_{d,\sigma_4}(k_4) \rangle c_{p,\sigma_2}^\dagger(k_2) c_{p,\sigma_3}(k_3) + \langle c_{p,\sigma_2}^\dagger(k_2) c_{d,\sigma_3}(k_3) \rangle c_{d,\sigma_1}^\dagger(k_1) c_{\sigma_4}(k_4) ) \delta_{k_1+k_2,k_3+k_4}$, where $V(q)=V(-q)$.  
In the second term, we relabel the index to swap the index in expected value and the index in quadratic operators, namely, $\sigma_1 \leftrightarrow \sigma_2$, $\sigma_3 \leftrightarrow \sigma_4$, $k_1 \leftrightarrow k_2$, $k_3 \leftrightarrow k_4$. Important: $d$ and $p$ cannot be swapped because they are not indices in the summation.  
After the replacement, the second term becomes $\sum_{k_1,k_2, k_3, k_4,\sigma_1,\sigma_2,\sigma_3,\sigma_4} V(k_2-k_3) \langle c_{p,\sigma_1}^\dagger(k_1) c_{p,\sigma_4}(k_4) \rangle c_{d,\sigma_2}^\dagger(k_2) c_{d,\sigma_3}(k_3) \delta_{k_4+k_3,k_2+k_1}$.  
Note that the Kronecker dirac function $\delta_{k_4+k_3,k_2+k_1}$ implies $k_1+k_2=k_3+k_4$, i.e., $k_2-k_3=k_4-k_1$. Thus, the second term simplifies to $\sum_{k_1,k_2, k_3, k_4,\sigma_1,\sigma_2,\sigma_3,\sigma_4} V(k_4-k_1) \langle c_{p,\sigma_1}^\dagger(k_1) c_{p,\sigma_4}(k_4) \rangle c_{d,\sigma_2}^\dagger(k_2) c_{d,\sigma_3}(k_3) \delta_{k_4+k_3,k_2+k_1}$.
Because $V(q)=V(-q)$, meaning $V(k_4-k_1)=V(k_1-k_4)$, the second term further simplifies to $\sum_{k_1,k_2, k_3, k_4,\sigma_1,\sigma_2,\sigma_3,\sigma_4} V(k_1-k_4) \langle c_{p,\sigma_1}^\dagger(k_1) c_{p,\sigma_4}(k_4) \rangle c_{d,\sigma_2}^\dagger(k_2) c_{d,\sigma_3}(k_3) \delta_{k_4+k_3,k_2+k_1}$.   
Finally, we have the simplified Hamiltonian as  $\hat{H}=\sum_{k_1,k_2, k_3, k_4,\sigma_1,\sigma_2,\sigma_3,\sigma_4} V(k_1-k_4) (\langle c_{d,\sigma_1}^\dagger(k_1) c_{d,\sigma_4}(k_4) \rangle c_{p,\sigma_2}^\dagger(k_2) c_{p,\sigma_3}(k_3) + \langle c_{p,\sigma_1}^\dagger(k_1) c_{p,\sigma_4}(k_4) \rangle c_{d,\sigma_2}^\dagger(k_2) c_{d,\sigma_3}(k_3)) \delta_{k_4+k_3,k_2+k_1}$.

**Completion:**    
Following the example, we can simplify the first term in $\hat{H}^{int,HF,2}$ by relabeling the index in the second Hartree term. We swap $k_1 \leftrightarrow k_3$ and $k_2 \leftrightarrow k_4$. The first term in $\hat{H}^{int,HF,2}$ then becomes:

$\frac{U_d}{N} \sum_{k_1, k_2, k_3, k_4} \sum_{G} \delta(k_1-k_2+k_3-k_4,G) \Big[ \langle c_{d,\uparrow}^\dagger(k_1) c_{d,\uparrow}(k_2) \rangle c_{d,\downarrow}^\dagger(k_3) c_{d,\downarrow}(k_4) + \langle c_{d,\uparrow}^\dagger(k_3) c_{d,\uparrow}(k_4) \rangle c_{d,\downarrow}^\dagger(k_1) c_{d,\downarrow}(k_2) \Big]$

The Kronecker delta function $\delta(k_1-k_2+k_3-k_4,G)$ implies $k_1+k_2=k_3+k_4$, i.e., $k_3-k_4=k_1-k_2$. Thus, the first term in $\hat{H}^{int,HF,2}$ simplifies to:

$\frac{U_d}{N} \sum_{k_1, k_2, k_3, k_4} \sum_{G} \delta(k_1-k_2+k_3-k_4,G) \Big[ \langle c_{d,\uparrow}^\dagger(k_1) c_{d,\uparrow}(k_2) \rangle c_{d,\downarrow}^\dagger(k_3) c_{d,\downarrow}(k_4) + \langle c_{d,\uparrow}^\dagger(k_1) c_{d,\uparrow}(k_2) \rangle c_{d,\downarrow}^\dagger(k_3) c_{d,\downarrow}(k_4) \Big]$

Finally, we have the simplified first term in $\hat{H}^{int,HF,2}$ as:

$\frac{2U_d}{N} \sum_{k_1, k_2, k_3, k_4} \sum_{G} \delta(k_1-k_2+k_3-k_4,G) \langle c_{d,\uparrow}^\dagger(k_1) c_{d,\uparrow}(k_2) \rangle c_{d,\downarrow}^\dagger(k_3) c_{d,\downarrow}(k_4)$

## Swap the index only  
**Prompt:**    
You will be instructed to simplify the quadratic term the second term in $\hat{H}^{int,HF,2}$ through relabeling the index.  
The logic is that the expected value ($\langle c_{\alpha_1,s_1}^\dagger(k_1) c_{\alpha_1,s_1}(k_2) \rangle$) in the first Hartree term ($\langle c_{\alpha_1,s_1}^\dagger(k_1) c_{\alpha_1,s_1}(k_2) \rangle c_{\alpha_2,s_2}^\dagger(k_3) c_{\alpha_2,s_2}(k_4)$) has the same form as the quadratic operators in the second Hartree term ($\langle c_{\alpha_2,s_2}^\dagger(k_3) c_{\alpha_2,s_2}(k_4)\rangle c_{\alpha_1,s_1}^\dagger(k_1) c_{\alpha_1,s_1}(k_2)$), and vice versa. The same applies to the Fock term.  
Namely, a replacement of $k_1 \leftrightarrow k_3$ and $k_2 \leftrightarrow k_4$ is applied to ONLY the second Hartree or Fock term. You should not swap any index that is not in the summation, which includes $\uparrow$ and $\downarrow$.  
This means, if you relabel the index by swapping the index in the "expected value" and "quadratic operators" in the second Hartree or Fock term, you can make the second Hartree or Fock term look identical to the first Hartree or Fock term, as long as $V(q)=V(-q)$, which is naturally satisfied in Coulomb interaction. You should follow the EXAMPLE below to simplify it through relabeling the index.  
You should recall that the second term in $\hat{H}^{int,HF,2}$ is $\frac{U_p}{2N} \sum_{k_1,k_2,k_3,k_4} \sum_{G} \delta(k_1-k_2+k_3-k_4,G) \Big\{ \langle c_{p_x,\uparrow}^\dagger(k_1) c_{p_x,\uparrow}(k_2) \rangle c_{p_x,\downarrow}^\dagger(k_3) c_{p_x,\downarrow}(k_4)+ \langle c_{p_x,\downarrow}^\dagger(k_3) c_{p_x,\downarrow}(k_4) \rangle c_{p_x,\uparrow}^\dagger(k_1) c_{p_x,\uparrow}(k_2)+ \langle c_{p_y,\uparrow}^\dagger(k_1) c_{p_y,\uparrow}(k_2) \rangle c_{p_y,\downarrow}^\dagger(k_3) c_{p_y,\downarrow}(k_4)+ \langle c_{p_y,\downarrow}^\dagger(k_3) c_{p_y,\downarrow}(k_4) \rangle c_{p_y,\uparrow}^\dagger(k_1) c_{p_y,\uparrow}(k_2) \Big\}.$
Return the simplied the second term in $\hat{H}^{int,HF,2}$.

===  
EXAMPLE:  
Given a Hamiltonian $\hat{H}=\sum_{k_1,k_2, k_3, k_4,\sigma_1,\sigma_2,\sigma_3,\sigma_4} V(k_1-k_4) (\langle c_{d,\sigma_1}^\dagger(k_1) c_{d,\sigma_4}(k_4) \rangle c_{p,\sigma_2}^\dagger(k_2) c_{p,\sigma_3}(k_3) + \langle c_{p,\sigma_2}^\dagger(k_2) c_{d,\sigma_3}(k_3) \rangle c_{d,\sigma_1}^\dagger(k_1) c_{\sigma_4}(k_4) ) \delta_{k_1+k_2,k_3+k_4}$, where $V(q)=V(-q)$.  
In the second term, we relabel the index to swap the index in expected value and the index in quadratic operators, namely, $\sigma_1 \leftrightarrow \sigma_2$, $\sigma_3 \leftrightarrow \sigma_4$, $k_1 \leftrightarrow k_2$, $k_3 \leftrightarrow k_4$. Important: $d$ and $p$ cannot be swapped because they are not indices in the summation.  
After the replacement, the second term becomes $\sum_{k_1,k_2, k_3, k_4,\sigma_1,\sigma_2,\sigma_3,\sigma_4} V(k_2-k_3) \langle c_{p,\sigma_1}^\dagger(k_1) c_{p,\sigma_4}(k_4) \rangle c_{d,\sigma_2}^\dagger(k_2) c_{d,\sigma_3}(k_3) \delta_{k_4+k_3,k_2+k_1}$.  
Note that the Kronecker dirac function $\delta_{k_4+k_3,k_2+k_1}$ implies $k_1+k_2=k_3+k_4$, i.e., $k_2-k_3=k_4-k_1$. Thus, the second term simplifies to $\sum_{k_1,k_2, k_3, k_4,\sigma_1,\sigma_2,\sigma_3,\sigma_4} V(k_4-k_1) \langle c_{p,\sigma_1}^\dagger(k_1) c_{p,\sigma_4}(k_4) \rangle c_{d,\sigma_2}^\dagger(k_2) c_{d,\sigma_3}(k_3) \delta_{k_4+k_3,k_2+k_1}$.
Because $V(q)=V(-q)$, meaning $V(k_4-k_1)=V(k_1-k_4)$, the second term further simplifies to $\sum_{k_1,k_2, k_3, k_4,\sigma_1,\sigma_2,\sigma_3,\sigma_4} V(k_1-k_4) \langle c_{p,\sigma_1}^\dagger(k_1) c_{p,\sigma_4}(k_4) \rangle c_{d,\sigma_2}^\dagger(k_2) c_{d,\sigma_3}(k_3) \delta_{k_4+k_3,k_2+k_1}$.   
Finally, we have the simplified Hamiltonian as  $\hat{H}=\sum_{k_1,k_2, k_3, k_4,\sigma_1,\sigma_2,\sigma_3,\sigma_4} V(k_1-k_4) (\langle c_{d,\sigma_1}^\dagger(k_1) c_{d,\sigma_4}(k_4) \rangle c_{p,\sigma_2}^\dagger(k_2) c_{p,\sigma_3}(k_3) + \langle c_{p,\sigma_1}^\dagger(k_1) c_{p,\sigma_4}(k_4) \rangle c_{d,\sigma_2}^\dagger(k_2) c_{d,\sigma_3}(k_3)) \delta_{k_4+k_3,k_2+k_1}$.

**Completion:**    
Following the example, we can relabel the indices in the second Hartree or Fock term of the second term in $\hat{H}^{int,HF,2}$. We swap $k_1 \leftrightarrow k_3$ and $k_2 \leftrightarrow k_4$ in the second Hartree or Fock term. The second term in $\hat{H}^{int,HF,2}$ then becomes:

$\frac{U_p}{2N} \sum_{k_1,k_2,k_3,k_4} \sum_{G} \delta(k_1-k_2+k_3-k_4,G) \Big\{ \langle c_{p_x,\uparrow}^\dagger(k_1) c_{p_x,\uparrow}(k_2) \rangle c_{p_x,\downarrow}^\dagger(k_3) c_{p_x,\downarrow}(k_4)+ \langle c_{p_x,\downarrow}^\dagger(k_1) c_{p_x,\downarrow}(k_2) \rangle c_{p_x,\uparrow}^\dagger(k_3) c_{p_x,\uparrow}(k_4)+ \langle c_{p_y,\uparrow}^\dagger(k_1) c_{p_y,\uparrow}(k_2) \rangle c_{p_y,\downarrow}^\dagger(k_3) c_{p_y,\downarrow}(k_4)+ \langle c_{p_y,\downarrow}^\dagger(k_1) c_{p_y,\downarrow}(k_2) \rangle c_{p_y,\uparrow}^\dagger(k_3) c_{p_y,\uparrow}(k_4) \Big\}$.

This simplification is valid as long as $V(q)=V(-q)$, which is naturally satisfied in Coulomb interaction.

## Swap the index only  
**Prompt:**    
You will be instructed to simplify the quadratic term the third term in $\hat{H}^{int,HF,2}$ through relabeling the index.  
The logic is that the expected value ($\langle c_{\alpha_1,s_1}^\dagger(k_1) c_{\alpha_1,s_1}(k_2) \rangle$) in the first Hartree term ($\langle c_{\alpha_1,s_1}^\dagger(k_1) c_{\alpha_1,s_1}(k_2) \rangle c_{\alpha_2,s_2}^\dagger(k_3) c_{\alpha_2,s_2}(k_4)$) has the same form as the quadratic operators in the second Hartree term ($\langle c_{\alpha_2,s_2}^\dagger(k_3) c_{\alpha_2,s_2}(k_4)\rangle c_{\alpha_1,s_1}^\dagger(k_1) c_{\alpha_1,s_1}(k_2)$), and vice versa. The same applies to the Fock term.  
Namely, a replacement of $k_1 \leftrightarrow k_3$ and $k_2 \leftrightarrow k_4$ is applied to ONLY the second Hartree or Fock term. You should not swap any index that is not in the summation, which includes $\uparrow$ and $\downarrow$.  
This means, if you relabel the index by swapping the index in the "expected value" and "quadratic operators" in the second Hartree or Fock term, you can make the second Hartree or Fock term look identical to the first Hartree or Fock term, as long as $V(q)=V(-q)$, which is naturally satisfied in Coulomb interaction. You should follow the EXAMPLE below to simplify it through relabeling the index.  
You should recall that the third term in $\hat{H}^{int,HF,2}$ is $2V_{pd} \sum_{s, s^{\prime}} \frac{1}{N} \sum_{k_1,k_2,k_3,k_4} \sum_{G} \delta(k_1-k_2+k_3-k_4,G) \Big[\langle c_{d,s}^\dagger(k_1) c_{d,s}(k_2) \rangle c_{p_x,s^{\prime}}^\dagger(k_3) c_{p_x,s^{\prime}}(k_4)\cos\left(\frac{k_3-k_4}{2}\cdot \hat{x}\right) + \langle c_{p_x,s^{\prime}}^\dagger(k_3) c_{p_x,s^{\prime}}(k_4) \rangle c_{d,s}^\dagger(k_1) c_{d,s}(k_2)\cos\left(\frac{k_3-k_4}{2}\cdot \hat{x}\right)+ \langle c_{d,s}^\dagger(k_1) c_{d,s}(k_2) \rangle c_{p_y,s^{\prime}}^\dagger(k_3) c_{p_y,s^{\prime}}(k_4)\cos\left(\frac{k_3-k_4}{2}\cdot \hat{y}\right)+ \langle c_{p_y,s^{\prime}}^\dagger(k_3) c_{p_y,s^{\prime}}(k_4) \rangle c_{d,s}^\dagger(k_1) c_{d,s}(k_2)\cos\left(\frac{k_3-k_4}{2}\cdot \hat{y}\right) \Big]$
Return the simplied the third term in $\hat{H}^{int,HF,2}$.

===  
EXAMPLE:  
Given a Hamiltonian $\hat{H}=\sum_{k_1,k_2, k_3, k_4,\sigma_1,\sigma_2,\sigma_3,\sigma_4} V(k_1-k_4) (\langle c_{d,\sigma_1}^\dagger(k_1) c_{d,\sigma_4}(k_4) \rangle c_{p,\sigma_2}^\dagger(k_2) c_{p,\sigma_3}(k_3) + \langle c_{p,\sigma_2}^\dagger(k_2) c_{d,\sigma_3}(k_3) \rangle c_{d,\sigma_1}^\dagger(k_1) c_{\sigma_4}(k_4) ) \delta_{k_1+k_2,k_3+k_4}$, where $V(q)=V(-q)$.  
In the second term, we relabel the index to swap the index in expected value and the index in quadratic operators, namely, $\sigma_1 \leftrightarrow \sigma_2$, $\sigma_3 \leftrightarrow \sigma_4$, $k_1 \leftrightarrow k_2$, $k_3 \leftrightarrow k_4$. Important: $d$ and $p$ cannot be swapped because they are not indices in the summation.  
After the replacement, the second term becomes $\sum_{k_1,k_2, k_3, k_4,\sigma_1,\sigma_2,\sigma_3,\sigma_4} V(k_2-k_3) \langle c_{p,\sigma_1}^\dagger(k_1) c_{p,\sigma_4}(k_4) \rangle c_{d,\sigma_2}^\dagger(k_2) c_{d,\sigma_3}(k_3) \delta_{k_4+k_3,k_2+k_1}$.  
Note that the Kronecker dirac function $\delta_{k_4+k_3,k_2+k_1}$ implies $k_1+k_2=k_3+k_4$, i.e., $k_2-k_3=k_4-k_1$. Thus, the second term simplifies to $\sum_{k_1,k_2, k_3, k_4,\sigma_1,\sigma_2,\sigma_3,\sigma_4} V(k_4-k_1) \langle c_{p,\sigma_1}^\dagger(k_1) c_{p,\sigma_4}(k_4) \rangle c_{d,\sigma_2}^\dagger(k_2) c_{d,\sigma_3}(k_3) \delta_{k_4+k_3,k_2+k_1}$.
Because $V(q)=V(-q)$, meaning $V(k_4-k_1)=V(k_1-k_4)$, the second term further simplifies to $\sum_{k_1,k_2, k_3, k_4,\sigma_1,\sigma_2,\sigma_3,\sigma_4} V(k_1-k_4) \langle c_{p,\sigma_1}^\dagger(k_1) c_{p,\sigma_4}(k_4) \rangle c_{d,\sigma_2}^\dagger(k_2) c_{d,\sigma_3}(k_3) \delta_{k_4+k_3,k_2+k_1}$.   
Finally, we have the simplified Hamiltonian as  $\hat{H}=\sum_{k_1,k_2, k_3, k_4,\sigma_1,\sigma_2,\sigma_3,\sigma_4} V(k_1-k_4) (\langle c_{d,\sigma_1}^\dagger(k_1) c_{d,\sigma_4}(k_4) \rangle c_{p,\sigma_2}^\dagger(k_2) c_{p,\sigma_3}(k_3) + \langle c_{p,\sigma_1}^\dagger(k_1) c_{p,\sigma_4}(k_4) \rangle c_{d,\sigma_2}^\dagger(k_2) c_{d,\sigma_3}(k_3)) \delta_{k_4+k_3,k_2+k_1}$.

**Completion:**    
Following the example, we can simplify the third term in $\hat{H}^{int,HF,2}$ by relabeling the indices in the second Hartree and Fock terms. We swap $k_1 \leftrightarrow k_3$ and $k_2 \leftrightarrow k_4$ in the second Hartree and Fock terms. 

After the replacement, the third term in $\hat{H}^{int,HF,2}$ becomes:

$2V_{pd} \sum_{s, s^{\prime}} \frac{1}{N} \sum_{k_1,k_2,k_3,k_4} \sum_{G} \delta(k_1-k_2+k_3-k_4,G) \Big[\langle c_{d,s}^\dagger(k_1) c_{d,s}(k_2) \rangle c_{p_x,s^{\prime}}^\dagger(k_3) c_{p_x,s^{\prime}}(k_4)\cos\left(\frac{k_1-k_2}{2}\cdot \hat{x}\right) + \langle c_{p_x,s^{\prime}}^\dagger(k_3) c_{p_x,s^{\prime}}(k_4) \rangle c_{d,s}^\dagger(k_1) c_{d,s}(k_2)\cos\left(\frac{k_1-k_2}{2}\cdot \hat{x}\right)+ \langle c_{d,s}^\dagger(k_1) c_{d,s}(k_2) \rangle c_{p_y,s^{\prime}}^\dagger(k_3) c_{p_y,s^{\prime}}(k_4)\cos\left(\frac{k_1-k_2}{2}\cdot \hat{y}\right)+ \langle c_{p_y,s^{\prime}}^\dagger(k_3) c_{p_y,s^{\prime}}(k_4) \rangle c_{d,s}^\dagger(k_1) c_{d,s}(k_2)\cos\left(\frac{k_1-k_2}{2}\cdot \hat{y}\right) \Big]$

Since the cosine function is even, $\cos\left(\frac{k_1-k_2}{2}\cdot \hat{x}\right) = \cos\left(\frac{k_3-k_4}{2}\cdot \hat{x}\right)$ and $\cos\left(\frac{k_1-k_2}{2}\cdot \hat{y}\right) = \cos\left(\frac{k_3-k_4}{2}\cdot \hat{y}\right)$, we can simplify the third term in $\hat{H}^{int,HF,2}$ to:

$2V_{pd} \sum_{s, s^{\prime}} \frac{1}{N} \sum_{k_1,k_2,k_3,k_4} \sum_{G} \delta(k_1-k_2+k_3-k_4,G) \Big[\langle c_{d,s}^\dagger(k_1) c_{d,s}(k_2) \rangle c_{p_x,s^{\prime}}^\dagger(k_3) c_{p_x,s^{\prime}}(k_4)\cos\left(\frac{k_1-k_2}{2}\cdot \hat{x}\right) + \langle c_{p_x,s^{\prime}}^\dagger(k_3) c_{p_x,s^{\prime}}(k_4) \rangle c_{d,s}^\dagger(k_1) c_{d,s}(k_2)\cos\left(\frac{k_1-k_2}{2}\cdot \hat{x}\right)+ \langle c_{d,s}^\dagger(k_1) c_{d,s}(k_2) \rangle c_{p_y,s^{\prime}}^\dagger(k_3) c_{p_y,s^{\prime}}(k_4)\cos\left(\frac{k_1-k_2}{2}\cdot \hat{y}\right)+ \langle c_{p_y,s^{\prime}}^\dagger(k_3) c_{p_y,s^{\prime}}(k_4) \rangle c_{d,s}^\dagger(k_1) c_{d,s}(k_2)\cos\left(\frac{k_1-k_2}{2}\cdot \hat{y}\right) \Big]$

This is the simplified third term in $\hat{H}^{int,HF,2}$.

## Swap the index only  
**Prompt:**    
You will be instructed to simplify the quadratic term the fourth term in $\hat{H}^{int,HF,2}$ through relabeling the index.  
The logic is that the expected value ($\langle c_{\alpha_1,s_1}^\dagger(k_1) c_{\alpha_1,s_1}(k_2) \rangle$) in the first Hartree term ($\langle c_{\alpha_1,s_1}^\dagger(k_1) c_{\alpha_1,s_1}(k_2) \rangle c_{\alpha_2,s_2}^\dagger(k_3) c_{\alpha_2,s_2}(k_4)$) has the same form as the quadratic operators in the second Hartree term ($\langle c_{\alpha_2,s_2}^\dagger(k_3) c_{\alpha_2,s_2}(k_4)\rangle c_{\alpha_1,s_1}^\dagger(k_1) c_{\alpha_1,s_1}(k_2)$), and vice versa. The same applies to the Fock term.  
Namely, a replacement of $k_1 \leftrightarrow k_3$ and $k_2 \leftrightarrow k_4$ is applied to ONLY the second Hartree or Fock term. You should not swap any index that is not in the summation, which includes $\uparrow$ and $\downarrow$.  
This means, if you relabel the index by swapping the index in the "expected value" and "quadratic operators" in the second Hartree or Fock term, you can make the second Hartree or Fock term look identical to the first Hartree or Fock term, as long as $V(q)=V(-q)$, which is naturally satisfied in Coulomb interaction. You should follow the EXAMPLE below to simplify it through relabeling the index.  
You should recall that the fourth term in $\hat{H}^{int,HF,2}$ is $\frac{V_{pp}}{N} \sum_{s, s^{\prime}} \sum_{\sigma_x, \sigma_y} \sum_{k_1, k_2, k_3, k_4} \sum_{G} \delta(k_2 - k_1 + k_4 - k_3, G) e^{-i (k_1 - k_2) \cdot \sigma_x\hat{x}/2 - i (k_3 - k_4) \cdot \sigma_y\hat{y}/2} \times \Big[ \langle c_{p_x,s}^\dagger(k_1) c_{p_x,s}(k_2) \rangle c_{p_y,s^{\prime}}^\dagger(k_3) c_{p_y,s^{\prime}}(k_4) + \langle c_{p_y,s^{\prime}}^\dagger(k_3) c_{p_y,s^{\prime}}(k_4) \rangle c_{p_x,s}^\dagger(k_1) c_{p_x,s}(k_2) \Big]$
Return the simplied the fourth term in $\hat{H}^{int,HF,2}$.

===  
EXAMPLE:  
Given a Hamiltonian $\hat{H}=\sum_{k_1,k_2, k_3, k_4,\sigma_1,\sigma_2,\sigma_3,\sigma_4} V(k_1-k_4) (\langle c_{d,\sigma_1}^\dagger(k_1) c_{d,\sigma_4}(k_4) \rangle c_{p,\sigma_2}^\dagger(k_2) c_{p,\sigma_3}(k_3) + \langle c_{p,\sigma_2}^\dagger(k_2) c_{d,\sigma_3}(k_3) \rangle c_{d,\sigma_1}^\dagger(k_1) c_{\sigma_4}(k_4) ) \delta_{k_1+k_2,k_3+k_4}$, where $V(q)=V(-q)$.  
In the second term, we relabel the index to swap the index in expected value and the index in quadratic operators, namely, $\sigma_1 \leftrightarrow \sigma_2$, $\sigma_3 \leftrightarrow \sigma_4$, $k_1 \leftrightarrow k_2$, $k_3 \leftrightarrow k_4$. Important: $d$ and $p$ cannot be swapped because they are not indices in the summation.  
After the replacement, the second term becomes $\sum_{k_1,k_2, k_3, k_4,\sigma_1,\sigma_2,\sigma_3,\sigma_4} V(k_2-k_3) \langle c_{p,\sigma_1}^\dagger(k_1) c_{p,\sigma_4}(k_4) \rangle c_{d,\sigma_2}^\dagger(k_2) c_{d,\sigma_3}(k_3) \delta_{k_4+k_3,k_2+k_1}$.  
Note that the Kronecker dirac function $\delta_{k_4+k_3,k_2+k_1}$ implies $k_1+k_2=k_3+k_4$, i.e., $k_2-k_3=k_4-k_1$. Thus, the second term simplifies to $\sum_{k_1,k_2, k_3, k_4,\sigma_1,\sigma_2,\sigma_3,\sigma_4} V(k_4-k_1) \langle c_{p,\sigma_1}^\dagger(k_1) c_{p,\sigma_4}(k_4) \rangle c_{d,\sigma_2}^\dagger(k_2) c_{d,\sigma_3}(k_3) \delta_{k_4+k_3,k_2+k_1}$.
Because $V(q)=V(-q)$, meaning $V(k_4-k_1)=V(k_1-k_4)$, the second term further simplifies to $\sum_{k_1,k_2, k_3, k_4,\sigma_1,\sigma_2,\sigma_3,\sigma_4} V(k_1-k_4) \langle c_{p,\sigma_1}^\dagger(k_1) c_{p,\sigma_4}(k_4) \rangle c_{d,\sigma_2}^\dagger(k_2) c_{d,\sigma_3}(k_3) \delta_{k_4+k_3,k_2+k_1}$.   
Finally, we have the simplified Hamiltonian as  $\hat{H}=\sum_{k_1,k_2, k_3, k_4,\sigma_1,\sigma_2,\sigma_3,\sigma_4} V(k_1-k_4) (\langle c_{d,\sigma_1}^\dagger(k_1) c_{d,\sigma_4}(k_4) \rangle c_{p,\sigma_2}^\dagger(k_2) c_{p,\sigma_3}(k_3) + \langle c_{p,\sigma_1}^\dagger(k_1) c_{p,\sigma_4}(k_4) \rangle c_{d,\sigma_2}^\dagger(k_2) c_{d,\sigma_3}(k_3)) \delta_{k_4+k_3,k_2+k_1}$.

**Completion:**    
Following the example, we can simplify the fourth term in $\hat{H}^{int,HF,2}$ by relabeling the indices in the second Hartree term. We swap $k_1 \leftrightarrow k_3$ and $k_2 \leftrightarrow k_4$ in the second term, which gives us:

$\langle c_{p_y,s^{\prime}}^\dagger(k_1) c_{p_y,s^{\prime}}(k_2) \rangle c_{p_x,s}^\dagger(k_3) c_{p_x,s}(k_4)$

The Kronecker delta function $\delta(k_2 - k_1 + k_4 - k_3, G)$ implies $k_1 + k_3 = k_2 + k_4$, i.e., $k_3 - k_1 = k_2 - k_4$. Thus, the exponential term becomes:

$e^{-i (k_3 - k_1) \cdot \sigma_x\hat{x}/2 - i (k_2 - k_4) \cdot \sigma_y\hat{y}/2}$

Because $V(q)=V(-q)$, the fourth term in $\hat{H}^{int,HF,2}$ simplifies to:

$\frac{V_{pp}}{N} \sum_{s, s^{\prime}} \sum_{\sigma_x, \sigma_y} \sum_{k_1, k_2, k_3, k_4} \sum_{G} \delta(k_2 - k_1 + k_4 - k_3, G) e^{-i (k_3 - k_1) \cdot \sigma_x\hat{x}/2 - i (k_2 - k_4) \cdot \sigma_y\hat{y}/2} \times \Big[ \langle c_{p_x,s}^\dagger(k_1) c_{p_x,s}(k_2) \rangle c_{p_y,s^{\prime}}^\dagger(k_3) c_{p_y,s^{\prime}}(k_4) + \langle c_{p_y,s^{\prime}}^\dagger(k_1) c_{p_y,s^{\prime}}(k_2) \rangle c_{p_x,s}^\dagger(k_3) c_{p_x,s}(k_4) \Big]$

This is the simplified fourth term in $\hat{H}^{int,HF,2}$.

## Reduce momentum in Hartree term (momentum in BZ)  
**Prompt:**    
You will be instructed to simplify the Hartree term, the first term in $\hat{H}^{int,Hartree,2}$, by reducing the momentum inside the expected value $\langle c_{\alpha_i,s_i}^\dagger(k_i) c_{\alpha_j,s_j}(k_j) \rangle$.  
The expected value $\langle c_{\alpha_i,s_i}^\dagger(k_i) c_{\alpha_j,s_j}(k_j) \rangle$ is only nonzero when the two momenta $k_i,k_j$ are the same, namely, $\langle c_{\alpha_i,s_i}^\dagger(k_i) c_{\alpha_j,s_j}(k_j) \rangle=\langle c_{\alpha_i,s_i}^\dagger(k_i) c_{\alpha_j,s_j}(k_j) \rangle \delta_{k_i,k_j}$.  
You should use the property of Kronecker delta function $\delta_{k_i,k_j}$ to reduce one momentum $k_i$.
Once you reduce one momentum inside the expected value $\langle\dots\rangle$. You will also notice the total momentum conservation will reduce another momentum in the quadratic term. Therefore, you should end up with only two momenta left in the summation.  
You should follow the EXAMPLE below to reduce one momentum in the Hartree term, and another momentum in the quadratic term.  
You should recall that the first term in $\hat{H}^{int,Hartree,2} = \frac{U_d}{N} \sum_{k_1, k_2, k_3, k_4} \sum_{G} \delta(k_1-k_2+k_3-k_4,G) \Big[ \langle c_{d,\uparrow}^\dagger(k_1) c_{d,\uparrow}(k_2) \rangle c_{d,\downarrow}^\dagger(k_3) c_{d,\downarrow}(k_4) + \langle c_{d,\downarrow}^\dagger(k_1) c_{d,\downarrow}(k_2) \rangle c_{d,\uparrow}^\dagger(k_3) c_{d,\uparrow}(k_4) \Big]$.  
Return the final simplified Hartree term the first term in $\hat{H}^{int,Hartree,2}$.

===  
EXAMPLE:  
Given a Hamiltonian where the Hartree term $\hat{H}^{Hartree}=\sum_{k_1,k_2, k_3, k_4,s_1,s_2} V(k_1-k_4) \langle c_{s_1}^\dagger(k_1) c_{s_1}(k_4) \rangle c_{s_2}^\dagger(k_2) c_{s_2}(k_3) \sum_{G}\delta_{k_1+k_2-k_3-k_4,G}$, where $k_i$ is the momentum inside first Brilloun zone, $G$ is the reciprocal lattice vectors, and $s_i$ is a certain index for the degree of freedom other than momentum.   
Inside the expected value, we realize $\langle c_{s_1}^\dagger(k_1) c_{s_1}(k_4) \rangle$ is nonzero only when $k_1=k_4$, i.e., $\langle c_{s_1}^\dagger(k_1) c_{s_1}(k_4) \rangle=\langle c_{s_1}^\dagger(k_1) c_{s_1}(k_4) \rangle\delta_{k_1,k_4}$.  
Thus, the Hartree term becomes $\sum_{k_1,k_2, k_3, k_4,s_1,s_2} V(k_1-k_4) \langle c_{s_1}^\dagger(k_1) c_{s_1}(k_4) \rangle \delta_{k_1,k_4} c_{s_2}^\dagger(k_2) c_{s_2}(k_3) \sum_{G}\delta_{k_1+k_2-k_3-k_4,G}$.  
Use the property of Kronecker delta function $\delta_{k_1,k_4}$ to sum over $k_4$, we have $\sum_{k_1, k_2, k_3,s_1,s_2} V(k_1-k_1) \langle c_{s_1}^\dagger(k_1) c_{s_1}(k_1) \rangle c_{s_2}^\dagger(k_2) c_{s_2}(k_3) \sum_{G}\delta_{k_1+k_2-k_3-k_1,G}=\sum_{k_1, k_2, k_3,s_1,s_2} V(0) \langle c_{s_1}^\dagger(k_1) c_{s_1}(k_1) \rangle c_{s_2}^\dagger(k_2) c_{s_2}(k_3) \sum_{G}\delta_{k_2-k_3,G}$.  
We can further simplify $\sum_{G}\delta_{k_2-k_3,G}$. Because $k_i$ is momentum inside first Brilloun zone, and the difference between $k_2$ and $k_3$ cannot exceed the first shell of reciprocal lattice vector, which means $G$ can only take the value of the origin point in the reciprocal lattice, therefore, $\sum_{G}\delta_{k_2-k_3,G}=\delta_{k_2-k_3,0}$.   
Thus, the Hartree term simplifies to $\sum_{k_1, k_2, k_3,s_1,s_2} V(0) \langle c_{s_1}^\dagger(k_1) c_{s_1}(k_1) \rangle c_{s_2}^\dagger(k_2) c_{s_2}(k_3) \delta_{k_2-k_3,0}=\sum_{k_1, k_2,s_1,s_2} V(0) \langle c_{s_1}^\dagger(k_1) c_{s_1}(k_1) \rangle c_{s_2}^\dagger(k_2) c_{s_2}(k_2)$.  
Therefore, the final simplified Hartree term after reducing one momentum is $\hat{H}^{Hartree}=\sum_{k_1, k_2,s_1,s_2} V(0) \langle c_{s_1}^\dagger(k_1) c_{s_1}(k_1) \rangle c_{s_2}^\dagger(k_2) c_{s_2}(k_2)$

**Completion:**    
Following the example, we can simplify the first term in $\hat{H}^{int,Hartree,2}$ by reducing the momentum inside the expected value $\langle c_{\alpha_i,s_i}^\dagger(k_i) c_{\alpha_j,s_j}(k_j) \rangle$. 

We know that $\langle c_{\alpha_i,s_i}^\dagger(k_i) c_{\alpha_j,s_j}(k_j) \rangle$ is nonzero only when $k_i=k_j$, i.e., $\langle c_{\alpha_i,s_i}^\dagger(k_i) c_{\alpha_j,s_j}(k_j) \rangle=\langle c_{\alpha_i,s_i}^\dagger(k_i) c_{\alpha_j,s_j}(k_j) \rangle \delta_{k_i,k_j}$. 

Applying this to the first term in $\hat{H}^{int,Hartree,2}$, we get:

$\frac{U_d}{N} \sum_{k_1, k_2, k_3, k_4} \sum_{G} \delta(k_1-k_2+k_3-k_4,G) \Big[ \langle c_{d,\uparrow}^\dagger(k_1) c_{d,\uparrow}(k_2) \rangle \delta_{k_1,k_2} c_{d,\downarrow}^\dagger(k_3) c_{d,\downarrow}(k_4) + \langle c_{d,\downarrow}^\dagger(k_1) c_{d,\downarrow}(k_2) \rangle \delta_{k_1,k_2} c_{d,\uparrow}^\dagger(k_3) c_{d,\uparrow}(k_4) \Big]$.

Using the property of Kronecker delta function $\delta_{k_1,k_2}$ to sum over $k_2$, we get:

$\frac{U_d}{N} \sum_{k_1, k_3, k_4} \sum_{G} \delta(k_1+k_3-k_4,G) \Big[ \langle c_{d,\uparrow}^\dagger(k_1) c_{d,\uparrow}(k_1) \rangle c_{d,\downarrow}^\dagger(k_3) c_{d,\downarrow}(k_4) + \langle c_{d,\downarrow}^\dagger(k_1) c_{d,\downarrow}(k_1) \rangle c_{d,\uparrow}^\dagger(k_3) c_{d,\uparrow}(k_4) \Big]$.

The total momentum conservation $\delta(k_1+k_3-k_4,G)$ implies $k_1 + k_3 = k_4$, so we can further reduce the momentum $k_4$:

$\frac{U_d}{N} \sum_{k_1, k_3} \Big[ \langle c_{d,\uparrow}^\dagger(k_1) c_{d,\uparrow}(k_1) \rangle c_{d,\downarrow}^\dagger(k_3) c_{d,\downarrow}(k_1+k_3) + \langle c_{d,\downarrow}^\dagger(k_1) c_{d,\downarrow}(k_1) \rangle c_{d,\uparrow}^\dagger(k_3) c_{d,\uparrow}(k_1+k_3) \Big]$.

Therefore, the final simplified Hartree term, the first term in $\hat{H}^{int,Hartree,2}$, is:

$\frac{U_d}{N} \sum_{k_1, k_3} \Big[ \langle c_{d,\uparrow}^\dagger(k_1) c_{d,\uparrow}(k_1) \rangle c_{d,\downarrow}^\dagger(k_3) c_{d,\downarrow}(k_1+k_3) + \langle c_{d,\downarrow}^\dagger(k_1) c_{d,\downarrow}(k_1) \rangle c_{d,\uparrow}^\dagger(k_3) c_{d,\uparrow}(k_1+k_3) \Big]$.

## Reduce momentum in Hartree term (momentum in BZ)  
**Prompt:**    
You will be instructed to simplify the Hartree term, the second term in $\hat{H}^{int,Hartree,2}$, by reducing the momentum inside the expected value $\langle c_{\alpha_i,s_i}^\dagger(k_i) c_{\alpha_j,s_j}(k_j) \rangle$.  
The expected value $\langle c_{\alpha_i,s_i}^\dagger(k_i) c_{\alpha_j,s_j}(k_j) \rangle$ is only nonzero when the two momenta $k_i,k_j$ are the same, namely, $\langle c_{\alpha_i,s_i}^\dagger(k_i) c_{\alpha_j,s_j}(k_j) \rangle=\langle c_{\alpha_i,s_i}^\dagger(k_i) c_{\alpha_j,s_j}(k_j) \rangle \delta_{k_i,k_j}$.  
You should use the property of Kronecker delta function $\delta_{k_i,k_j}$ to reduce one momentum $k_i$.
Once you reduce one momentum inside the expected value $\langle\dots\rangle$. You will also notice the total momentum conservation will reduce another momentum in the quadratic term. Therefore, you should end up with only two momenta left in the summation.  
You should follow the EXAMPLE below to reduce one momentum in the Hartree term, and another momentum in the quadratic term.  
You should recall that the second term in $\hat{H}^{int,Hartree,2} = \frac{U_p}{2N} \sum_{k_1,k_2,k_3,k_4} \sum_{G} \delta(k_1-k_2+k_3-k_4,G) \Big\{ \langle c_{p_x,\uparrow}^\dagger(k_1) c_{p_x,\uparrow}(k_2) \rangle c_{p_x,\downarrow}^\dagger(k_3) c_{p_x,\downarrow}(k_4)+ \langle c_{p_x,\downarrow}^\dagger(k_1) c_{p_x,\downarrow}(k_2) \rangle c_{p_x,\uparrow}^\dagger(k_3) c_{p_x,\uparrow}(k_4)+ \langle c_{p_y,\uparrow}^\dagger(k_1) c_{p_y,\uparrow}(k_2) \rangle c_{p_y,\downarrow}^\dagger(k_3) c_{p_y,\downarrow}(k_4)+ \langle c_{p_y,\downarrow}^\dagger(k_1) c_{p_y,\downarrow}(k_2) \rangle c_{p_y,\uparrow}^\dagger(k_3) c_{p_y,\uparrow}(k_4) \Big\}$.  
Return the final simplified Hartree term the second term in $\hat{H}^{int,Hartree,2}$.

===  
EXAMPLE:  
Given a Hamiltonian where the Hartree term $\hat{H}^{Hartree}=\sum_{k_1,k_2, k_3, k_4,s_1,s_2} V(k_1-k_4) \langle c_{s_1}^\dagger(k_1) c_{s_1}(k_4) \rangle c_{s_2}^\dagger(k_2) c_{s_2}(k_3) \sum_{G}\delta_{k_1+k_2-k_3-k_4,G}$, where $k_i$ is the momentum inside first Brilloun zone, $G$ is the reciprocal lattice vectors, and $s_i$ is a certain index for the degree of freedom other than momentum.   
Inside the expected value, we realize $\langle c_{s_1}^\dagger(k_1) c_{s_1}(k_4) \rangle$ is nonzero only when $k_1=k_4$, i.e., $\langle c_{s_1}^\dagger(k_1) c_{s_1}(k_4) \rangle=\langle c_{s_1}^\dagger(k_1) c_{s_1}(k_4) \rangle\delta_{k_1,k_4}$.  
Thus, the Hartree term becomes $\sum_{k_1,k_2, k_3, k_4,s_1,s_2} V(k_1-k_4) \langle c_{s_1}^\dagger(k_1) c_{s_1}(k_4) \rangle \delta_{k_1,k_4} c_{s_2}^\dagger(k_2) c_{s_2}(k_3) \sum_{G}\delta_{k_1+k_2-k_3-k_4,G}$.  
Use the property of Kronecker delta function $\delta_{k_1,k_4}$ to sum over $k_4$, we have $\sum_{k_1, k_2, k_3,s_1,s_2} V(k_1-k_1) \langle c_{s_1}^\dagger(k_1) c_{s_1}(k_1) \rangle c_{s_2}^\dagger(k_2) c_{s_2}(k_3) \sum_{G}\delta_{k_1+k_2-k_3-k_1,G}=\sum_{k_1, k_2, k_3,s_1,s_2} V(0) \langle c_{s_1}^\dagger(k_1) c_{s_1}(k_1) \rangle c_{s_2}^\dagger(k_2) c_{s_2}(k_3) \sum_{G}\delta_{k_2-k_3,G}$.  
We can further simplify $\sum_{G}\delta_{k_2-k_3,G}$. Because $k_i$ is momentum inside first Brilloun zone, and the difference between $k_2$ and $k_3$ cannot exceed the first shell of reciprocal lattice vector, which means $G$ can only take the value of the origin point in the reciprocal lattice, therefore, $\sum_{G}\delta_{k_2-k_3,G}=\delta_{k_2-k_3,0}$.   
Thus, the Hartree term simplifies to $\sum_{k_1, k_2, k_3,s_1,s_2} V(0) \langle c_{s_1}^\dagger(k_1) c_{s_1}(k_1) \rangle c_{s_2}^\dagger(k_2) c_{s_2}(k_3) \delta_{k_2-k_3,0}=\sum_{k_1, k_2,s_1,s_2} V(0) \langle c_{s_1}^\dagger(k_1) c_{s_1}(k_1) \rangle c_{s_2}^\dagger(k_2) c_{s_2}(k_2)$.  
Therefore, the final simplified Hartree term after reducing one momentum is $\hat{H}^{Hartree}=\sum_{k_1, k_2,s_1,s_2} V(0) \langle c_{s_1}^\dagger(k_1) c_{s_1}(k_1) \rangle c_{s_2}^\dagger(k_2) c_{s_2}(k_2)$

**Completion:**    
To simplify the Hartree term, the second term in $\hat{H}^{int,Hartree,2}$, we first apply the property of the expected value $\langle c_{\alpha_i,s_i}^\dagger(k_i) c_{\alpha_j,s_j}(k_j) \rangle$ being nonzero only when $k_i=k_j$. This gives us:

$\frac{U_p}{2N} \sum_{k_1,k_2,k_3,k_4} \sum_{G} \delta(k_1-k_2+k_3-k_4,G) \Big\{ \langle c_{p_x,\uparrow}^\dagger(k_1) c_{p_x,\uparrow}(k_2) \rangle \delta_{k_1,k_2} c_{p_x,\downarrow}^\dagger(k_3) c_{p_x,\downarrow}(k_4)+ \langle c_{p_x,\downarrow}^\dagger(k_1) c_{p_x,\downarrow}(k_2) \rangle \delta_{k_1,k_2} c_{p_x,\uparrow}^\dagger(k_3) c_{p_x,\uparrow}(k_4)+ \langle c_{p_y,\uparrow}^\dagger(k_1) c_{p_y,\uparrow}(k_2) \rangle \delta_{k_1,k_2} c_{p_y,\downarrow}^\dagger(k_3) c_{p_y,\downarrow}(k_4)+ \langle c_{p_y,\downarrow}^\dagger(k_1) c_{p_y,\downarrow}(k_2) \rangle \delta_{k_1,k_2} c_{p_y,\uparrow}^\dagger(k_3) c_{p_y,\uparrow}(k_4) \Big\}$.

Next, we use the property of the Kronecker delta function $\delta_{k_1,k_2}$ to sum over $k_2$, which gives us:

$\frac{U_p}{2N} \sum_{k_1,k_3,k_4} \sum_{G} \delta(k_1+k_3-k_4,G) \Big\{ \langle c_{p_x,\uparrow}^\dagger(k_1) c_{p_x,\uparrow}(k_1) \rangle c_{p_x,\downarrow}^\dagger(k_3) c_{p_x,\downarrow}(k_4)+ \langle c_{p_x,\downarrow}^\dagger(k_1) c_{p_x,\downarrow}(k_1) \rangle c_{p_x,\uparrow}^\dagger(k_3) c_{p_x,\uparrow}(k_4)+ \langle c_{p_y,\uparrow}^\dagger(k_1) c_{p_y,\uparrow}(k_1) \rangle c_{p_y,\downarrow}^\dagger(k_3) c_{p_y,\downarrow}(k_4)+ \langle c_{p_y,\downarrow}^\dagger(k_1) c_{p_y,\downarrow}(k_1) \rangle c_{p_y,\uparrow}^\dagger(k_3) c_{p_y,\uparrow}(k_4) \Big\}$.

The total momentum conservation $\delta(k_1+k_3-k_4,G)$ implies $k_1 + k_3 = k_4$, so we can further reduce the momentum $k_4$:

$\frac{U_p}{2N} \sum_{k_1,k_3} \Big\{ \langle c_{p_x,\uparrow}^\dagger(k_1) c_{p_x,\uparrow}(k_1) \rangle c_{p_x,\downarrow}^\dagger(k_3) c_{p_x,\downarrow}(k_1+k_3)+ \langle c_{p_x,\downarrow}^\dagger(k_1) c_{p_x,\downarrow}(k_1) \rangle c_{p_x,\uparrow}^\dagger(k_3) c_{p_x,\uparrow}(k_1+k_3)+ \langle c_{p_y,\uparrow}^\dagger(k_1) c_{p_y,\uparrow}(k_1) \rangle c_{p_y,\downarrow}^\dagger(k_3) c_{p_y,\downarrow}(k_1+k_3)+ \langle c_{p_y,\downarrow}^\dagger(k_1) c_{p_y,\downarrow}(k_1) \rangle c_{p_y,\uparrow}^\dagger(k_3) c_{p_y,\uparrow}(k_1+k_3) \Big\}$.

Therefore, the final simplified Hartree term, the second term in $\hat{H}^{int,Hartree,2}$, is:

$\frac{U_p}{2N} \sum_{k_1,k_3} \Big\{ \langle c_{p_x,\uparrow}^\dagger(k_1) c_{p_x,\uparrow}(k_1) \rangle c_{p_x,\downarrow}^\dagger(k_3) c_{p_x,\downarrow}(k_1+k_3)+ \langle c_{p_x,\downarrow}^\dagger(k_1) c_{p_x,\downarrow}(k_1) \rangle c_{p_x,\uparrow}^\dagger(k_3) c_{p_x,\uparrow}(k_1+k_3)+ \langle c_{p_y,\uparrow}^\dagger(k_1) c_{p_y,\uparrow}(k_1) \rangle c_{p_y,\downarrow}^\dagger(k_3) c_{p_y,\downarrow}(k_1+k_3)+ \langle c_{p_y,\downarrow}^\dagger(k_1) c_{p_y,\downarrow}(k_1) \rangle c_{p_y,\uparrow}^\dagger(k_3) c_{p_y,\uparrow}(k_1+k_3) \Big\}$.

## Reduce momentum in Hartree term (momentum in BZ)  
**Prompt:**    
You will be instructed to simplify the Hartree term, the third term in $\hat{H}^{int,Hartree,2}$, by reducing the momentum inside the expected value $\langle c_{\alpha_i,s_i}^\dagger(k_i) c_{\alpha_j,s_j}(k_j) \rangle$.  
The expected value $\langle c_{\alpha_i,s_i}^\dagger(k_i) c_{\alpha_j,s_j}(k_j) \rangle$ is only nonzero when the two momenta $k_i,k_j$ are the same, namely, $\langle c_{\alpha_i,s_i}^\dagger(k_i) c_{\alpha_j,s_j}(k_j) \rangle=\langle c_{\alpha_i,s_i}^\dagger(k_i) c_{\alpha_j,s_j}(k_j) \rangle \delta_{k_i,k_j}$.  
You should use the property of Kronecker delta function $\delta_{k_i,k_j}$ to reduce one momentum $k_i$.
Once you reduce one momentum inside the expected value $\langle\dots\rangle$. You will also notice the total momentum conservation will reduce another momentum in the quadratic term. Therefore, you should end up with only two momenta left in the summation.  
You should follow the EXAMPLE below to reduce one momentum in the Hartree term, and another momentum in the quadratic term.  
You should recall that the third term in $\hat{H}^{int,Hartree,2} = 2V_{pd} \sum_{s, s^{\prime}} \frac{1}{N} \sum_{k_1,k_2,k_3,k_4} \sum_{G} \delta(k_1-k_2+k_3-k_4,G) \Big[\langle c_{d,s}^\dagger(k_1) c_{d,s}(k_2) \rangle c_{p_x,s^{\prime}}^\dagger(k_3) c_{p_x,s^{\prime}}(k_4)\cos\left(\frac{k_3-k_4}{2}\cdot \hat{x}\right) + \langle c_{p_x,s}^\dagger(k_1) c_{p_x,s}(k_2) \rangle c_{d,s^{\prime}}^\dagger(k_3) c_{d,s^{\prime}}(k_4)\cos\left(\frac{k_1-k_2}{2}\cdot \hat{x}\right)+ \langle c_{d,s}^\dagger(k_1) c_{d,s}(k_2) \rangle c_{p_y,s^{\prime}}^\dagger(k_3) c_{p_y,s^{\prime}}(k_4)\cos\left(\frac{k_3-k_4}{2}\cdot \hat{y}\right)+ \langle c_{p_y,s}^\dagger(k_1) c_{p_y,s}(k_2) \rangle c_{d,s^{\prime}}^\dagger(k_3) c_{d,s^{\prime}}(k_4)\cos\left(\frac{k_1-k_2}{2}\cdot \hat{y}\right) \Big].  
Return the final simplified Hartree term the third term in $\hat{H}^{int,Hartree,2}$.

===  
EXAMPLE:  
Given a Hamiltonian where the Hartree term $\hat{H}^{Hartree}=\sum_{k_1,k_2, k_3, k_4,s_1,s_2} V(k_1-k_4) \langle c_{s_1}^\dagger(k_1) c_{s_1}(k_4) \rangle c_{s_2}^\dagger(k_2) c_{s_2}(k_3) \sum_{G}\delta_{k_1+k_2-k_3-k_4,G}$, where $k_i$ is the momentum inside first Brilloun zone, $G$ is the reciprocal lattice vectors, and $s_i$ is a certain index for the degree of freedom other than momentum.   
Inside the expected value, we realize $\langle c_{s_1}^\dagger(k_1) c_{s_1}(k_4) \rangle$ is nonzero only when $k_1=k_4$, i.e., $\langle c_{s_1}^\dagger(k_1) c_{s_1}(k_4) \rangle=\langle c_{s_1}^\dagger(k_1) c_{s_1}(k_4) \rangle\delta_{k_1,k_4}$.  
Thus, the Hartree term becomes $\sum_{k_1,k_2, k_3, k_4,s_1,s_2} V(k_1-k_4) \langle c_{s_1}^\dagger(k_1) c_{s_1}(k_4) \rangle \delta_{k_1,k_4} c_{s_2}^\dagger(k_2) c_{s_2}(k_3) \sum_{G}\delta_{k_1+k_2-k_3-k_4,G}$.  
Use the property of Kronecker delta function $\delta_{k_1,k_4}$ to sum over $k_4$, we have $\sum_{k_1, k_2, k_3,s_1,s_2} V(k_1-k_1) \langle c_{s_1}^\dagger(k_1) c_{s_1}(k_1) \rangle c_{s_2}^\dagger(k_2) c_{s_2}(k_3) \sum_{G}\delta_{k_1+k_2-k_3-k_1,G}=\sum_{k_1, k_2, k_3,s_1,s_2} V(0) \langle c_{s_1}^\dagger(k_1) c_{s_1}(k_1) \rangle c_{s_2}^\dagger(k_2) c_{s_2}(k_3) \sum_{G}\delta_{k_2-k_3,G}$.  
We can further simplify $\sum_{G}\delta_{k_2-k_3,G}$. Because $k_i$ is momentum inside first Brilloun zone, and the difference between $k_2$ and $k_3$ cannot exceed the first shell of reciprocal lattice vector, which means $G$ can only take the value of the origin point in the reciprocal lattice, therefore, $\sum_{G}\delta_{k_2-k_3,G}=\delta_{k_2-k_3,0}$.   
Thus, the Hartree term simplifies to $\sum_{k_1, k_2, k_3,s_1,s_2} V(0) \langle c_{s_1}^\dagger(k_1) c_{s_1}(k_1) \rangle c_{s_2}^\dagger(k_2) c_{s_2}(k_3) \delta_{k_2-k_3,0}=\sum_{k_1, k_2,s_1,s_2} V(0) \langle c_{s_1}^\dagger(k_1) c_{s_1}(k_1) \rangle c_{s_2}^\dagger(k_2) c_{s_2}(k_2)$.  
Therefore, the final simplified Hartree term after reducing one momentum is $\hat{H}^{Hartree}=\sum_{k_1, k_2,s_1,s_2} V(0) \langle c_{s_1}^\dagger(k_1) c_{s_1}(k_1) \rangle c_{s_2}^\dagger(k_2) c_{s_2}(k_2)$

**Completion:**    
To simplify the third term in $\hat{H}^{int,Hartree,2}$, we first note that the expected value $\langle c_{\alpha_i,s_i}^\dagger(k_i) c_{\alpha_j,s_j}(k_j) \rangle$ is nonzero only when $k_i=k_j$, i.e., $\langle c_{\alpha_i,s_i}^\dagger(k_i) c_{\alpha_j,s_j}(k_j) \rangle=\langle c_{\alpha_i,s_i}^\dagger(k_i) c_{\alpha_j,s_j}(k_j) \rangle \delta_{k_i,k_j}$. 

Applying this to the third term in $\hat{H}^{int,Hartree,2}$, we get:

$2V_{pd} \sum_{s, s^{\prime}} \frac{1}{N} \sum_{k_1,k_2,k_3,k_4} \sum_{G} \delta(k_1-k_2+k_3-k_4,G) \Big[\langle c_{d,s}^\dagger(k_1) c_{d,s}(k_2) \rangle \delta_{k_1,k_2} c_{p_x,s^{\prime}}^\dagger(k_3) c_{p_x,s^{\prime}}(k_4)\cos\left(\frac{k_3-k_4}{2}\cdot \hat{x}\right) + \langle c_{p_x,s}^\dagger(k_1) c_{p_x,s}(k_2) \rangle \delta_{k_1,k_2} c_{d,s^{\prime}}^\dagger(k_3) c_{d,s^{\prime}}(k_4)\cos\left(\frac{k_1-k_2}{2}\cdot \hat{x}\right)+ \langle c_{d,s}^\dagger(k_1) c_{d,s}(k_2) \rangle \delta_{k_1,k_2} c_{p_y,s^{\prime}}^\dagger(k_3) c_{p_y,s^{\prime}}(k_4)\cos\left(\frac{k_3-k_4}{2}\cdot \hat{y}\right)+ \langle c_{p_y,s}^\dagger(k_1) c_{p_y,s}(k_2) \rangle \delta_{k_1,k_2} c_{d,s^{\prime}}^\dagger(k_3) c_{d,s^{\prime}}(k_4)\cos\left(\frac{k_1-k_2}{2}\cdot \hat{y}\right) \Big]$.

Using the property of Kronecker delta function $\delta_{k_1,k_2}$ to sum over $k_2$, we get:

$2V_{pd} \sum_{s, s^{\prime}} \frac{1}{N} \sum_{k_1,k_3,k_4} \sum_{G} \delta(k_1+k_3-k_4,G) \Big[\langle c_{d,s}^\dagger(k_1) c_{d,s}(k_1) \rangle c_{p_x,s^{\prime}}^\dagger(k_3) c_{p_x,s^{\prime}}(k_4)\cos\left(\frac{k_3-k_4}{2}\cdot \hat{x}\right) + \langle c_{p_x,s}^\dagger(k_1) c_{p_x,s}(k_1) \rangle c_{d,s^{\prime}}^\dagger(k_3) c_{d,s^{\prime}}(k_4)\cos\left(\frac{k_1-k_1}{2}\cdot \hat{x}\right)+ \langle c_{d,s}^\dagger(k_1) c_{d,s}(k_1) \rangle c_{p_y,s^{\prime}}^\dagger(k_3) c_{p_y,s^{\prime}}(k_4)\cos\left(\frac{k_3-k_4}{2}\cdot \hat{y}\right)+ \langle c_{p_y,s}^\dagger(k_1) c_{p_y,s}(k_1) \rangle c_{d,s^{\prime}}^\dagger(k_3) c_{d,s^{\prime}}(k_4)\cos\left(\frac{k_1-k_1}{2}\cdot \hat{y}\right) \Big]$.

The total momentum conservation $\delta(k_1+k_3-k_4,G)$ implies $k_1 + k_3 = k_4$, so we can further reduce the momentum $k_4$:

$2V_{pd} \sum_{s, s^{\prime}} \frac{1}{N} \sum_{k_1,k_3} \Big[\langle c_{d,s}^\dagger(k_1) c_{d,s}(k_1) \rangle c_{p_x,s^{\prime}}^\dagger(k_3) c_{p_x,s^{\prime}}(k_1+k_3)\cos\left(\frac{k_3-(k_1+k_3)}{2}\cdot \hat{x}\right) + \langle c_{p_x,s}^\dagger(k_1) c_{p_x,s}(k_1) \rangle c_{d,s^{\prime}}^\dagger(k_3) c_{d,s^{\prime}}(k_1+k_3)\cos\left(\frac{k_1-k_1}{2}\cdot \hat{x}\right)+ \langle c_{d,s}^\dagger(k_1) c_{d,s}(k_1) \rangle c_{p_y,s^{\prime}}^\dagger(k_3) c_{p_y,s^{\prime}}(k_1+k_3)\cos\left(\frac{k_3-(k_1+k_3)}{2}\cdot \hat{y}\right)+ \langle c_{p_y,s}^\dagger(k_1) c_{p_y,s}(k_1) \rangle c_{d,s^{\prime}}^\dagger(k_3) c_{d,s^{\prime}}(k_1+k_3)\cos\left(\frac{k_1-k_1}{2}\cdot \hat{y}\right) \Big]$.

Simplifying the cosine terms, we get the final simplified third term in $\hat{H}^{int,Hartree,2}$:

$2V_{pd} \sum_{s, s^{\prime}} \frac{1}{N} \sum_{k_1,k_3} \Big[\langle c_{d,s}^\dagger(k_1) c_{d,s}(k_1) \rangle c_{p_x,s^{\prime}}^\dagger(k_3) c_{p_x,s^{\prime}}(k_1+k_3) + \langle c_{p_x,s}^\dagger(k_1) c_{p_x,s}(k_1) \rangle c_{d,s^{\prime}}^\dagger(k_3) c_{d,s^{\prime}}(k_1+k_3) + \langle c_{d,s}^\dagger(k_1) c_{d,s}(k_1) \rangle c_{p_y,s^{\prime}}^\dagger(k_3) c_{p_y,s^{\prime}}(k_1+k_3) + \langle c_{p_y,s}^\dagger(k_1) c_{p_y,s}(k_1) \rangle c_{d,s^{\prime}}^\dagger(k_3) c_{d,s^{\prime}}(k_1+k_3) \Big]$.

## Reduce momentum in Hartree term (momentum in BZ)  
**Prompt:**    
You will be instructed to simplify the Hartree term, the fourth term in $\hat{H}^{int,Hartree,2}$, by reducing the momentum inside the expected value $\langle c_{\alpha_i,s_i}^\dagger(k_i) c_{\alpha_j,s_j}(k_j) \rangle$.  
The expected value $\langle c_{\alpha_i,s_i}^\dagger(k_i) c_{\alpha_j,s_j}(k_j) \rangle$ is only nonzero when the two momenta $k_i,k_j$ are the same, namely, $\langle c_{\alpha_i,s_i}^\dagger(k_i) c_{\alpha_j,s_j}(k_j) \rangle=\langle c_{\alpha_i,s_i}^\dagger(k_i) c_{\alpha_j,s_j}(k_j) \rangle \delta_{k_i,k_j}$.  
You should use the property of Kronecker delta function $\delta_{k_i,k_j}$ to reduce one momentum $k_i$.
Once you reduce one momentum inside the expected value $\langle\dots\rangle$. You will also notice the total momentum conservation will reduce another momentum in the quadratic term. Therefore, you should end up with only two momenta left in the summation.  
You should follow the EXAMPLE below to reduce one momentum in the Hartree term, and another momentum in the quadratic term.  
You should recall that the fourth term in $\hat{H}^{int,Hartree,2} = \frac{V_{pp}}{N} \sum_{s, s^{\prime}} \sum_{\sigma_x, \sigma_y} \sum_{k_1, k_2, k_3, k_4} \sum_{G} \delta(k_2 - k_1 + k_4 - k_3, G) e^{-i (k_1 - k_2) \cdot \sigma_x\hat{x}/2 - i (k_3 - k_4) \cdot \sigma_y\hat{y}/2} \times \Big[ \langle c_{p_x,s}^\dagger(k_1) c_{p_x,s}(k_2) \rangle c_{p_y,s^{\prime}}^\dagger(k_3) c_{p_y,s^{\prime}}(k_4) + \langle c_{p_y,s}^\dagger(k_1) c_{p_y,s}(k_2) \rangle c_{p_x,s^{\prime}}^\dagger(k_3) c_{p_x,s^{\prime}}(k_4) \Big].  
Return the final simplified Hartree term the fourth term in $\hat{H}^{int,Hartree,2}$.

===  
EXAMPLE:  
Given a Hamiltonian where the Hartree term $\hat{H}^{Hartree}=\sum_{k_1,k_2, k_3, k_4,s_1,s_2} V(k_1-k_4) \langle c_{s_1}^\dagger(k_1) c_{s_1}(k_4) \rangle c_{s_2}^\dagger(k_2) c_{s_2}(k_3) \sum_{G}\delta_{k_1+k_2-k_3-k_4,G}$, where $k_i$ is the momentum inside first Brilloun zone, $G$ is the reciprocal lattice vectors, and $s_i$ is a certain index for the degree of freedom other than momentum.   
Inside the expected value, we realize $\langle c_{s_1}^\dagger(k_1) c_{s_1}(k_4) \rangle$ is nonzero only when $k_1=k_4$, i.e., $\langle c_{s_1}^\dagger(k_1) c_{s_1}(k_4) \rangle=\langle c_{s_1}^\dagger(k_1) c_{s_1}(k_4) \rangle\delta_{k_1,k_4}$.  
Thus, the Hartree term becomes $\sum_{k_1,k_2, k_3, k_4,s_1,s_2} V(k_1-k_4) \langle c_{s_1}^\dagger(k_1) c_{s_1}(k_4) \rangle \delta_{k_1,k_4} c_{s_2}^\dagger(k_2) c_{s_2}(k_3) \sum_{G}\delta_{k_1+k_2-k_3-k_4,G}$.  
Use the property of Kronecker delta function $\delta_{k_1,k_4}$ to sum over $k_4$, we have $\sum_{k_1, k_2, k_3,s_1,s_2} V(k_1-k_1) \langle c_{s_1}^\dagger(k_1) c_{s_1}(k_1) \rangle c_{s_2}^\dagger(k_2) c_{s_2}(k_3) \sum_{G}\delta_{k_1+k_2-k_3-k_1,G}=\sum_{k_1, k_2, k_3,s_1,s_2} V(0) \langle c_{s_1}^\dagger(k_1) c_{s_1}(k_1) \rangle c_{s_2}^\dagger(k_2) c_{s_2}(k_3) \sum_{G}\delta_{k_2-k_3,G}$.  
We can further simplify $\sum_{G}\delta_{k_2-k_3,G}$. Because $k_i$ is momentum inside first Brilloun zone, and the difference between $k_2$ and $k_3$ cannot exceed the first shell of reciprocal lattice vector, which means $G$ can only take the value of the origin point in the reciprocal lattice, therefore, $\sum_{G}\delta_{k_2-k_3,G}=\delta_{k_2-k_3,0}$.   
Thus, the Hartree term simplifies to $\sum_{k_1, k_2, k_3,s_1,s_2} V(0) \langle c_{s_1}^\dagger(k_1) c_{s_1}(k_1) \rangle c_{s_2}^\dagger(k_2) c_{s_2}(k_3) \delta_{k_2-k_3,0}=\sum_{k_1, k_2,s_1,s_2} V(0) \langle c_{s_1}^\dagger(k_1) c_{s_1}(k_1) \rangle c_{s_2}^\dagger(k_2) c_{s_2}(k_2)$.  
Therefore, the final simplified Hartree term after reducing one momentum is $\hat{H}^{Hartree}=\sum_{k_1, k_2,s_1,s_2} V(0) \langle c_{s_1}^\dagger(k_1) c_{s_1}(k_1) \rangle c_{s_2}^\dagger(k_2) c_{s_2}(k_2)$

**Completion:**    
Following the example, we can simplify the fourth term in $\hat{H}^{int,Hartree,2}$ by reducing the momentum inside the expected value $\langle c_{\alpha_i,s_i}^\dagger(k_i) c_{\alpha_j,s_j}(k_j) \rangle$. We know that $\langle c_{\alpha_i,s_i}^\dagger(k_i) c_{\alpha_j,s_j}(k_j) \rangle$ is nonzero only when $k_i=k_j$, i.e., $\langle c_{\alpha_i,s_i}^\dagger(k_i) c_{\alpha_j,s_j}(k_j) \rangle=\langle c_{\alpha_i,s_i}^\dagger(k_i) c_{\alpha_j,s_j}(k_j) \rangle \delta_{k_i,k_j}$. Applying this to the fourth term in $\hat{H}^{int,Hartree,2}$, we get:

$\frac{V_{pp}}{N} \sum_{s, s^{\prime}} \sum_{\sigma_x, \sigma_y} \sum_{k_1, k_2, k_3, k_4} \sum_{G} \delta(k_2 - k_1 + k_4 - k_3, G) e^{-i (k_1 - k_2) \cdot \sigma_x\hat{x}/2 - i (k_3 - k_4) \cdot \sigma_y\hat{y}/2} \times \Big[ \langle c_{p_x,s}^\dagger(k_1) c_{p_x,s}(k_2) \rangle \delta_{k_1,k_2} c_{p_y,s^{\prime}}^\dagger(k_3) c_{p_y,s^{\prime}}(k_4) + \langle c_{p_y,s}^\dagger(k_1) c_{p_y,s}(k_2) \rangle \delta_{k_1,k_2} c_{p_x,s^{\prime}}^\dagger(k_3) c_{p_x,s^{\prime}}(k_4) \Big]$.

Using the property of Kronecker delta function $\delta_{k_1,k_2}$ to sum over $k_2$, we get:

$\frac{V_{pp}}{N} \sum_{s, s^{\prime}} \sum_{\sigma_x, \sigma_y} \sum_{k_1, k_3, k_4} \sum_{G} \delta(k_1 + k_4 - k_3, G) e^{-i (k_1 - k_1) \cdot \sigma_x\hat{x}/2 - i (k_3 - k_4) \cdot \sigma_y\hat{y}/2} \times \Big[ \langle c_{p_x,s}^\dagger(k_1) c_{p_x,s}(k_1) \rangle c_{p_y,s^{\prime}}^\dagger(k_3) c_{p_y,s^{\prime}}(k_4) + \langle c_{p_y,s}^\dagger(k_1) c_{p_y,s}(k_1) \rangle c_{p_x,s^{\prime}}^\dagger(k_3) c_{p_x,s^{\prime}}(k_4) \Big]$.

The total momentum conservation $\delta(k_1 + k_4 - k_3, G)$ implies $k_1 + k_4 = k_3$, so we can further reduce the momentum $k_3$:

$\frac{V_{pp}}{N} \sum_{s, s^{\prime}} \sum_{\sigma_x, \sigma_y} \sum_{k_1, k_4} \Big[ \langle c_{p_x,s}^\dagger(k_1) c_{p_x,s}(k_1) \rangle c_{p_y,s^{\prime}}^\dagger(k_1+k_4) c_{p_y,s^{\prime}}(k_4) + \langle c_{p_y,s}^\dagger(k_1) c_{p_y,s}(k_1) \rangle c_{p_x,s^{\prime}}^\dagger(k_1+k_4) c_{p_x,s^{\prime}}(k_4) \Big]$.

Therefore, the final simplified Hartree term, the fourth term in $\hat{H}^{int,Hartree,2}$, is:

$\frac{V_{pp}}{N} \sum_{s, s^{\prime}} \sum_{\sigma_x, \sigma_y} \sum_{k_1, k_4} \Big[ \langle c_{p_x,s}^\dagger(k_1) c_{p_x,s}(k_1) \rangle c_{p_y,s^{\prime}}^\dagger(k_1+k_4) c_{p_y,s^{\prime}}(k_4) + \langle c_{p_y,s}^\dagger(k_1) c_{p_y,s}(k_1) \rangle c_{p_x,s^{\prime}}^\dagger(k_1+k_4) c_{p_x,s^{\prime}}(k_4) \Big]$.

## Mathematical simplify: reduce index  
**Prompt:**    
You will be instructed to simplify the $\hat{H}^{int,Hartree, V_{pp}}$ by performing constant term summation by reducing the unnecessary indices $\sigma_x$ and $\sigma_y$, where $\sigma_x=\pm 1$, and $\sigma_y=\pm 1$.
You should recall that $\hat{H}^{int,Hartree, V_{pp}} = \frac{V_{pp}}{N} \sum_{s, s^{\prime}} \sum_{\sigma_x, \sigma_y} \sum_{k_1, k_3} \langle c_{p_x,s}^\dagger(k_1) c_{p_x,s}(k_1) \rangle c_{p_y,s^{\prime}}^\dagger(k_3) c_{p_y,s^{\prime}}(k_3) + \langle c_{p_y,s}^\dagger(k_1) c_{p_y,s}(k_1) \rangle c_{p_x,s^{\prime}}^\dagger(k_3) c_{p_x,s^{\prime}}(k_3).$.  
Return the simplified Kinetic Hamiltonian $\hat{H}^{int,Hartree, V_{pp}}$.

**Completion:**    
The indices $\sigma_x$ and $\sigma_y$ are not present in the expression for $\hat{H}^{int,Hartree, V_{pp}}$, so they do not need to be reduced. However, the expression can be simplified by noting that the expectation values $\langle c_{p_x,s}^\dagger(k_1) c_{p_x,s}(k_1) \rangle$ and $\langle c_{p_y,s}^\dagger(k_1) c_{p_y,s}(k_1) \rangle$ are constants for a given $k_1$ and $s$. We can denote these constants as $n_{p_x,s}(k_1)$ and $n_{p_y,s}(k_1)$ respectively. 

The simplified $\hat{H}^{int,Hartree, V_{pp}}$ is then:

$\hat{H}^{int,Hartree, V_{pp}} = \frac{V_{pp}}{N} \sum_{s, s^{\prime}} \sum_{k_1, k_3} \Big[ n_{p_x,s}(k_1) c_{p_y,s^{\prime}}^\dagger(k_3) c_{p_y,s^{\prime}}(k_3) + n_{p_y,s}(k_1) c_{p_x,s^{\prime}}^\dagger(k_3) c_{p_x,s^{\prime}}(k_3) \Big]$.